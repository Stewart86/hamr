{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Hamr","text":"<p>A standalone search bar / launcher built with Rust and GTK4.</p> <p>Migration Notice: This documentation covers the Rust/GTK4 rewrite of Hamr. For the legacy QML/Quickshell version, see the legacy-qml branch.</p>"},{"location":"#features","title":"Features","text":"<ul> <li>Fast fuzzy search across apps, files, and plugins</li> <li>Plugin system with JSON-over-stdio protocol</li> <li>Frecency-based ranking (frequently used items rank higher)</li> <li>GTK4 native UI with layer shell support</li> <li>Support for Hyprland and Niri compositors</li> <li>Material Design 3 theming with dynamic color support</li> </ul>"},{"location":"#quick-start","title":"Quick Start","text":""},{"location":"#installation","title":"Installation","text":"<p>Install from AUR:</p> <pre><code>paru -S hamr-bin  # Pre-built binary (recommended)\n# or\nparu -S hamr      # Build from source\n</code></pre> <p>Or use the quick install script:</p> <pre><code>curl -fsSL https://hamr.run/install.sh | bash\n</code></pre> <p>Toggle the launcher with <code>hamr toggle</code> (bind this to a key in your compositor).</p>"},{"location":"#basic-usage","title":"Basic Usage","text":"Action Description Start typing Search apps and indexed items <code>/plugin</code> Open a specific plugin <code>Tab</code> View actions for selected item <code>Enter</code> Execute selected item/action <code>Escape</code> Go back / close"},{"location":"#documentation","title":"Documentation","text":"<ul> <li> <p> Getting Started</p> <p>Installation, configuration, and theming</p> <p> Installation</p> <p> Theming</p> </li> <li> <p> Plugins</p> <p>Build custom plugins to extend Hamr</p> <p> Building Plugins</p> <p> Cheat Sheet</p> </li> </ul>"},{"location":"#cli-commands","title":"CLI Commands","text":"<pre><code>hamr toggle          # Toggle launcher visibility\nhamr plugin &lt;name&gt;   # Open specific plugin\nhamr status          # Check if daemon is running\nhamr test &lt;plugin&gt;   # Test a plugin\n</code></pre>"},{"location":"#links","title":"Links","text":"<ul> <li>GitHub Repository</li> <li>AUR Package</li> </ul>"},{"location":"architecture/","title":"Software Architecture","text":"<p>Hamr is a fast, extensible desktop launcher built with Rust, featuring a client-server architecture with native UI implementations.</p>"},{"location":"architecture/#system-overview","title":"System Overview","text":"<pre><code>graph TB\n    subgraph \"UI Layer\"\n        TUI[hamr-tui&lt;br/&gt;TUI + Ratatui]\n        GTK[hamr-gtk&lt;br/&gt;GTK4 + Layer Shell]\n        Future[(future)&lt;br/&gt;macOS/Windows]\n    end\n\n    subgraph \"Communication Layer\"\n        RPC[JSON-RPC 2.0 over Unix Socket]\n    end\n\n    subgraph \"Daemon Layer\"\n        Daemon[hamr-daemon&lt;br/&gt;Socket Server]\n        Core[HamrCore&lt;br/&gt;State Machine&lt;br/&gt;Search, Plugins, Index]\n        PluginMgr[Plugin Manager&lt;br/&gt;Spawning &amp; IPC]\n    end\n\n    subgraph \"Plugin Registry\"\n        Discovered[Discovered Plugins&lt;br/&gt;\u2022 stdio&lt;br/&gt;\u2022 socket spawned]\n        Registered[Registered Plugins&lt;br/&gt;\u2022 External services&lt;br/&gt;\u2022 Spawned sockets]\n    end\n\n    subgraph \"Example Plugins\"\n        Apps[apps&lt;br/&gt;stdio&lt;br/&gt;spawn/req]\n        Calc[calc&lt;br/&gt;stdio&lt;br/&gt;spawn/req]\n        Wifi[wifi&lt;br/&gt;socket&lt;br/&gt;daemon]\n    end\n\n    TUI --&gt; RPC\n    GTK --&gt; RPC\n    Future --&gt; RPC\n\n    RPC --&gt; Daemon\n    Daemon --&gt; Core\n    Daemon --&gt; PluginMgr\n\n    Core --&gt; PluginMgr\n    PluginMgr --&gt; Discovered\n    PluginMgr --&gt; Registered\n\n    Registered --&gt; Apps\n    Registered --&gt; Calc\n    Registered --&gt; Wifi</code></pre>"},{"location":"architecture/#core-components","title":"Core Components","text":"<pre><code>graph TB\n    subgraph \"Core Components\"\n        Core[HamrCore&lt;br/&gt;Platform-Agnostic Core]\n        Daemon[HamrDaemon&lt;br/&gt;Socket Server]\n        TUI[HamrTUI&lt;br/&gt;Terminal UI]\n        GTK[HamrGTK&lt;br/&gt;Native Linux UI&lt;br/&gt;Planned]\n        CLI[HamrCLI&lt;br/&gt;Control Client]\n    end\n\n    subgraph \"HamrCore Responsibilities\"\n        Plugin[Plugin Management&lt;br/&gt;Discovery, Spawning, Lifecycle]\n        Search[Search Engine&lt;br/&gt;Nucleo Fuzzy Matching&lt;br/&gt;Frecency Ranking]\n        Index[Index Storage&lt;br/&gt;Disk Persistence&lt;br/&gt;Incremental Updates]\n        Config[Configuration&lt;br/&gt;XDG Loading&lt;br/&gt;Hot-Reload]\n        State[State Machine&lt;br/&gt;CoreEvent \u2192 CoreUpdate]\n    end\n\n    subgraph \"HamrDaemon Responsibilities\"\n        Socket[Unix Socket Server&lt;br/&gt;JSON-RPC 2.0&lt;br/&gt;Length-Prefixed Framing]\n        Clients[Client Management&lt;br/&gt;UI, Control, Plugin]\n        Registry[Plugin Registry&lt;br/&gt;Merge Discovered + Registered]\n        Session[Session Handling&lt;br/&gt;Single Active UI]\n        Watch[Config Watching&lt;br/&gt;Filesystem Monitoring]\n    end\n\n    subgraph \"UI Client Features\"\n        TUI_F[TUI Features&lt;br/&gt;Ratatui Interface&lt;br/&gt;Keyboard Navigation&lt;br/&gt;Compositor Integration&lt;br/&gt;Action Execution]\n        GTK_F[GTK Features&lt;br/&gt;GTK4 + Layer Shell&lt;br/&gt;Material Design 3&lt;br/&gt;Multi-Monitor]\n        CLI_F[CLI Features&lt;br/&gt;Control Operations&lt;br/&gt;Toggle/Show/Hide&lt;br/&gt;Plugin Management]\n    end\n\n    Core --&gt; Plugin\n    Core --&gt; Search\n    Core --&gt; Index\n    Core --&gt; Config\n    Core --&gt; State\n\n    Daemon --&gt; Socket\n    Daemon --&gt; Clients\n    Daemon --&gt; Registry\n    Daemon --&gt; Session\n    Daemon --&gt; Watch\n\n    TUI --&gt; TUI_F\n    GTK --&gt; GTK_F\n    CLI --&gt; CLI_F</code></pre>"},{"location":"architecture/#plugin-system","title":"Plugin System","text":"<p>Hamr supports two plugin architectures for different use cases:</p> <pre><code>graph TD\n    subgraph \"Plugin Types\"\n        Stdio[Stdio Plugins&lt;br/&gt;Request-Response]\n        Socket[Socket Plugins&lt;br/&gt;Persistent Connection]\n    end\n\n    subgraph \"Stdio Characteristics\"\n        S1[Stateless&lt;br/&gt;Spawn per request]\n        S2[Simple Communication&lt;br/&gt;stdin/stdout JSON]\n        S3[Short-lived&lt;br/&gt;Terminates after response]\n        S4[Use Cases&lt;br/&gt;Simple queries&lt;br/&gt;Transformations&lt;br/&gt;One-shot operations]\n    end\n\n    subgraph \"Socket Characteristics\"\n        K1[Stateful&lt;br/&gt;Long-running processes]\n        K2[Full JSON-RPC&lt;br/&gt;Bidirectional communication]\n        K3[Lifecycle Managed&lt;br/&gt;Auto-restart on crash]\n        K4[Use Cases&lt;br/&gt;Monitoring&lt;br/&gt;Background services&lt;br/&gt;Ambient items]\n    end\n\n    subgraph \"Communication Examples\"\n        Calc[Calculator Plugin&lt;br/&gt;python calc.py]\n        Wifi[WiFi Plugin&lt;br/&gt;Background Service]\n    end\n\n    Stdio --&gt; S1\n    Stdio --&gt; S2\n    Stdio --&gt; S3\n    Stdio --&gt; S4\n\n    Socket --&gt; K1\n    Socket --&gt; K2\n    Socket --&gt; K3\n    Socket --&gt; K4\n\n    S4 --&gt; Calc\n    K4 --&gt; Wifi</code></pre>"},{"location":"architecture/#stdio-plugin-example","title":"Stdio Plugin Example","text":"<pre><code>sequenceDiagram\n    participant U as User\n    participant D as Daemon\n    participant P as Plugin\n\n    U-&gt;&gt;D: Types \"2+2\"\n    D-&gt;&gt;P: Spawn calc.py\n    D-&gt;&gt;P: Send JSON {\"method\": \"search\", \"query\": \"2+2\"}\n    P-&gt;&gt;D: Return {\"results\": [{\"name\": \"4\", \"description\": \"2 + 2 = 4\"}]}\n    D-&gt;&gt;P: Plugin terminates\n    D-&gt;&gt;U: Display results</code></pre>"},{"location":"architecture/#socket-plugin-example","title":"Socket Plugin Example","text":"<pre><code>sequenceDiagram\n    participant D as Daemon\n    participant P as Plugin\n\n    Note over D,P: Plugin startup\n    D-&gt;&gt;P: Spawn wifi.py (persistent)\n    P-&gt;&gt;D: Register as plugin\n\n    Note over D,P: User interaction\n    D-&gt;&gt;P: {\"jsonrpc\": \"2.0\", \"method\": \"search\", \"params\": {\"query\": \"wifi\"}, \"id\": 1}\n    P-&gt;&gt;D: {\"jsonrpc\": \"2.0\", \"result\": {\"results\": [{\"name\": \"WiFi: Connected\"}]}}</code></pre>"},{"location":"architecture/#data-flow","title":"Data Flow","text":""},{"location":"architecture/#search-flow","title":"Search Flow","text":"<pre><code>sequenceDiagram\n    participant U as User\n    participant UI as UI Client\n    participant D as Daemon\n    participant C as HamrCore\n    participant P as Plugins\n\n    U-&gt;&gt;UI: Types search query\n    UI-&gt;&gt;D: query_changed (JSON-RPC)\n    D-&gt;&gt;C: Process search request\n    C-&gt;&gt;P: Plugin.search() calls\n    P-&gt;&gt;C: Return search results\n    C-&gt;&gt;D: Emit CoreUpdate::Results\n    D-&gt;&gt;UI: results/results_update (JSON-RPC)\n    UI-&gt;&gt;U: Display updated results</code></pre>"},{"location":"architecture/#action-execution","title":"Action Execution","text":"<pre><code>sequenceDiagram\n    participant U as User\n    participant UI as UI Client\n    participant D as Daemon\n    participant C as HamrCore\n\n    U-&gt;&gt;UI: Selects item/action\n    UI-&gt;&gt;D: item_selected (JSON-RPC)\n    D-&gt;&gt;C: Process action request\n    C-&gt;&gt;D: Return ExecuteAction\n    D-&gt;&gt;UI: execute (JSON-RPC)\n    UI-&gt;&gt;UI: Execute platform action\n    Note over UI: Launch app, copy text,&lt;br/&gt;open URL, show notification</code></pre>"},{"location":"architecture/#key-design-principles","title":"Key Design Principles","text":""},{"location":"architecture/#1-platform-agnostic-core","title":"1. Platform Agnostic Core","text":"<ul> <li>No I/O in core: Actions are data structures, not execution</li> <li>UI owns execution: Platform-specific APIs (launch, copy, notify)</li> <li>Type safety: Zero runtime type coercion with comprehensive Rust types</li> </ul>"},{"location":"architecture/#2-plugin-first-architecture","title":"2. Plugin-First Architecture","text":"<ul> <li>Extensible by design: All features implemented as plugins</li> <li>Two plugin types: Stdio for simple, socket for complex</li> <li>Registry merging: Socket plugins can override discovered ones</li> </ul>"},{"location":"architecture/#3-event-driven-communication","title":"3. Event-Driven Communication","text":"<ul> <li>JSON-RPC 2.0: Industry standard protocol</li> <li>Length-prefixed framing: Reliable message boundaries</li> <li>Multi-client support: Single daemon serves all clients</li> </ul>"},{"location":"architecture/#4-performance-focus","title":"4. Performance Focus","text":"<ul> <li>Nucleo fuzzy search: State-of-the-art matching algorithm</li> <li>Frecency scoring: Usage patterns + time decay</li> <li>Incremental indexing: Only update changed items</li> <li>Hot config reload: No restart required</li> </ul>"},{"location":"architecture/#contributing","title":"Contributing","text":""},{"location":"architecture/#understanding-the-architecture","title":"Understanding the Architecture","text":"<p>When contributing to Hamr, keep these principles in mind:</p> <ol> <li>Core stays pure: Business logic only, no platform code</li> <li>UI executes actions: Core defines what, UI decides how</li> <li>Plugins are first-class: New features should be plugins</li> <li>Type safety everywhere: Use Rust's type system extensively</li> <li>Test core logic: Unit tests for all business logic</li> </ol>"},{"location":"architecture/#development-workflow","title":"Development Workflow","text":"<pre><code>graph LR\n    subgraph \"Development Cycle\"\n        Plan[Plan Feature&lt;br/&gt;Design API]\n        Core[Implement Core&lt;br/&gt;hamr-core]\n        Types[Add Types&lt;br/&gt;hamr-types]\n        Test[Test Core Logic&lt;br/&gt;Unit Tests]\n        UI[Update UI&lt;br/&gt;hamr-tui/hamr-gtk]\n        Integration[Test Integration&lt;br/&gt;Full System]\n        Docs[Update Docs&lt;br/&gt;architecture.md]\n    end\n\n    Plan --&gt; Core\n    Core --&gt; Types\n    Types --&gt; Test\n    Test --&gt; UI\n    UI --&gt; Integration\n    Integration --&gt; Docs\n    Docs --&gt; Plan\n\n    style Plan fill:#e8f5e8\n    style Core fill:#e1f5fe\n    style Test fill:#fff3e0\n    style Integration fill:#f3e5f5</code></pre> <pre><code># Work on core logic\ncd crates/hamr-core\ncargo test                    # Run core tests\ncargo test specific_test      # Run single test\n\n# Work on daemon\ncd crates/hamr-daemon\ncargo run                     # Start daemon\n\n# Work on TUI (separate terminal)\ncd crates/hamr-tui\ncargo run                     # Start TUI client\n\n# Check everything compiles\ncargo check --workspace\n</code></pre>"},{"location":"architecture/#adding-new-features","title":"Adding New Features","text":"<ol> <li>Core logic first: Implement in <code>hamr-core</code> with tests</li> <li>Type definitions: Add to <code>hamr-types</code> if shared</li> <li>UI integration: Update UI clients to handle new types</li> <li>Documentation: Update this guide and API docs</li> </ol>"},{"location":"architecture/#plugin-development","title":"Plugin Development","text":"<ol> <li>Choose plugin type: Stdio for simple, socket for complex</li> <li>Manifest first: Define capabilities in <code>manifest.json</code></li> <li>Protocol compliance: Follow JSON protocol specification</li> <li>Error handling: Graceful failure with meaningful messages</li> </ol>"},{"location":"architecture/#crate-structure","title":"Crate Structure","text":""},{"location":"architecture/#dependency-graph","title":"Dependency Graph","text":"<pre><code>graph TD\n    Types[hamr-types&lt;br/&gt;Shared Types Foundation]\n\n    Core[hamr-core&lt;br/&gt;Platform-Agnostic Core&lt;br/&gt;Plugin Management&lt;br/&gt;Search Engine&lt;br/&gt;State Machine]\n\n    RPC[hamr-rpc&lt;br/&gt;JSON-RPC Protocol&lt;br/&gt;Transport Layer&lt;br/&gt;Client Library]\n\n    Daemon[hamr-daemon&lt;br/&gt;Socket Server&lt;br/&gt;Client Management&lt;br/&gt;Session Handling]\n\n    TUI[hamr-tui&lt;br/&gt;Terminal UI&lt;br/&gt;Ratatui Interface&lt;br/&gt;Action Execution]\n\n    CLI[hamr-cli&lt;br/&gt;Control Client&lt;br/&gt;Command Interface]\n\n    GTK[hamr-gtk&lt;br/&gt;GTK4 UI&lt;br/&gt;Native Linux&lt;br/&gt;TODO]\n\n    Types --&gt; Core\n    Types --&gt; RPC\n\n    Core --&gt; Daemon\n    RPC --&gt; Daemon\n\n    Daemon --&gt; TUI\n    Daemon --&gt; CLI\n    Daemon --&gt; GTK\n\n    style Core fill:#e1f5fe\n    style Daemon fill:#f3e5f5\n    style TUI fill:#e8f5e8\n    style CLI fill:#fff3e0\n    style GTK fill:#ffebee,stroke-dasharray: 5 5</code></pre> <p>This architecture enables Hamr to be fast, extensible, and maintainable while supporting multiple platforms and UI implementations.</p>"},{"location":"features/","title":"Features","text":""},{"location":"features/#core-features","title":"Core Features","text":"<ul> <li>Frecency-based ranking - Results sorted by frequency + recency (inspired by zoxide)</li> <li>Learned search affinity - System learns your search shortcuts (type \"q\" to find QuickLinks if that's how you found it before)</li> <li>Pattern-matched plugins - Plugins can auto-trigger on patterns (e.g., math expressions, URLs) without explicit prefixes</li> <li>Fuzzy matching - Fast, typo-tolerant search powered by fuzzysort, includes desktop entry keywords</li> <li>Extensible plugins - Language-agnostic handlers with simple JSON protocol (Python, Bash, Go, Rust, etc.)</li> <li>History tracking - Search, plugin actions, and shell command history</li> <li>Smart suggestions - Context-aware app suggestions based on time, workspace, and usage patterns</li> <li>Preview panel - Drawer-style side panel shows rich previews (images, markdown, metadata) on hover/selection; pin previews to screen</li> <li>Draggable &amp; persistent position - Drag the launcher anywhere on screen; position remembered across sessions</li> <li>State restoration - Click outside to dismiss, reopen within 30s to resume where you left off (configurable)</li> <li>Live plugin updates - Plugins can emit real-time updates via daemon mode (no full list refresh, preserves focus)</li> <li>File watching - Plugins can watch files/directories for changes with native inotify</li> </ul>"},{"location":"features/#prefix-shortcuts","title":"Prefix Shortcuts","text":"Prefix Function Prefix Function <code>~</code> File search <code>;</code> Clipboard history <code>/</code> Actions &amp; plugins <code>!</code> Shell history <code>=</code> Calculator <code>:</code> Emoji picker <p>These shortcuts are fully customizable. See Configuration for details.</p>"},{"location":"features/#smart-calculator","title":"Smart Calculator","text":"<p>Type math expressions directly - no prefix needed. Examples: <code>2+2</code>, <code>sqrt(16)</code>, <code>10c</code> (celsius), <code>$50 to EUR</code>, <code>20% of 32</code>, <code>10ft to m</code></p> <p>Powered by qalculate - supports 150+ currencies, 100+ units, percentages, and advanced math.</p>"},{"location":"features/#built-in-plugins","title":"Built-in Plugins","text":"<p>All plugins are indexed and searchable directly from the main bar - no prefix required. Just type what you want (e.g., \"clipboard\", \"emoji\", \"power\") and Hamr finds it.</p> Plugin Description <code>apps</code> App drawer with categories (like rofi/dmenu) <code>bitwarden</code> Password manager with keyring integration <code>calculate</code> Calculator with currency, units, and temperature <code>clipboard</code> Clipboard history with OCR search, filter by type <code>dictionary</code> Dictionary lookup with definitions <code>emoji</code> Emoji picker with search <code>files</code> File search with fd + fzf, thumbnails for images <code>aur</code> Search and install packages from AUR (yay/paru) <code>flathub</code> Search and install apps from Flathub <code>notes</code> Quick notes with multi-line content support <code>pictures</code> Browse images with thumbnails <code>player</code> Media player controls via playerctl <code>power</code> System power and session controls <code>quicklinks</code> Web search with customizable quicklinks <code>screenrecord</code> Screen recording with auto-trim (wf-recorder) <code>screenshot</code> Browse screenshots with OCR text search <code>settings</code> Configure Hamr launcher options <code>sound</code> System volume controls <code>shell</code> Shell command history (zsh/bash/fish) <code>snippet</code> Text snippets for quick insertion <code>theme</code> Dark/light mode and accent color switching <code>timer</code> Countdown timers with presets, FAB display, and notifications <code>todo</code> Simple todo list manager (live updates via daemon) <code>topcpu</code> Process monitor sorted by CPU usage (live daemon refresh) <code>topmem</code> Process monitor sorted by memory usage (live daemon refresh) <code>url</code> Open URLs in browser (auto-detects domain patterns) <code>wallpaper</code> Wallpaper selector (swww, hyprpaper, swaybg, feh) <code>webapp</code> Install and manage web apps <code>whats-that-word</code> Find words from descriptions or fix misspellings <code>zoxide</code> Jump to frequently used directories <code>hyprland</code> Window management, dispatchers, and global shortcuts (Hyprland only) <code>niri</code> Window management and compositor actions (Niri only)"},{"location":"features/#compositor-integration","title":"Compositor Integration","text":""},{"location":"features/#hyprland","title":"Hyprland","text":"<p>The <code>hyprland</code> plugin provides natural language access to Hyprland window management - no need to memorize keybindings.</p> <p>Window Management:</p> <ul> <li><code>toggle floating</code>, <code>fullscreen</code>, <code>maximize</code>, <code>pin</code>, <code>center window</code></li> <li><code>close window</code>, <code>focus left/right/up/down</code></li> <li><code>move window left/right/up/down</code>, <code>swap left/right/up/down</code></li> </ul> <p>Workspace Navigation:</p> <ul> <li><code>workspace 3</code>, <code>go to 5</code>, <code>next workspace</code>, <code>previous workspace</code></li> <li><code>move to 2</code>, <code>move to workspace 4 silent</code></li> <li><code>scratchpad</code>, <code>empty workspace</code></li> </ul> <p>Window Groups (Tabs):</p> <ul> <li><code>create group</code> - Make current window a group</li> <li><code>join group left/right</code> - Add window to adjacent group</li> <li><code>remove from group</code>, <code>next in group</code>, <code>prev in group</code></li> </ul> <p>Global Shortcuts: Every app that registers DBus global shortcuts becomes instantly searchable. That obscure \"Toggle side panel\" shortcut from your browser extension? Just type <code>side panel</code>.</p> <p>Type <code>/hyprland</code> to browse all available commands.</p>"},{"location":"features/#niri","title":"Niri","text":"<p>The <code>niri</code> plugin provides natural language access to Niri window management, optimized for Niri's scrollable tiling layout.</p> <p>Window Management:</p> <ul> <li><code>close window</code>, <code>fullscreen</code>, <code>toggle floating</code>, <code>center column</code></li> <li><code>maximize column</code>, <code>toggle tabbed</code> (column tabbed display)</li> </ul> <p>Column Operations:</p> <ul> <li><code>consume window</code> - Add window to the right into the focused column</li> <li><code>expel window</code> - Move focused window out of column</li> <li><code>expand column</code> - Expand column to available width</li> <li><code>focus column left/right</code>, <code>move column left/right</code></li> </ul> <p>Window Movement:</p> <ul> <li><code>focus window up/down</code>, <code>move window up/down</code></li> <li><code>swap window left/right</code></li> </ul> <p>Workspace Navigation:</p> <ul> <li><code>focus workspace up/down</code>, <code>focus workspace previous</code></li> <li><code>move window to workspace up/down</code></li> <li><code>move column to workspace up/down</code></li> </ul> <p>Type <code>/niri</code> to browse all available actions.</p>"},{"location":"features/#smart-search","title":"Smart Search","text":"<p>Hamr learns your search habits and creates automatic shortcuts. No configuration needed.</p> <p>How it works:</p> <ol> <li>Type \"ff\", scroll to \"Firefox\", press Enter</li> <li>Next time you type \"ff\", Firefox appears at the top</li> <li>The system remembers the last 5 search terms for each item</li> </ol> <p>Ranking algorithm:</p> <ol> <li>Learned shortcuts first - Items where you've used that exact search term before rank highest</li> <li>Frecency decides ties - Among learned shortcuts, most frequently/recently used wins</li> <li>Fuzzy matches last - Items that match but you haven't searched that way before</li> </ol>"},{"location":"features/#smart-suggestions","title":"Smart Suggestions","text":"<p>When you open Hamr with an empty search, you may see suggested apps at the top marked with a sparkle icon.</p> <p>What triggers suggestions:</p> Signal Weight Example App sequences High VS Code suggested after opening Terminal Session start High Email client suggested right after login Time of day Medium Slack suggested at 9am if you always open it then Workspace Medium Browser suggested on workspace 1 Day of week Low Personal apps suggested on weekends <p>No configuration needed. Suggestions appear automatically as patterns emerge.</p>"},{"location":"plugin-protocol/","title":"Hamr Plugin Protocol Reference","text":"<p>This document describes the JSON protocol used between plugins and the hamr daemon.</p>"},{"location":"plugin-protocol/#transport","title":"Transport","text":"<p>Plugins communicate using one of two transport types:</p> Type Description Use Case <code>stdio</code> JSON over stdin/stdout, line-delimited Simple plugins, daemons <code>socket</code> JSON-RPC 2.0 over Unix socket Complex daemons with SDK"},{"location":"plugin-protocol/#stdio-transport","title":"stdio Transport","text":"<p>For <code>stdio</code> handlers, hamr spawns the handler process and communicates via: - Request: JSON written to handler's stdin (one object per line for daemons) - Response: JSON read from handler's stdout</p>"},{"location":"plugin-protocol/#socket-transport","title":"socket Transport","text":"<p>For <code>socket</code> handlers (using the Python SDK), the handler connects to hamr's Unix socket at <code>$XDG_RUNTIME_DIR/hamr.sock</code> and uses length-prefixed JSON-RPC 2.0 messages.</p>"},{"location":"plugin-protocol/#request-schema","title":"Request Schema","text":"<p>Each request is a JSON object with the following common fields:</p> Field Type Description <code>step</code> string <code>\"initial\"</code>, <code>\"search\"</code>, <code>\"action\"</code>, <code>\"form\"</code>, <code>\"match\"</code>, <code>\"index\"</code> <code>query</code> string Current search bar text <code>selected</code> object Selected item info (for action step) <code>action</code> string Action button ID (for action step) <code>formData</code> object Form field values (for form step) <code>context</code> string Plugin state from previous response <code>session</code> string Unique session identifier <code>source</code> string <code>\"ambient\"</code> for ambient bar actions <code>value</code> number Slider/switch value (for slider/switch changes)"},{"location":"plugin-protocol/#step-types","title":"Step Types","text":"Step When Triggered <code>initial</code> Plugin opens <code>search</code> User types (realtime) or presses Enter (submit) <code>action</code> User selects item or clicks action <code>match</code> Pattern matched in main search <code>form</code> Form submitted <code>index</code> Index request (for daemon plugins)"},{"location":"plugin-protocol/#examples","title":"Examples","text":"<pre><code>{ \"step\": \"initial\", \"session\": \"abc123\" }\n</code></pre> <pre><code>{ \"step\": \"search\", \"query\": \"calc 1+1\", \"session\": \"abc123\" }\n</code></pre> <pre><code>{ \"step\": \"action\", \"selected\": {\"id\": \"item-1\"}, \"action\": \"copy\", \"session\": \"abc123\" }\n</code></pre> <pre><code>{ \"step\": \"match\", \"query\": \"2+2\", \"session\": \"abc123\" }\n</code></pre> <pre><code>{ \"step\": \"index\", \"mode\": \"full\", \"session\": \"abc123\" }\n</code></pre>"},{"location":"plugin-protocol/#response-schema","title":"Response Schema","text":"<p>Responses are JSON objects with a <code>type</code> field.</p> Type Purpose <code>results</code> Display list of items <code>execute</code> Run action and/or close <code>match</code> Pattern match result <code>card</code> Display markdown content <code>form</code> Show input form <code>index</code> Provide searchable items <code>status</code> Update plugin status <code>update</code> Patch existing items <code>error</code> Show error message <code>noop</code> No UI change"},{"location":"plugin-protocol/#results","title":"results","text":"<pre><code>{\n    \"type\": \"results\",\n    \"results\": [{ \"id\": \"1\", \"name\": \"Result\", \"description\": \"Example\" }],\n    \"placeholder\": \"Search...\",\n    \"inputMode\": \"realtime\",\n    \"context\": \"state\",\n    \"pluginActions\": [],\n    \"status\": {}\n}\n</code></pre> <p>Result item fields:</p> Field Type Description <code>id</code> string Unique identifier <code>name</code> string Primary display text <code>description</code> string Secondary text <code>icon</code> string Icon name <code>iconType</code> string <code>\"system\"</code>, <code>\"material\"</code>, or <code>\"text\"</code> <code>thumbnail</code> string Image path <code>verb</code> string Action text on hover <code>type</code> string <code>\"slider\"</code> or <code>\"switch\"</code> for interactive <code>resultType</code> string Alternative to <code>type</code> for socket plugins <code>value</code> varies Current value for slider/switch <code>badges</code> array Badge indicators <code>chips</code> array Pill-shaped tags <code>actions</code> array Action buttons <code>gauge</code> object Circular progress (replaces icon) <code>graph</code> object Line graph (replaces icon) <code>progress</code> object Progress bar (replaces description) <code>preview</code> object Side panel content"},{"location":"plugin-protocol/#execute","title":"execute","text":"<pre><code>{\n    \"type\": \"execute\",\n    \"launch\": \"/path/to/app.desktop\",\n    \"copy\": \"text\",\n    \"openUrl\": \"https://...\",\n    \"open\": \"/path/to/file\",\n    \"typeText\": \"text to type\",\n    \"notify\": \"Done!\",\n    \"sound\": \"complete\",\n    \"close\": true\n}\n</code></pre>"},{"location":"plugin-protocol/#match","title":"match","text":"<pre><code>{\n    \"type\": \"match\",\n    \"result\": {\n        \"id\": \"calc_result\",\n        \"name\": \"4\",\n        \"description\": \"2+2\",\n        \"icon\": \"calculate\",\n        \"copy\": \"4\",\n        \"priority\": 100\n    }\n}\n</code></pre> <p>Return <code>{\"type\": \"match\", \"result\": null}</code> to hide the match result.</p>"},{"location":"plugin-protocol/#form","title":"form","text":"<pre><code>{\n    \"type\": \"form\",\n    \"form\": {\n        \"title\": \"Add Item\",\n        \"fields\": [...],\n        \"submitLabel\": \"Save\"\n    },\n    \"context\": \"__add__\"\n}\n</code></pre>"},{"location":"plugin-protocol/#index","title":"index","text":"<pre><code>{\n    \"type\": \"index\",\n    \"mode\": \"full\",\n    \"items\": [\n        {\n            \"id\": \"app:firefox\",\n            \"name\": \"Firefox\",\n            \"icon\": \"firefox\",\n            \"iconType\": \"system\",\n            \"keywords\": [\"browser\"],\n            \"entryPoint\": {\"step\": \"action\", \"selected\": {\"id\": \"app:firefox\"}}\n        }\n    ]\n}\n</code></pre>"},{"location":"plugin-protocol/#status","title":"status","text":"<pre><code>{\n    \"type\": \"status\",\n    \"status\": {\n        \"badges\": [{\"text\": \"5\"}],\n        \"chips\": [{\"text\": \"Running\", \"icon\": \"timer\"}],\n        \"description\": \"5 pending tasks\",\n        \"fab\": {\"chips\": [{\"text\": \"04:32\"}], \"priority\": 10, \"showFab\": true},\n        \"ambient\": [{\"id\": \"timer-1\", \"name\": \"Timer\", \"description\": \"04:32\"}]\n    }\n}\n</code></pre>"},{"location":"plugin-protocol/#update","title":"update","text":"<pre><code>{\n    \"type\": \"update\",\n    \"items\": [\n        {\"id\": \"volume\", \"value\": 75, \"gauge\": {\"value\": 75, \"max\": 100}}\n    ]\n}\n</code></pre>"},{"location":"plugin-protocol/#error","title":"error","text":"<pre><code>{ \"type\": \"error\", \"message\": \"Something went wrong\" }\n</code></pre>"},{"location":"plugin-protocol/#noop","title":"noop","text":"<pre><code>{ \"type\": \"noop\" }\n</code></pre>"},{"location":"plugin-protocol/#special-ids","title":"Special IDs","text":"ID Context Meaning <code>__back__</code> <code>selected.id</code> Back button/Escape pressed <code>__plugin__</code> <code>selected.id</code> Plugin action clicked <code>__form_cancel__</code> <code>selected.id</code> Form cancelled <code>__empty__</code> <code>selected.id</code> Non-actionable placeholder <code>__dismiss__</code> <code>action</code> Ambient item dismissed"},{"location":"plugin-protocol/#notes","title":"Notes","text":"<ul> <li>Unknown fields should be ignored for forward compatibility.</li> <li>All field names use camelCase.</li> </ul>"},{"location":"getting-started/cli/","title":"CLI Reference","text":"<p>Hamr provides a unified CLI (<code>hamr</code>) for controlling the launcher.</p>"},{"location":"getting-started/cli/#quick-reference","title":"Quick Reference","text":"Command Description <code>hamr</code> Start GTK launcher (auto-starts daemon) <code>hamr toggle</code> Toggle launcher visibility <code>hamr plugin &lt;id&gt;</code> Open a specific plugin <code>hamr status</code> Check daemon status <code>hamr install</code> Set up systemd services and directories"},{"location":"getting-started/cli/#starting-hamr","title":"Starting Hamr","text":"<pre><code># Start GTK launcher (recommended - auto-starts daemon if needed)\nhamr\n\n# Or start components separately\nhamr daemon    # Run daemon in foreground\nhamr gtk       # Run GTK UI in foreground\nhamr tui       # Run TUI in terminal\n</code></pre>"},{"location":"getting-started/cli/#controlling-the-launcher","title":"Controlling the Launcher","text":"<pre><code>hamr toggle              # Toggle visibility (bind to hotkey)\nhamr show                # Show the launcher\nhamr hide                # Hide the launcher\nhamr plugin clipboard    # Open specific plugin\nhamr plugin apps         # Open apps plugin\n</code></pre>"},{"location":"getting-started/cli/#daemon-management","title":"Daemon Management","text":"<pre><code>hamr status          # Check if daemon is running\nhamr shutdown        # Stop the daemon\nhamr reload-plugins  # Reload plugins without restart\n</code></pre>"},{"location":"getting-started/cli/#plugin-management","title":"Plugin Management","text":"<pre><code>hamr plugins list    # List installed plugins\nhamr plugins audit   # Verify plugin checksums\n</code></pre>"},{"location":"getting-started/cli/#installation-commands","title":"Installation Commands","text":"<pre><code>hamr install --check  # Preview what will be set up\nhamr install          # Set up systemd services and directories\nhamr uninstall        # Remove systemd services (keeps config)\n</code></pre>"},{"location":"getting-started/cli/#systemd-integration","title":"Systemd Integration","text":"<p>After running <code>hamr install</code>, systemd services are created:</p> <pre><code># Start services\nsystemctl --user start hamr-gtk    # Starts both GTK and daemon\n\n# Check status\nsystemctl --user status hamr-daemon\nsystemctl --user status hamr-gtk\n\n# View logs\njournalctl --user -u hamr-daemon -f\njournalctl --user -u hamr-gtk -f\n\n# Stop services\nsystemctl --user stop hamr-gtk\nsystemctl --user stop hamr-daemon\n</code></pre>"},{"location":"getting-started/cli/#keybinding-examples","title":"Keybinding Examples","text":""},{"location":"getting-started/cli/#hyprland","title":"Hyprland","text":"<pre><code>exec-once = hamr\nbind = $mainMod, SPACE, exec, hamr toggle\nbind = $mainMod, V, exec, hamr plugin clipboard\n</code></pre>"},{"location":"getting-started/cli/#niri","title":"Niri","text":"<pre><code>spawn-at-startup \"hamr\"\n\nbinds {\n    Mod+Space { spawn \"hamr\" \"toggle\"; }\n    Mod+V { spawn \"hamr\" \"plugin\" \"clipboard\"; }\n}\n</code></pre>"},{"location":"getting-started/cli/#environment-variables","title":"Environment Variables","text":"Variable Description <code>RUST_LOG</code> Log level (<code>debug</code>, <code>info</code>, <code>warn</code>, <code>error</code>) <code>HAMR_PLUGIN_DEBUG</code> Enable plugin debug output <p>See Logging for more details.</p>"},{"location":"getting-started/configuration/","title":"Configuration","text":"<p>Hamr is configured via <code>~/.config/hamr/config.json</code>. Use the built-in settings plugin (<code>/settings</code>) to browse and modify options - no manual editing needed.</p>"},{"location":"getting-started/configuration/#configuration-reference","title":"Configuration Reference","text":"Category Option Default Description Apps <code>terminal</code> (auto-detected) Terminal emulator for shell commands <code>fileManager</code> (auto-detected) File manager for file operations <code>browser</code> (auto-detected) Web browser for URL opening Search <code>maxDisplayedResults</code> <code>16</code> Maximum results shown in launcher <code>maxRecentItems</code> <code>20</code> Recent history items on empty search <code>maxResultsPerPlugin</code> <code>0</code> Hard limit per plugin (0 = no limit) <code>pluginDebounceMs</code> <code>150</code> Search input debounce (ms) <code>diversityDecay</code> <code>0.7</code> Decay for consecutive results from same plugin (0-1, lower = more diverse) <code>engineBaseUrl</code> <code>https://www.google.com/search?q=</code> Default search engine URL <code>excludedSites</code> <code>[]</code> Sites to exclude from web search results <code>pluginRankingBonus</code> <code>{}</code> Per-plugin score boosts (e.g., <code>{\"apps\": 200}</code>) Action Bar <code>actionBarHints</code> see below Customizable action bar shortcuts"},{"location":"getting-started/configuration/#prefix-shortcuts","title":"Prefix Shortcuts","text":"<p>Search prefixes let you quickly jump to specific functionality by typing a character:</p> Prefix Option Function <code>/</code> <code>plugins</code> Search plugins by name <code>@</code> <code>app</code> Application search <code>:</code> <code>emojis</code> Emoji search <code>=</code> <code>math</code> Calculator <code>!</code> <code>shellCommand</code> Shell command <code>?</code> <code>webSearch</code> Web search <p>Configure these in <code>config.json</code> under the <code>search</code> section:</p> <pre><code>{\n  \"search\": {\n    \"plugins\": \"/\",\n    \"app\": \"@\",\n    \"emojis\": \":\",\n    \"math\": \"=\",\n    \"shellCommand\": \"!\",\n    \"webSearch\": \"?\"\n  }\n}\n</code></pre>"},{"location":"getting-started/configuration/#plugin-ranking-bonus","title":"Plugin Ranking Bonus","text":"<p>Control which plugins appear higher in search results by assigning bonus points. This is useful when you want certain plugins (like apps) to consistently rank above others.</p>"},{"location":"getting-started/configuration/#how-it-works","title":"How It Works","text":"<p>Hamr calculates a composite score for each result based on: - Fuzzy match score (0-1000+): How well the query matches the item name - Frecency (0-300): Usage frequency combined with recency - History boost (+200): When query exactly matches a previously used search term - Plugin ranking bonus: Your custom per-plugin boost</p> <p>Higher total scores appear first in results.</p>"},{"location":"getting-started/configuration/#configuration_1","title":"Configuration","text":"<p>Add <code>pluginRankingBonus</code> to your <code>config.json</code>:</p> <pre><code>{\n  \"search\": {\n    \"pluginRankingBonus\": {\n      \"apps\": 200,\n      \"settings\": 100,\n      \"files\": 50\n    }\n  }\n}\n</code></pre>"},{"location":"getting-started/configuration/#finding-plugin-ids","title":"Finding Plugin IDs","text":"<p>To find the ID of a plugin: 1. Type <code>/</code> in Hamr to open the plugin list 2. The plugin ID is shown in the result subtitle (e.g., \"apps\", \"clipboard\", \"emoji\")</p> <p>Or check the <code>id</code> field in the plugin's <code>manifest.json</code>.</p>"},{"location":"getting-started/configuration/#recommended-values","title":"Recommended Values","text":"Bonus Range Effect 50-100 Subtle boost, breaks ties in favor of this plugin 150-250 Noticeable preference, plugin results appear higher 300+ Strong preference, almost always appears first <p>Example use cases: - <code>\"apps\": 200</code> - Prioritize launching applications over other results - <code>\"clipboard\": 100</code> - Boost clipboard items when searching for copied text - <code>\"quicklinks\": 150</code> - Make your custom quicklinks more prominent</p>"},{"location":"getting-started/configuration/#interaction-with-diversity-decay","title":"Interaction with Diversity Decay","text":"<p>The <code>diversityDecay</code> setting (default: 0.7) penalizes consecutive results from the same plugin. Even with a high bonus, the 2nd result from a plugin scores 70% of the first, the 3rd scores 49%, etc. This prevents one plugin from dominating all results.</p>"},{"location":"getting-started/configuration/#action-bar-hints","title":"Action Bar Hints","text":"<p>The action bar shortcuts are fully customizable via <code>actionBarHints</code>. Default hints include:</p> <pre><code>{\n  \"search\": {\n    \"actionBarHints\": [\n      { \"prefix\": \"~\", \"icon\": \"folder_open\", \"label\": \"Files\", \"plugin\": \"files\" },\n      { \"prefix\": \";\", \"icon\": \"content_paste\", \"label\": \"Clipboard\", \"plugin\": \"clipboard\" },\n      { \"prefix\": \"=\", \"icon\": \"calculate\", \"label\": \"Calculate\", \"plugin\": \"calculate\" },\n      { \"prefix\": \":\", \"icon\": \"emoji_emotions\", \"label\": \"Emoji\", \"plugin\": \"emoji\" },\n      { \"prefix\": \"!\", \"icon\": \"terminal\", \"label\": \"Shell\", \"plugin\": \"shell\" }\n    ]\n  }\n}\n</code></pre> <p>Each hint has:</p> <ul> <li>prefix: The trigger character (e.g., <code>~</code>, <code>;</code>, <code>:</code>)</li> <li>icon: Icon name (GTK-compatible icon names)</li> <li>label: Display name shown in the action bar</li> <li>plugin: Plugin ID to launch</li> <li>description: Optional description (shown in settings)</li> </ul>"},{"location":"getting-started/configuration/#direct-plugin-keybindings","title":"Direct Plugin Keybindings","text":"<p>You can bind keys to open specific plugins directly:</p> <pre><code>hamr plugin &lt;plugin_name&gt;\n</code></pre>"},{"location":"getting-started/configuration/#hyprland","title":"Hyprland","text":"<pre><code># ~/.config/hypr/hyprland.conf\n\n# Open clipboard directly with Mod+V\nbind = SUPER, V, exec, hamr plugin clipboard\n\n# Open emoji picker with Mod+Period\nbind = SUPER, Period, exec, hamr plugin emoji\n\n# Open file search with Mod+E\nbind = SUPER, E, exec, hamr plugin files\n</code></pre>"},{"location":"getting-started/configuration/#niri","title":"Niri","text":"<pre><code>// ~/.config/niri/config.kdl\nbinds {\n    // Open clipboard directly with Mod+V\n    Mod+V { spawn \"hamr\" \"plugin\" \"clipboard\"; }\n\n    // Open emoji picker with Mod+Period\n    Mod+Period { spawn \"hamr\" \"plugin\" \"emoji\"; }\n\n    // Open file search with Mod+E\n    Mod+E { spawn \"hamr\" \"plugin\" \"files\"; }\n}\n</code></pre>"},{"location":"getting-started/configuration/#sway","title":"Sway","text":"<pre><code># ~/.config/sway/config\n\n# Open clipboard directly with Mod+V\nbindsym $mod+V exec hamr plugin clipboard\n\n# Open emoji picker with Mod+Period\nbindsym $mod+Period exec hamr plugin emoji\n\n# Open file search with Mod+E\nbindsym $mod+E exec hamr plugin files\n</code></pre>"},{"location":"getting-started/configuration/#file-structure","title":"File Structure","text":"<pre><code>~/.config/hamr/\n\u251c\u2500\u2500 plugins/                     # User plugins (override built-in)\n\u251c\u2500\u2500 config.json                  # User configuration\n\u251c\u2500\u2500 quicklinks.json              # Custom quicklinks\n\u2514\u2500\u2500 plugin-indexes.json          # Plugin data and frecency (auto-generated)\n\n~/.local/share/hamr/             # Installation directory (AUR/manual)\n\u251c\u2500\u2500 plugins/                     # Built-in plugins (read-only)\n\u2514\u2500\u2500 daemon                       # Hamr daemon binary\n</code></pre>"},{"location":"getting-started/configuration/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting-started/configuration/#i-ran-hamr-but-nothing-appears","title":"\"I ran <code>hamr</code> but nothing appears\"","text":"<p>This is expected. Hamr starts hidden and waits for a toggle signal. Make sure you:</p> <ol> <li>Added the keybinding to your compositor config (see Installation)</li> <li>Reloaded your compositor config</li> <li>Press your keybind (e.g., Super key or Ctrl+Space)</li> </ol>"},{"location":"getting-started/configuration/#check-daemon-status","title":"Check daemon status","text":"<pre><code># Check if daemon is running\nhamr status\n\n# View daemon logs\ntail -f /tmp/hamr-daemon.log\n</code></pre>"},{"location":"getting-started/configuration/#view-logs","title":"View logs","text":"<p>Hamr writes debug logs to <code>/tmp/</code> with symlinks to the latest: - Daemon: <code>/tmp/hamr-daemon.log</code> - TUI: <code>/tmp/hamr-tui.log</code> - GTK: <code>/tmp/hamr-gtk.log</code></p> <pre><code># Follow daemon logs in real-time\ntail -f /tmp/hamr-daemon.log\n\n# View recent entries from both\ntail -n 100 /tmp/hamr-daemon.log /tmp/hamr-tui.log\n\n# Search for specific patterns\ngrep -i \"error\\|warn\" /tmp/hamr-daemon.log\n</code></pre>"},{"location":"getting-started/configuration/#configuration-issues","title":"Configuration issues","text":"<p>If your config isn't working:</p> <ol> <li>Check JSON syntax: <code>python -m json.tool ~/.config/hamr/config.json</code></li> <li>Verify daemon picks up changes: <code>hamr daemon-reload</code></li> <li>Check for unknown fields in logs: <code>grep \"unknown field\" /tmp/hamr-daemon.log</code></li> </ol>"},{"location":"getting-started/configuration/#plugin-not-responding","title":"Plugin not responding","text":"<pre><code># Check if plugin is connected\ngrep \"plugin\" /tmp/hamr-daemon.log | tail -20\n\n# Look for action forwarding issues\ngrep \"handle_item_selected\\|Forwarding action\" /tmp/hamr-daemon.log\n</code></pre>"},{"location":"getting-started/configuration/#warning-about-missing-colorsjson","title":"Warning about missing <code>colors.json</code>","text":"<p>This is harmless. Hamr uses built-in default colors. For dynamic theming from your wallpaper, install matugen and use the wallpaper plugin.</p>"},{"location":"getting-started/configuration/#warning-about-missing-quicklinksjson","title":"Warning about missing <code>quicklinks.json</code>","text":"<p>This is harmless. Quicklinks are optional. To add quicklinks, create <code>~/.config/hamr/quicklinks.json</code>:</p> <pre><code>[{ \"name\": \"GitHub\", \"url\": \"https://github.com\", \"icon\": \"code\" }]\n</code></pre>"},{"location":"getting-started/installation/","title":"Installation","text":""},{"location":"getting-started/installation/#architecture-overview","title":"Architecture Overview","text":"<p>Hamr consists of several components that work together:</p> <ul> <li>hamr-daemon: Core service that manages plugins and search</li> <li>hamr-gtk: GTK4 launcher UI (what you see when you press the hotkey)</li> <li>hamr-cli: Command-line interface for testing and control</li> <li>hamr-tui: Terminal UI for headless environments</li> </ul> <p>The daemon runs continuously and communicates with the UI clients via JSON-RPC.</p>"},{"location":"getting-started/installation/#requirements","title":"Requirements","text":"<ul> <li>GTK4 4.20+ and gtk4-layer-shell (for the GTK4 interface)</li> <li>A supported Wayland compositor: Hyprland or Niri</li> <li>Python 3.9+ (for plugins)</li> <li>Rust 1.88+ (for building from source)</li> </ul>"},{"location":"getting-started/installation/#compositor-support-matrix","title":"Compositor Support Matrix","text":"Compositor Status Notes Hyprland \u2705 Supported Full functionality with layer-shell Niri \u2705 Supported Full functionality with layer-shell Sway \u2705 Supported Works with layer-shell protocol KDE Wayland \u2705 Supported Requires layer-shell support GNOME Wayland \u274c Not Supported No layer-shell protocol support X11 \u274c Not Supported Wayland-only application"},{"location":"getting-started/installation/#arch-linux-aur","title":"Arch Linux (AUR)","text":"<pre><code># Pre-built binary (recommended - faster install)\nparu -S hamr-bin\n\n# Or build from source\nparu -S hamr\n</code></pre>"},{"location":"getting-started/installation/#manual-download","title":"Manual Download","text":"<p>Download pre-built binaries directly from GitHub:</p> <pre><code># Download latest release\nwget https://github.com/Stewart86/hamr/releases/latest/download/hamr-linux-x86_64.tar.gz\n\n# Extract\ntar -xzf hamr-linux-x86_64.tar.gz\ncd hamr-linux-x86_64\n\n# Install binaries\nmkdir -p ~/.local/bin\ncp hamr hamr-daemon hamr-gtk hamr-tui ~/.local/bin/\ncp -r plugins ~/.local/bin/\n\n# Set up systemd services\nhamr install\n</code></pre>"},{"location":"getting-started/installation/#nixos-nix","title":"NixOS / Nix","text":""},{"location":"getting-started/installation/#quick-install","title":"Quick install","text":"<pre><code># Try without installing\nnix run github:Stewart86/hamr -- --help\n\n# Install to your profile\nnix profile install github:Stewart86/hamr\n</code></pre>"},{"location":"getting-started/installation/#nixos-home-manager","title":"NixOS / Home Manager","text":"<p>Add the flake input to your configuration:</p> <pre><code>{\n  inputs = {\n    nixpkgs.url = \"github:NixOS/nixpkgs/nixos-unstable\";\n    hamr.url = \"github:Stewart86/hamr\";\n  };\n\n  outputs = { self, nixpkgs, hamr, ... }: {\n    # NixOS\n    nixosConfigurations.myhost = nixpkgs.lib.nixosSystem {\n      modules = [{\n        nixpkgs.overlays = [ hamr.overlays.default ];\n        environment.systemPackages = [ pkgs.hamr ];\n      }];\n    };\n\n    # Or Home Manager\n    homeConfigurations.myuser = home-manager.lib.homeManagerConfiguration {\n      modules = [{\n        nixpkgs.overlays = [ hamr.overlays.default ];\n        home.packages = [ pkgs.hamr ];\n      }];\n    };\n  };\n}\n</code></pre>"},{"location":"getting-started/installation/#quick-install-all-distributions","title":"Quick Install (All Distributions)","text":"<pre><code>curl -fsSL https://hamr.run/install.sh | bash\n</code></pre> <p>The install script will:</p> <ul> <li>Detect your distribution and install required dependencies (GTK4, gtk4-layer-shell)</li> <li>Download the latest release binaries</li> <li>Install to <code>~/.local/bin/</code></li> <li>Copy essential plugins to <code>~/.local/share/hamr/plugins/</code></li> <li>Create default configuration</li> <li>Show compositor-specific setup instructions</li> </ul> <p>Installer Flags:</p> Flag Description <code>--check</code> Dry-run mode: show what would be installed without making changes <code>--yes</code> Assume yes for all prompts (non-interactive mode) <code>--reset-user-data</code> Reset user configuration and plugins (backup created)"},{"location":"getting-started/installation/#manual-dependencies","title":"Manual Dependencies","text":"<p>Arch Linux: <pre><code>sudo pacman -S gtk4 gtk4-layer-shell python\n</code></pre></p> <p>Fedora: <pre><code>sudo dnf install gtk4-devel gtk4-layer-shell-devel python3\n</code></pre></p> <p>Ubuntu/Debian: <pre><code>sudo apt install libgtk-4-dev gtk4-layer-shell-dev python3\n</code></pre></p>"},{"location":"getting-started/installation/#layer-shell-package-names-by-distribution","title":"Layer-shell Package Names by Distribution","text":"Distribution Package Name Arch Linux <code>gtk4-layer-shell</code> Fedora <code>gtk4-layer-shell-devel</code> Ubuntu/Debian <code>gtk4-layer-shell-dev</code> openSUSE <code>gtk4-layer-shell-devel</code> Gentoo <code>gui-libs/gtk4-layer-shell</code>"},{"location":"getting-started/installation/#post-installation-setup","title":"Post-Installation Setup","text":"<p>After installing binaries (via any method), run the setup command:</p> <pre><code>hamr install --check  # Preview what will be set up\nhamr install          # Set up systemd services and directories\n</code></pre> <p>This creates:</p> <ul> <li>Systemd user services (<code>hamr-daemon.service</code>, <code>hamr-gtk.service</code>)</li> <li>Config directory (<code>~/.config/hamr/</code>)</li> <li>Essential plugins copied to user config</li> </ul> <p>Then start the launcher:</p> <pre><code># Option 1: Via systemd (recommended for auto-start on login)\nsystemctl --user start hamr-gtk\n\n# Option 2: Direct (works without systemd)\nhamr\n</code></pre> <p>Without systemd: Running <code>hamr</code> will auto-start the daemon as a background process. No additional setup needed.</p> <p>For full CLI documentation, see CLI Reference.</p>"},{"location":"getting-started/installation/#keybinding","title":"Keybinding","text":"<p>Bind <code>hamr toggle</code> to a key in your compositor config.</p>"},{"location":"getting-started/installation/#hyprland","title":"Hyprland","text":"<pre><code>exec-once = hamr\nbind = $mainMod, SPACE, exec, hamr toggle\nbind = $mainMod, V, exec, hamr plugin clipboard\n</code></pre>"},{"location":"getting-started/installation/#niri","title":"Niri","text":"<pre><code>// ~/.config/niri/config.kdl\nspawn-at-startup \"hamr\"\n\nbinds {\n    Mod+Space { spawn \"hamr\" \"toggle\"; }\n    Mod+V { spawn \"hamr\" \"plugin\" \"clipboard\"; }\n}\n</code></pre>"},{"location":"getting-started/installation/#verify-installation","title":"Verify Installation","text":"<p>Check if Hamr daemon is running:</p> <pre><code>hamr status\n</code></pre> <p>View logs:</p> <pre><code># Daemon logs (debug builds write to /tmp/hamr-daemon.log)\ntail -f /tmp/hamr-daemon.log\n\n# Or if using systemd\njournalctl --user -u hamr-daemon -f\n</code></pre> <p>For detailed logging configuration, including <code>RUST_LOG</code> and <code>HAMR_PLUGIN_DEBUG</code> environment variables, see the Logging Guide.</p> <p>If you encounter issues, see the Troubleshooting Guide for common problems and solutions.</p>"},{"location":"getting-started/installation/#updating","title":"Updating","text":"<p>Arch Linux (AUR):</p> <pre><code>paru -Syu hamr\n# or\nparu -Syu hamr-bin\n</code></pre> <p>Other distributions:</p> <pre><code># Re-run the installer to update\ncurl -fsSL https://hamr.run/install.sh | bash\n</code></pre>"},{"location":"getting-started/installation/#uninstall","title":"Uninstall","text":"<p>Arch Linux (AUR):</p> <pre><code>systemctl --user disable --now hamr-daemon\nparu -R hamr  # or hamr-bin\n</code></pre> <p>Other distributions:</p> <pre><code># Remove binaries and config\nrm -f ~/.local/bin/{hamr,hamr-cli,hamr-daemon,hamr-gtk,hamr-tui}\nrm -rf ~/.local/share/hamr\nrm -rf ~/.config/hamr\n\n# Disable systemd service if enabled\nsystemctl --user disable --now hamr-daemon 2&gt;/dev/null || true\n</code></pre>"},{"location":"getting-started/logging/","title":"Logging","text":"<p>This guide explains where Hamr logs are stored, how to adjust verbosity, and privacy considerations.</p>"},{"location":"getting-started/logging/#log-file-locations","title":"Log File Locations","text":"<p>Hamr components write logs to <code>/tmp/</code> with timestamped filenames:</p> Component Log File Pattern Symlink (Latest) Daemon <code>/tmp/hamr-daemon-YYYYMMDD_HHMMSS.log</code> <code>/tmp/hamr-daemon.log</code> TUI <code>/tmp/hamr-tui-YYYYMMDD_HHMMSS.log</code> <code>/tmp/hamr-tui.log</code> <p>The symlinks always point to the most recent log file for easy access.</p>"},{"location":"getting-started/logging/#debug-vs-release-builds","title":"Debug vs Release Builds","text":"Build Type Default Level Output Location Debug <code>debug</code> (verbose) Timestamped files in <code>/tmp/</code> Release <code>info</code> stderr only <p>Debug builds include file/line numbers in log output for easier debugging.</p>"},{"location":"getting-started/logging/#environment-variables","title":"Environment Variables","text":""},{"location":"getting-started/logging/#rust_log","title":"RUST_LOG","text":"<p>Controls Rust component logging verbosity using the standard tracing crate:</p> <pre><code># Most verbose - all trace messages\nRUST_LOG=trace hamr daemon\n\n# Debug level - detailed diagnostic info\nRUST_LOG=debug hamr daemon\n\n# Info level (default for release)\nRUST_LOG=info hamr daemon\n\n# Warnings and errors only\nRUST_LOG=warn hamr daemon\n\n# Errors only\nRUST_LOG=error hamr daemon\n</code></pre> <p>Filter to specific crates:</p> <pre><code># Debug only for hamr crates (reduces noise from dependencies)\nRUST_LOG=hamr=debug hamr daemon\n\n# Combine filters\nRUST_LOG=hamr=debug,tokio=warn hamr daemon\n</code></pre>"},{"location":"getting-started/logging/#hamr_plugin_debug","title":"HAMR_PLUGIN_DEBUG","text":"<p>Enables verbose debug output in the Python plugin SDK:</p> <pre><code># Enable plugin SDK debug logging\nHAMR_PLUGIN_DEBUG=1 hamr daemon\n</code></pre> <p>When enabled, plugins using the SDK will output additional diagnostic information including: - Incoming JSON-RPC requests - Outgoing responses - Internal state transitions</p> <p>Accepted values: <code>1</code>, <code>true</code>, <code>yes</code> (case-insensitive)</p>"},{"location":"getting-started/logging/#reading-logs","title":"Reading Logs","text":""},{"location":"getting-started/logging/#follow-logs-in-real-time","title":"Follow logs in real-time","text":"<pre><code># Daemon logs\ntail -f /tmp/hamr-daemon.log\n\n# TUI logs (in separate terminal)\ntail -f /tmp/hamr-tui.log\n\n# Both simultaneously\ntail -f /tmp/hamr-daemon.log /tmp/hamr-tui.log\n</code></pre>"},{"location":"getting-started/logging/#search-for-specific-patterns","title":"Search for specific patterns","text":"<pre><code># Find errors and warnings\ngrep -i \"error\\|warn\" /tmp/hamr-daemon.log\n\n# Plugin-related messages\ngrep \"plugin\" /tmp/hamr-daemon.log | tail -30\n\n# Action handling\ngrep \"handle_action\\|Forwarding\" /tmp/hamr-daemon.log\n\n# Form/settings changes\ngrep -i \"form\\|slider\\|switch\" /tmp/hamr-daemon.log\n</code></pre>"},{"location":"getting-started/logging/#view-historical-logs","title":"View historical logs","text":"<pre><code># List recent daemon logs (newest first)\nls -lt /tmp/hamr-daemon-*.log | head -5\n\n# List recent TUI logs\nls -lt /tmp/hamr-tui-*.log | head -5\n</code></pre>"},{"location":"getting-started/logging/#common-debugging-scenarios","title":"Common Debugging Scenarios","text":""},{"location":"getting-started/logging/#plugin-not-responding","title":"Plugin not responding","text":"<pre><code># Check if plugin is connected\ngrep \"plugin\" /tmp/hamr-daemon.log | tail -20\n\n# Look for action forwarding\ngrep \"handle_item_selected\\|Forwarding action\" /tmp/hamr-daemon.log\n</code></pre>"},{"location":"getting-started/logging/#json-deserialization-errors","title":"JSON deserialization errors","text":"<pre><code># TUI logs show parsing failures\ngrep -i \"deserialization\\|error\" /tmp/hamr-tui.log\n</code></pre>"},{"location":"getting-started/logging/#configuration-issues","title":"Configuration issues","text":"<pre><code># Search for config-related messages\ngrep -i \"config\" /tmp/hamr-daemon.log\n</code></pre>"},{"location":"getting-started/logging/#privacy-statement","title":"Privacy Statement","text":"<p>No telemetry: Hamr does not send any data to external servers. All logging is local to your machine.</p>"},{"location":"getting-started/logging/#what-logs-contain","title":"What logs contain","text":"<p>Logs may include: - Search queries you type - Plugin IDs and names - File paths on your system - Application names from your index - Error messages and stack traces</p>"},{"location":"getting-started/logging/#before-sharing-logs","title":"Before sharing logs","text":"<p>When reporting issues or sharing logs publicly:</p> <ol> <li>Review log content for sensitive information</li> <li>Redact personal file paths (e.g., <code>/home/username/</code> -&gt; <code>/home/&lt;user&gt;/</code>)</li> <li>Remove any queries that reveal private information</li> <li>Consider using only relevant excerpts rather than full logs</li> </ol> <p>Example redaction:</p> <pre><code># Create redacted log excerpt\ntail -200 /tmp/hamr-daemon.log | \\\n  sed \"s|/home/$USER|/home/&lt;user&gt;|g\" &gt; hamr-debug-redacted.log\n</code></pre>"},{"location":"getting-started/logging/#log-retention","title":"Log Retention","text":""},{"location":"getting-started/logging/#tmpfs-behavior","title":"tmpfs behavior","text":"<p>Logs in <code>/tmp/</code> are typically stored on a tmpfs (RAM disk) on most Linux distributions:</p> <ul> <li>Logs are cleared on reboot</li> <li>Fast write performance</li> <li>No disk wear</li> </ul>"},{"location":"getting-started/logging/#archiving-logs","title":"Archiving logs","text":"<p>To preserve logs across reboots:</p> <pre><code># Archive current session\ncp /tmp/hamr-daemon.log ~/hamr-logs/daemon-$(date +%Y%m%d).log\n\n# Archive with compression\ngzip -c /tmp/hamr-daemon.log &gt; ~/hamr-logs/daemon-$(date +%Y%m%d).log.gz\n</code></pre>"},{"location":"getting-started/logging/#cleaning-old-logs","title":"Cleaning old logs","text":"<p>Timestamped logs accumulate during long sessions:</p> <pre><code># Remove logs older than 7 days\nfind /tmp -name \"hamr-*.log\" -mtime +7 -delete\n\n# Keep only the 5 most recent of each type\nls -t /tmp/hamr-daemon-*.log | tail -n +6 | xargs rm -f\nls -t /tmp/hamr-tui-*.log | tail -n +6 | xargs rm -f\n</code></pre>"},{"location":"getting-started/logging/#see-also","title":"See Also","text":"<ul> <li>Troubleshooting - Common issues and solutions</li> <li>Configuration - Hamr settings reference</li> <li>Plugin SDK - Plugin development with debug options</li> </ul>"},{"location":"getting-started/theming/","title":"Theming Hamr","text":"<p>Hamr uses Material Design 3 colors for its UI. This guide explains how to set up dynamic theming so Hamr's colors update automatically when you change your wallpaper.</p>"},{"location":"getting-started/theming/#matugen-recommended","title":"Matugen (Recommended)","text":"<p>Matugen generates Material You colors from images.</p>"},{"location":"getting-started/theming/#quick-setup","title":"Quick Setup","text":"<ol> <li> <p>Install matugen:</p> ArchGentooOther <pre><code>paru -S matugen\n</code></pre> <pre><code>sudo emerge x11-misc/matugen\n</code></pre> <p>See matugen releases for binaries or build from source.</p> </li> <li> <p>Download the template:</p> <pre><code>mkdir -p ~/.config/matugen/templates\ncurl -o ~/.config/matugen/templates/hamr-colors.json \\\n  https://raw.githubusercontent.com/stewart86/hamr/main/docs/templates/matugen-colors.json\n</code></pre> </li> <li> <p>Add to your matugen config (<code>~/.config/matugen/config.toml</code>):</p> <pre><code>[templates.hamr_colors]\ninput_path = '~/.config/matugen/templates/hamr-colors.json'\noutput_path = '~/.config/hamr/colors.json'\n</code></pre> </li> <li> <p>Generate colors: <pre><code>matugen image /path/to/wallpaper.jpg\n</code></pre></p> </li> </ol> <p>Hamr will automatically pick up the new colors.</p>"},{"location":"getting-started/theming/#using-hamrs-wallpaper-plugin","title":"Using Hamr's Wallpaper Plugin","text":"<p>The easiest way: use Hamr's built-in wallpaper plugin (<code>/wallpaper</code>). It calls matugen automatically when you select a wallpaper, so colors sync without any manual steps.</p>"},{"location":"getting-started/theming/#pywal-wallust","title":"Pywal / Wallust","text":"<p>For pywal or wallust users, a template is provided that maps terminal colors to Material Design tokens.</p> <ol> <li>Download the template:</li> </ol> <pre><code># For pywal\nmkdir -p ~/.config/wal/templates\ncurl -o ~/.config/wal/templates/hamr-colors.json \\\n  https://raw.githubusercontent.com/stewart86/hamr/main/docs/templates/pywal-colors.json\n\n# For wallust\nmkdir -p ~/.config/wallust/templates\ncurl -o ~/.config/wallust/templates/hamr-colors.json \\\n  https://raw.githubusercontent.com/stewart86/hamr/main/docs/templates/pywal-colors.json\n</code></pre> <ol> <li>Configure output path:</li> </ol> <p>For pywal, colors are generated to <code>~/.cache/wal/</code>. Point Hamr to this file in <code>~/.config/hamr/config.json</code>:</p> <pre><code>{\n  \"paths\": {\n    \"colorsJson\": \"~/.cache/wal/hamr-colors.json\"\n  }\n}\n</code></pre> <p>For wallust, configure the output in <code>~/.config/wallust/wallust.toml</code>:</p> <pre><code>[[entry]]\ntemplate = \"hamr-colors.json\"\ntarget = \"~/.config/hamr/colors.json\"\n</code></pre> <ol> <li>Generate colors: <pre><code>wal -i /path/to/wallpaper.jpg\n# or\nwallust run /path/to/wallpaper.jpg\n</code></pre></li> </ol>"},{"location":"getting-started/theming/#integration-with-other-tools","title":"Integration with Other Tools","text":""},{"location":"getting-started/theming/#dankmaterialshell-dms","title":"DankMaterialShell (DMS)","text":"<p>If you use DankMaterialShell with matugen for wallpaper-based theming, simply add the Hamr template to your existing matugen config. When DMS triggers matugen on wallpaper change, Hamr will receive updated colors from the same run.</p>"},{"location":"getting-started/theming/#other-shells-ags-eww-etc","title":"Other Shells (AGS, EWW, etc.)","text":"<p>The same approach works for any tool that uses matugen. Add the Hamr template to your config and all tools will receive colors from the same matugen invocation.</p>"},{"location":"getting-started/theming/#manual-colorsjson","title":"Manual colors.json","text":"<p>If you prefer not to use a color generator, create <code>~/.config/hamr/colors.json</code> manually. The file must use a flat format with underscore-separated keys:</p> <pre><code>{\n  \"background\": \"#141313\",\n  \"on_background\": \"#e6e1e1\",\n  \"surface\": \"#141313\",\n  \"primary\": \"#cbc4cb\",\n  \"on_primary\": \"#322f34\",\n  \"secondary\": \"#cac5c8\",\n  \"on_secondary\": \"#323032\",\n  \"tertiary\": \"#d1c3c6\",\n  \"on_tertiary\": \"#372e30\",\n  \"error\": \"#ffb4ab\",\n  \"on_error\": \"#690005\",\n  \"outline\": \"#948f94\",\n  \"surface_container\": \"#201f20\",\n  \"surface_container_high\": \"#2b2a2a\"\n}\n</code></pre> <p>Note: Material Theme Builder exports a nested format (<code>schemes.dark.primary</code>) which Hamr cannot read directly. Use matugen or manually flatten the structure.</p>"},{"location":"getting-started/theming/#custom-colorsjson-path","title":"Custom colors.json Path","text":"<p>By default, Hamr reads from <code>~/.config/hamr/colors.json</code>. To use a different path:</p> <pre><code>{\n  \"paths\": {\n    \"colorsJson\": \"~/.local/state/quickshell/user/generated/colors.json\"\n  }\n}\n</code></pre>"},{"location":"getting-started/theming/#troubleshooting","title":"Troubleshooting","text":"<p>Colors not updating?</p> <ul> <li>Check that the colors.json file exists at the expected path</li> <li>Verify the JSON is valid (use <code>jq . ~/.config/hamr/colors.json</code>)</li> <li>Hamr watches the file for changes; updates should apply within seconds</li> </ul> <p>Warning: \"Read of colors.json failed\"</p> <ul> <li>This is harmless. Hamr uses built-in dark theme defaults when no colors.json exists.</li> </ul>"},{"location":"getting-started/troubleshooting/","title":"Troubleshooting","text":"<p>This guide covers common issues and their solutions.</p>"},{"location":"getting-started/troubleshooting/#quick-diagnosis","title":"Quick Diagnosis","text":"Symptom Cause Solution Launcher doesn't appear Daemon not running Run <code>hamr</code> (auto-starts daemon) or check <code>systemctl --user status hamr-daemon</code> \"Connection refused\" error Socket not created Ensure daemon is running: <code>pgrep hamr-daemon</code> or restart with <code>hamr</code> Window appears but immediately closes Compositor lacks layer-shell support Verify compositor supports layer-shell (see Compositor Support) No search results Index not built Run <code>hamr index</code> to rebuild the application index Plugin not responding Plugin crashed or timeout Check logs: <code>grep \"plugin\" /tmp/hamr-daemon.log \\| tail -20</code> Slow startup Large plugin index Review <code>~/.local/share/hamr/index/</code> size; consider disabling unused plugins Keybinding doesn't work Compositor config issue Verify binding syntax in compositor config; test with <code>hamr toggle</code> manually GTK theme not applied GTK4 theme missing Install a GTK4-compatible theme; Hamr uses GTK4, not GTK3"},{"location":"getting-started/troubleshooting/#daemon-issues","title":"Daemon Issues","text":""},{"location":"getting-started/troubleshooting/#daemon-wont-start","title":"Daemon won't start","text":"<ol> <li> <p>Check if another instance is running:    <pre><code>pgrep -a hamr-daemon\n</code></pre></p> </li> <li> <p>Check for socket conflicts:    <pre><code>ls -la /tmp/hamr-*.sock\n# Remove stale socket if daemon isn't running\nrm /tmp/hamr-*.sock\n</code></pre></p> </li> <li> <p>Check logs for errors:    <pre><code>tail -50 /tmp/hamr-daemon.log\n</code></pre></p> </li> </ol>"},{"location":"getting-started/troubleshooting/#daemon-crashes-on-startup","title":"Daemon crashes on startup","text":"<p>Common causes:</p> <ul> <li>Missing GTK4: Install GTK4 4.20+ and gtk4-layer-shell</li> <li>Missing plugins directory: Run <code>hamr install</code> to set up directories</li> <li>Corrupt config: Move <code>~/.config/hamr/config.json</code> and restart</li> </ul>"},{"location":"getting-started/troubleshooting/#plugin-issues","title":"Plugin Issues","text":""},{"location":"getting-started/troubleshooting/#plugin-not-found","title":"Plugin not found","text":"<ol> <li> <p>Verify plugin exists:    <pre><code>ls ~/.local/share/hamr/plugins/\n</code></pre></p> </li> <li> <p>Check plugin manifest is valid JSON:    <pre><code>cat ~/.local/share/hamr/plugins/&lt;plugin&gt;/manifest.json | python -m json.tool\n</code></pre></p> </li> <li> <p>Ensure plugin has execute permission:    <pre><code>chmod +x ~/.local/share/hamr/plugins/&lt;plugin&gt;/main.py\n</code></pre></p> </li> </ol>"},{"location":"getting-started/troubleshooting/#plugin-returns-no-results","title":"Plugin returns no results","text":"<ol> <li> <p>Test plugin directly:    <pre><code>hamr test &lt;plugin&gt; \"your query\"\n</code></pre></p> </li> <li> <p>Check plugin logs:    <pre><code>grep \"&lt;plugin&gt;\" /tmp/hamr-daemon.log | tail -30\n</code></pre></p> </li> <li> <p>Enable plugin debug mode:    <pre><code>HAMR_PLUGIN_DEBUG=1 hamr daemon\n</code></pre></p> </li> </ol>"},{"location":"getting-started/troubleshooting/#plugin-timeout","title":"Plugin timeout","text":"<p>Plugins have a default timeout. If a plugin is slow:</p> <ol> <li>Check if external service is reachable (for network plugins)</li> <li>Review plugin code for blocking operations</li> <li>Consider increasing timeout in plugin manifest</li> </ol>"},{"location":"getting-started/troubleshooting/#display-issues","title":"Display Issues","text":""},{"location":"getting-started/troubleshooting/#window-appears-in-wrong-position","title":"Window appears in wrong position","text":"<p>Layer-shell positioning depends on compositor support:</p> <ol> <li>Ensure gtk4-layer-shell is installed</li> <li>Check compositor-specific settings for layer positioning</li> <li>Try different anchor settings in config</li> </ol>"},{"location":"getting-started/troubleshooting/#window-doesnt-receive-keyboard-focus","title":"Window doesn't receive keyboard focus","text":"<ol> <li> <p>Verify layer-shell is working:    <pre><code># Should show layer-shell in use\ngrep -i \"layer\" /tmp/hamr-daemon.log\n</code></pre></p> </li> <li> <p>Some compositors require explicit focus rules for layer surfaces</p> </li> </ol>"},{"location":"getting-started/troubleshooting/#blurry-or-scaled-incorrectly","title":"Blurry or scaled incorrectly","text":"<p>GTK4 respects <code>GDK_SCALE</code> environment variable:</p> <pre><code># Force 1x scaling\nGDK_SCALE=1 hamr-gtk\n\n# Force 2x scaling\nGDK_SCALE=2 hamr-gtk\n</code></pre>"},{"location":"getting-started/troubleshooting/#performance-issues","title":"Performance Issues","text":""},{"location":"getting-started/troubleshooting/#slow-search-results","title":"Slow search results","text":"<ol> <li> <p>Check index size:    <pre><code>du -sh ~/.local/share/hamr/index/\n</code></pre></p> </li> <li> <p>Rebuild index:    <pre><code>hamr index --rebuild\n</code></pre></p> </li> <li> <p>Disable plugins you don't use in config</p> </li> </ol>"},{"location":"getting-started/troubleshooting/#high-memory-usage","title":"High memory usage","text":"<ol> <li> <p>Check plugin count:    <pre><code>ls ~/.local/share/hamr/plugins/ | wc -l\n</code></pre></p> </li> <li> <p>Disable daemon plugins that aren't needed</p> </li> <li>Check for plugin memory leaks in logs</li> </ol>"},{"location":"getting-started/troubleshooting/#log-files","title":"Log Files","text":"<p>Debug builds write logs to <code>/tmp/</code>:</p> Component Log Path Symlink Daemon <code>/tmp/hamr-daemon-YYYYMMDD_HHMMSS.log</code> <code>/tmp/hamr-daemon.log</code> TUI <code>/tmp/hamr-tui-YYYYMMDD_HHMMSS.log</code> <code>/tmp/hamr-tui.log</code>"},{"location":"getting-started/troubleshooting/#enable-verbose-logging","title":"Enable verbose logging","text":"<pre><code># Most verbose\nRUST_LOG=trace hamr daemon\n\n# Debug for hamr crates only\nRUST_LOG=hamr=debug hamr daemon\n\n# Warnings and errors only\nRUST_LOG=warn hamr daemon\n</code></pre>"},{"location":"getting-started/troubleshooting/#search-logs-for-errors","title":"Search logs for errors","text":"<pre><code># Find all errors\ngrep -i \"error\\|warn\" /tmp/hamr-daemon.log\n\n# Plugin-specific issues\ngrep \"plugin\" /tmp/hamr-daemon.log | tail -20\n\n# Action handling\ngrep \"handle_action\\|Forwarding\" /tmp/hamr-daemon.log\n</code></pre>"},{"location":"getting-started/troubleshooting/#getting-help","title":"Getting Help","text":"<p>If these steps don't resolve your issue:</p> <ol> <li>Check existing GitHub Issues</li> <li>Collect logs: <code>tail -200 /tmp/hamr-daemon.log &gt; hamr-debug.log</code></li> <li>Open a new issue with:</li> <li>Hamr version (<code>hamr --version</code>)</li> <li>Compositor and version</li> <li>Distribution</li> <li>Relevant log output</li> </ol>"},{"location":"plugins/","title":"Building Hamr Plugins","text":"<p>This guide will help you build your first Hamr plugin. Start here, then explore the detailed documentation as needed.</p>"},{"location":"plugins/#what-youll-build","title":"What You'll Build","text":"<p>Hamr plugins extend the launcher with custom functionality. When you're done with this guide, you'll have created a working plugin that:</p> <ul> <li>Shows a list of items when opened</li> <li>Filters items as you type</li> <li>Executes an action when you select an item</li> </ul> <p></p>"},{"location":"plugins/#quick-start-your-first-plugin","title":"Quick Start: Your First Plugin","text":"<p>Let's build a \"Hello World\" plugin in under 5 minutes.</p>"},{"location":"plugins/#step-1-create-the-plugin-directory","title":"Step 1: Create the Plugin Directory","text":"<p>Hamr loads plugins from two locations:</p> <ol> <li>Built-in plugins: <code>~/.local/share/hamr/plugins/</code> (installed with Hamr)</li> <li>User plugins: <code>~/.config/hamr/plugins/</code> (your custom plugins)</li> </ol> <p>Create your plugin in the user directory:</p> <pre><code>mkdir -p ~/.config/hamr/plugins/hello\n</code></pre>"},{"location":"plugins/#step-2-create-the-manifest","title":"Step 2: Create the Manifest","text":"<p>The manifest tells Hamr about your plugin. Important: You must specify <code>supportedPlatforms</code> or your plugin won't appear.</p> <pre><code>cat &gt; ~/.config/hamr/plugins/hello/manifest.json &lt;&lt; 'EOF'\n{\n  \"name\": \"Hello\",\n  \"description\": \"My first Hamr plugin\",\n  \"icon\": \"waving_hand\",\n  \"supportedPlatforms\": [\"niri\", \"hyprland\"]\n}\nEOF\n</code></pre> <p>Note: <code>supportedPlatforms</code> defines which platforms/compositors your plugin works with:</p> <ul> <li><code>[\"niri\", \"hyprland\"]</code> - Linux Wayland compositors</li> <li><code>[\"hyprland\"]</code> - Hyprland only (if you use <code>hyprctl</code>)</li> <li><code>[\"niri\"]</code> - Niri only (if you use <code>niri msg</code>)</li> <li><code>[\"macos\"]</code> - macOS</li> <li><code>[\"windows\"]</code> - Windows</li> </ul> <p>List all platforms your plugin supports explicitly. There is no wildcard.</p> <p>Note: For stdio plugins, Hamr always runs <code>handler.py</code> in the plugin directory, so the <code>handler</code> field is optional. Use <code>handler.command</code> only for socket/daemon plugins.</p>"},{"location":"plugins/#step-3-create-the-handler","title":"Step 3: Create the Handler","text":"<p>The handler is your plugin's logic. Create <code>~/.config/hamr/plugins/hello/handler.py</code>:</p> <pre><code>#!/usr/bin/env python3\n\"\"\"\nHamr Plugin Handler Template\n\nHamr communicates with plugins via JSON over stdin/stdout:\n1. Hamr spawns your handler as a subprocess\n2. Hamr writes a JSON request to your handler's stdin\n3. Your handler reads the request, processes it, and prints a JSON response to stdout\n4. Hamr reads the response and updates the UI\n\nThis stateless request-response model means each invocation is independent.\nUse the `context` field to persist state across calls if needed.\n\"\"\"\nimport json\nimport sys\n\n\ndef main():\n    # Read the JSON request from stdin\n    # Hamr sends the entire request as a single JSON object\n    input_data = json.load(sys.stdin)\n\n    # Extract common fields from the request\n    step = input_data.get(\"step\", \"initial\")      # What triggered this call\n    query = input_data.get(\"query\", \"\").strip()   # Search bar text (for search step)\n    selected = input_data.get(\"selected\", {})     # Selected item info (for action step)\n\n    # Define our items (in a real plugin, this might come from a file or API)\n    items = [\n        {\"id\": \"hello\", \"name\": \"Say Hello\", \"icon\": \"waving_hand\", \"description\": \"Show a greeting\"},\n        {\"id\": \"goodbye\", \"name\": \"Say Goodbye\", \"icon\": \"door_open\", \"description\": \"Show a farewell\"},\n    ]\n\n    # STEP: initial - Plugin just opened, show the initial view\n    if step == \"initial\":\n        print(json.dumps({\n            \"type\": \"results\",\n            \"results\": items,\n            \"placeholder\": \"Search greetings...\"\n        }))\n        return\n\n    # STEP: search - User is typing, filter results\n    if step == \"search\":\n        query_lower = query.lower()\n        filtered = [i for i in items if query_lower in i[\"name\"].lower()]\n        print(json.dumps({\n            \"type\": \"results\",\n            \"results\": filtered\n        }))\n        return\n\n    # STEP: action - User selected an item or clicked an action button\n    if step == \"action\":\n        item_id = selected.get(\"id\", \"\")\n        message = \"Hello, World!\" if item_id == \"hello\" else \"Goodbye!\"\n\n        # Return an execute response to perform an action\n        print(json.dumps({\n            \"type\": \"execute\",\n            \"notify\": message,  # Show a notification\n            \"close\": True       # Close the launcher\n        }))\n\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>"},{"location":"plugins/#step-4-make-it-executable","title":"Step 4: Make it Executable","text":"<pre><code>chmod +x ~/.config/hamr/plugins/hello/handler.py\n</code></pre>"},{"location":"plugins/#step-5-test-your-plugin","title":"Step 5: Test Your Plugin","text":"<p>Open Hamr and search for \"hello\" to see your plugin in action.</p> <p>Tip: If your plugin doesn't appear, check:</p> <ol> <li><code>supportedPlatforms</code> is set in manifest.json</li> <li>The handler is executable (<code>chmod +x</code>)</li> <li>Check logs: <code>journalctl --user -u hamr -f</code></li> </ol>"},{"location":"plugins/#how-plugins-work","title":"How Plugins Work","text":""},{"location":"plugins/#communication-model","title":"Communication Model","text":"<p>Plugins communicate with Hamr via JSON over stdin/stdout:</p> <pre><code>sequenceDiagram\n    participant Hamr\n    participant Handler as Your Handler\n\n    Hamr-&gt;&gt;Handler: Spawn process\n    Hamr-&gt;&gt;Handler: Write JSON request to stdin\n    Handler-&gt;&gt;Handler: Process request\n    Handler-&gt;&gt;Hamr: Print JSON response to stdout\n    Hamr-&gt;&gt;Hamr: Update UI\n    Handler-&gt;&gt;Handler: Exit</code></pre> <ol> <li>Hamr spawns your handler as a subprocess</li> <li>Hamr writes a JSON request to your handler's stdin</li> <li>Your handler processes the request</li> <li>Your handler prints a JSON response to stdout</li> <li>Hamr reads the response and updates the UI</li> <li>The handler process exits</li> </ol>"},{"location":"plugins/#the-request-response-cycle","title":"The Request-Response Cycle","text":"<p>Every request includes a <code>step</code> field telling you what happened:</p> Step When User Action <code>initial</code> Plugin opens User selected the plugin <code>search</code> User types Each keystroke (realtime) or Enter (submit) <code>action</code> User selects Clicked item or pressed Enter"},{"location":"plugins/#plugin-discovery","title":"Plugin Discovery","text":"<p>Hamr scans these directories for plugins on startup:</p> <pre><code>flowchart LR\n    A[Hamr Starts] --&gt; B{Scan Directories}\n    B --&gt; C[~/.local/share/hamr/plugins/]\n    B --&gt; D[~/.config/hamr/plugins/]\n    C --&gt; E{Valid manifest.json?}\n    D --&gt; E\n    E --&gt;|Yes| F{supportedPlatforms&lt;br/&gt;matches current?}\n    E --&gt;|No| G[Skip]\n    F --&gt;|Yes| H[Load Plugin]\n    F --&gt;|No| G</code></pre> <p>Key points:</p> <ul> <li>Each plugin must have a <code>manifest.json</code></li> <li><code>supportedPlatforms</code> must include the current platform</li> <li>Handler must be executable with a valid shebang</li> </ul>"},{"location":"plugins/#directory-structure","title":"Directory Structure","text":"<pre><code>~/.config/hamr/plugins/\n\u251c\u2500\u2500 my-plugin/\n\u2502   \u251c\u2500\u2500 manifest.json    # Plugin metadata (required)\n\u2502   \u2514\u2500\u2500 handler.py       # Plugin logic (required)\n</code></pre>"},{"location":"plugins/#core-concepts","title":"Core Concepts","text":""},{"location":"plugins/#the-manifest-file","title":"The Manifest File","text":"<p>Every plugin needs a <code>manifest.json</code>:</p> <pre><code>{\n  \"name\": \"My Plugin\",\n  \"description\": \"What it does\",\n  \"icon\": \"star\",\n  \"supportedPlatforms\": [\"niri\", \"hyprland\"]\n}\n</code></pre> Field Required Description <code>name</code> Yes Display name <code>description</code> Yes Short description <code>icon</code> Yes Material icon name <code>supportedPlatforms</code> Yes <code>[\"niri\", \"hyprland\"]</code>, <code>[\"macos\"]</code>, etc. (list all explicitly) <code>handler</code> No Handler config. Stdio plugins run <code>handler.py</code> by default; socket plugins use <code>handler.command</code>. <code>frecency</code> No <code>\"item\"</code>, <code>\"plugin\"</code>, or <code>\"none\"</code> (default: <code>\"item\"</code>)"},{"location":"plugins/#input-what-you-receive","title":"Input (What You Receive)","text":"<pre><code>{\n    \"step\": \"initial|search|action\",    # What happened\n    \"query\": \"user input\",               # Search bar text (search step)\n    \"selected\": {\"id\": \"item-id\"},       # Selected item (action step)\n    \"action\": \"button-id\",               # Action button ID (action step, optional)\n    \"context\": \"your-state\",             # Your custom state (persisted)\n    \"session\": \"session-id\"              # Unique session identifier\n}\n</code></pre> <p>The <code>action</code> field tells you which action button was clicked:</p> <ul> <li>Not set: User clicked the item itself (default action)</li> <li>Set: User clicked a specific action button (e.g., <code>\"copy\"</code>, <code>\"delete\"</code>)</li> </ul>"},{"location":"plugins/#output-what-you-return","title":"Output (What You Return)","text":"<p>Return one JSON object. The <code>type</code> field determines what Hamr does:</p> Type Purpose Example <code>results</code> Show a list Search results, menu items <code>execute</code> Run an action Open file, copy text, close launcher <code>card</code> Show rich content Markdown text, definitions <code>error</code> Show error Something went wrong <p>See Response Types for complete documentation.</p>"},{"location":"plugins/#multi-step-flows-optional","title":"Multi-step Flows (Optional)","text":"<p>For drill-down workflows (edit screens, pickers), store state in <code>context</code> and control the stack with <code>navigateForward</code> and <code>navigateBack</code>. Handle <code>selected.id == \"__back__\"</code> to return to the previous view. See Response Types for examples.</p>"},{"location":"plugins/#language-support","title":"Language Support","text":"<p>Plugins can be written in any language. The handler just needs to:</p> <ol> <li> <p>Be executable (<code>chmod +x</code>)</p> </li> <li> <p>Have a shebang (<code>#!/usr/bin/env python3</code>)</p> </li> <li> <p>Read JSON from stdin</p> </li> <li> <p>Write JSON to stdout</p> </li> </ol> Language Use Case Python Recommended for most plugins Bash Simple scripts, system commands Go/Rust Performance-critical plugins Node.js Web API integrations"},{"location":"plugins/#python-recommended","title":"Python (Recommended)","text":"<pre><code>#!/usr/bin/env python3\nimport json\nimport sys\n\ndef main():\n    # Read JSON request from stdin (Hamr sends it all at once)\n    input_data = json.load(sys.stdin)\n\n    # Process and respond\n    print(json.dumps({\"type\": \"results\", \"results\": [...]}))\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>"},{"location":"plugins/#bash","title":"Bash","text":"<pre><code>#!/bin/bash\nINPUT=$(cat)\nSTEP=$(echo \"$INPUT\" | jq -r '.step // \"initial\"')\n\ncase \"$STEP\" in\n    initial)\n        echo '{\"type\": \"results\", \"results\": [{\"id\": \"1\", \"name\": \"Item\", \"icon\": \"star\"}]}'\n        ;;\nesac\n</code></pre>"},{"location":"plugins/#nodejs","title":"Node.js","text":"<pre><code>#!/usr/bin/env node\nconst fs = require(\"fs\");\nconst input = JSON.parse(fs.readFileSync(0, \"utf-8\"));\n\nif (input.step === \"initial\") {\n  console.log(\n    JSON.stringify({\n      type: \"results\",\n      results: [{ id: \"1\", name: \"Item\", icon: \"star\" }],\n    }),\n  );\n}\n</code></pre>"},{"location":"plugins/#next-steps","title":"Next Steps","text":"<p>Now that you understand the basics:</p> <ol> <li> <p>Response Types - Learn about all response types (<code>results</code>, <code>execute</code>, <code>card</code>, <code>form</code>, etc.)</p> </li> <li> <p>Visual Elements - Add sliders, switches, badges, gauges, and progress bars</p> </li> <li> <p>Advanced Features - Pattern matching, daemon mode, indexing, search ranking</p> </li> <li> <p>API Reference - Complete schema reference for all fields and types</p> </li> <li> <p>Cheat Sheet - Quick reference for common patterns</p> </li> </ol>"},{"location":"plugins/#built-in-plugin-examples","title":"Built-in Plugin Examples","text":"<p>Study these plugins to learn common patterns:</p> Plugin Features Good For Learning <code>calculate/</code> Pattern matching, instant results Main search integration <code>url/</code> Pattern matching, actions Simple match handler <code>timer/</code> Daemon, FAB override, ambient items, status Advanced daemon patterns <code>quicklinks/</code> CRUD, context, input modes State management <code>todo/</code> Daemon, file watching, status Real-time updates <code>clipboard/</code> Thumbnails, filters, actions Rich UI <code>bitwarden/</code> Forms, caching, entryPoint Complex workflows <code>sound/</code> Sliders, switches, updates Interactive controls <code>emoji/</code> Grid browser Large item sets"},{"location":"plugins/#development-mode","title":"Development Mode","text":"<p>For plugin development, run Hamr in dev mode:</p> <pre><code>cd ~/path/to/hamr\n./dev\n</code></pre> <p>Dev mode:</p> <ul> <li>Auto-reloads when plugin files change</li> <li>Shows logs directly in the terminal</li> <li>Displays errors in the UI</li> </ul> <p>See Testing Plugins for more details.</p>"},{"location":"plugins/#troubleshooting","title":"Troubleshooting","text":""},{"location":"plugins/#plugin-doesnt-appear-in-hamr","title":"Plugin doesn't appear in Hamr","text":"<ol> <li>Check <code>supportedPlatforms</code> - Must be set in manifest.json</li> </ol> <pre><code>\"supportedPlatforms\": [\"niri\", \"hyprland\"]\n</code></pre> <ol> <li>Check file permissions - Handler must be executable</li> </ol> <pre><code>chmod +x handler.py\n</code></pre> <ol> <li>Check for JSON errors - Validate your manifest</li> </ol> <pre><code>jq . manifest.json\n</code></pre> <ol> <li>Check logs - See what Hamr reports    <pre><code># In dev mode, logs appear in terminal\n# Otherwise:\njournalctl --user -u hamr -f\n</code></pre></li> </ol>"},{"location":"plugins/#plugin-shows-error","title":"Plugin shows error","text":"<ol> <li>Test manually - Run your handler directly</li> </ol> <pre><code>echo '{\"step\": \"initial\"}' | ./handler.py\n</code></pre> <ol> <li>Check JSON output - Must be valid JSON</li> </ol> <pre><code>echo '{\"step\": \"initial\"}' | ./handler.py | jq .\n</code></pre> <ol> <li>Check terminal/logs - Errors appear in dev terminal or journalctl</li> </ol>"},{"location":"plugins/#tips-for-success","title":"Tips for Success","text":"<ol> <li>Use dev mode - Run <code>./dev</code> for auto-reload and live logs</li> <li>Start simple - Get basic results working before adding features</li> <li>Test visually - Interact with your plugin; errors are shown in the UI</li> <li>Keep results under 50 - More items slow down the UI</li> <li>Use placeholder text - Helps users know what to type</li> <li>Handle empty states - Show helpful messages when no results match</li> <li>Desktop files - If you read <code>.desktop</code> files, note that XDG defaults can point to <code>NoDisplay=true</code> entries</li> </ol>"},{"location":"plugins/advanced-features/","title":"Advanced Features","text":"<p>This page covers pattern matching, daemon mode, plugin indexing, status badges, FAB override, and ambient items.</p>"},{"location":"plugins/advanced-features/#pattern-matching","title":"Pattern Matching","text":"<p>Show results instantly in main search without opening the plugin. When the user types something that matches your pattern, your handler receives a <code>match</code> step.</p>"},{"location":"plugins/advanced-features/#use-cases","title":"Use Cases","text":"<ul> <li>Calculator: <code>2+2</code>, <code>$50 to EUR</code>, <code>10c</code> (temperature)</li> <li>URL opener: <code>github.com</code>, <code>docs.python.org</code></li> <li>Unit converter: <code>10ft to m</code>, <code>5 miles in km</code></li> </ul>"},{"location":"plugins/advanced-features/#enable-in-manifest","title":"Enable in Manifest","text":"<pre><code>{\n  \"name\": \"Calculate\",\n  \"description\": \"Calculator with currency and units\",\n  \"icon\": \"calculate\",\n  \"supportedPlatforms\": [\"niri\", \"hyprland\", \"macos\", \"windows\"],\n  \"handler\": {\n    \"type\": \"stdio\",\n    \"path\": \"handler.py\"\n  },\n  \"match\": {\n    \"patterns\": [\"^=\", \"^[\\\\d\\\\.]+\\\\s*[\\\\+\\\\-\\\\*\\\\/]\", \"^[$\u20ac\u00a3\u00a5]\"],\n    \"priority\": 100\n  }\n}\n</code></pre> Field Type Description <code>patterns</code> array Regex patterns to match against user input <code>priority</code> number Higher priority wins when multiple plugins match (default: 50)"},{"location":"plugins/advanced-features/#handle-the-match-step","title":"Handle the <code>match</code> Step","text":"<p>When user input matches any pattern, your handler receives:</p> <pre><code>{\n    \"step\": \"match\",\n    \"query\": \"2+2\"\n}\n</code></pre> <p>Return a <code>match</code> response with a single result:</p> <pre><code>if step == \"match\":\n    result = calculate(query)\n\n    if result:\n        print(json.dumps({\n            \"type\": \"match\",\n            \"result\": {\n                \"id\": \"calc_result\",\n                \"name\": result,           # \"4\"\n                \"description\": query,     # \"2+2\"\n                \"icon\": \"calculate\",\n                \"verb\": \"Copy\",\n                \"copy\": result,           # Copy on Enter\n                \"notify\": f\"Copied: {result}\",\n                \"priority\": 100\n            }\n        }))\n    else:\n        # No valid result - return null to hide\n        print(json.dumps({\"type\": \"match\", \"result\": None}))\n    return\n</code></pre>"},{"location":"plugins/advanced-features/#match-response-fields","title":"Match Response Fields","text":"Field Type Description <code>id</code> string Unique identifier <code>name</code> string Primary display text (the result) <code>description</code> string Secondary text (the input) <code>icon</code> string Material icon name <code>verb</code> string Action button text (\"Copy\", \"Open\") <code>copy</code> string Text to copy on selection <code>openUrl</code> string URL to open on selection <code>notify</code> string Notification message after action <code>close</code> bool Close launcher after action <code>priority</code> number Ranking among match results <code>actions</code> array Additional action buttons"},{"location":"plugins/advanced-features/#pattern-examples","title":"Pattern Examples","text":"<p>Calculator (<code>plugins/calculate/manifest.json</code>):</p> <pre><code>{\n  \"match\": {\n    \"patterns\": [\n      \"^=\", // Explicit: \"=2+2\"\n      \"^[\\\\d\\\\.]+\\\\s*[\\\\+\\\\-\\\\*\\\\/\\\\^\\\\%]\", // Math: \"2+2\", \"10/5\"\n      \"^\\\\(\", // Parentheses: \"(2+3)*4\"\n      \"^(sin|cos|tan|sqrt|log)\\\\s*\\\\(\", // Functions: \"sqrt(16)\"\n      \"^-?\\\\d+\\\\.?\\\\d*\\\\s*\u00b0?[cf](\\\\s|$)\", // Temperature: \"10c\", \"34f\"\n      \"^[$\u20ac\u00a3\u00a5\u20b9]\", // Currency: \"$50\"\n      \"^\\\\d+\\\\.?\\\\d*\\\\s*%\\\\s*(of|off)\\\\s+\" // Percentage: \"20% of 32\"\n    ],\n    \"priority\": 100\n  }\n}\n</code></pre> <p>URL opener (<code>plugins/url/manifest.json</code>):</p> <pre><code>{\n  \"match\": {\n    \"patterns\": [\"^[a-zA-Z0-9][a-zA-Z0-9-]*\\\\.[a-zA-Z]{2,}\"],\n    \"priority\": 90\n  }\n}\n</code></pre>"},{"location":"plugins/advanced-features/#complete-handler-example","title":"Complete Handler Example","text":"<pre><code>#!/usr/bin/env python3\nimport json\nimport sys\n\ndef main():\n    input_data = json.load(sys.stdin)\n    step = input_data.get(\"step\", \"initial\")\n    query = input_data.get(\"query\", \"\").strip()\n\n    # Pattern match from main search\n    if step == \"match\":\n        url = normalize_url(query)\n        print(json.dumps({\n            \"type\": \"match\",\n            \"result\": {\n                \"id\": \"open_url\",\n                \"name\": url,\n                \"description\": \"Open in browser\",\n                \"icon\": \"open_in_browser\",\n                \"verb\": \"Open\",\n                \"openUrl\": url,\n                \"close\": True,\n                \"actions\": [\n                    {\"id\": \"copy\", \"name\": \"Copy URL\", \"icon\": \"content_copy\"}\n                ]\n            }\n        }))\n        return\n\n    # Handle action (from match result or inside plugin)\n    if step == \"action\":\n        action = input_data.get(\"action\", \"\")\n        url = input_data.get(\"selected\", {}).get(\"id\", \"\")\n\n        if action == \"copy\":\n            print(json.dumps({\n                \"type\": \"execute\",\n                \"copy\": url,\n                \"notify\": f\"Copied: {url}\",\n                \"close\": True\n            }))\n        else:\n            print(json.dumps({\n                \"type\": \"execute\",\n                \"openUrl\": url,\n                \"close\": True\n            }))\n        return\n\n    # Standard plugin flow (initial, search)\n    # ...\n\ndef normalize_url(url):\n    if not url.startswith((\"http://\", \"https://\")):\n        return \"https://\" + url\n    return url\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>"},{"location":"plugins/advanced-features/#priority-guidelines","title":"Priority Guidelines","text":"Priority Use Case 100+ High confidence matches (calculator with <code>=</code> prefix) 80-99 Medium confidence (URL detection) 50-79 Lower confidence (fuzzy matches) <p>When multiple plugins match the same input, higher priority wins.</p>"},{"location":"plugins/advanced-features/#tips","title":"Tips","text":"<ol> <li>Be specific: Narrow patterns reduce false positives</li> <li>Return null for invalid input: <code>{\"type\": \"match\", \"result\": null}</code> hides the result</li> <li>Include actions: Secondary actions (copy, share) enhance usability</li> <li>Use priority: Ensure your plugin ranks appropriately against others</li> </ol> <p>Example plugins: <code>calculate/</code>, <code>url/</code></p>"},{"location":"plugins/advanced-features/#daemon-mode","title":"Daemon Mode","text":"<p>For plugins that need live updates, file watching, or persistent state, use daemon mode instead of spawning a new process for each request.</p>"},{"location":"plugins/advanced-features/#enable-in-manifest_1","title":"Enable in Manifest","text":"<pre><code>{\n  \"name\": \"My Plugin\",\n  \"daemon\": {\n    \"enabled\": true,\n    \"background\": false\n  }\n}\n</code></pre> Field Type Default Description <code>enabled</code> bool false Enable daemon mode <code>background</code> bool false Run always (true) or only when plugin open (false)"},{"location":"plugins/advanced-features/#daemon-lifecycle","title":"Daemon Lifecycle","text":"<ul> <li><code>background: false</code> - Starts when plugin opens, stops when it closes. Use for live displays (process monitors, media players).</li> <li><code>background: true</code> - Starts when hamr launches, runs always. Use for file watching, status updates (todo counts, clipboard).</li> </ul>"},{"location":"plugins/advanced-features/#daemon-handler-pattern","title":"Daemon Handler Pattern","text":"<pre><code>#!/usr/bin/env python3\nimport json\nimport os\nimport signal\nimport select\nimport sys\nimport time\n\ndef emit(data):\n    \"\"\"Emit JSON response (line-buffered).\"\"\"\n    print(json.dumps(data), flush=True)\n\ndef main():\n    # Graceful shutdown\n    signal.signal(signal.SIGTERM, lambda s, f: sys.exit(0))\n    signal.signal(signal.SIGINT, lambda s, f: sys.exit(0))\n\n    current_query = \"\"\n    last_refresh = 0\n    refresh_interval = 2.0\n\n    while True:\n        # Non-blocking stdin read with timeout\n        readable, _, _ = select.select([sys.stdin], [], [], 0.5)\n\n        if readable:\n            line = sys.stdin.readline()\n            if not line:\n                break  # EOF - hamr closed connection\n\n            try:\n                request = json.loads(line.strip())\n            except json.JSONDecodeError:\n                continue\n\n            step = request.get(\"step\", \"\")\n\n            if step == \"initial\":\n                current_query = \"\"\n                emit({\n                    \"type\": \"results\",\n                    \"results\": get_results(),\n                    \"placeholder\": \"Search...\"\n                })\n                last_refresh = time.time()\n                continue\n\n            if step == \"search\":\n                current_query = request.get(\"query\", \"\")\n                emit({\n                    \"type\": \"results\",\n                    \"results\": get_results(current_query)\n                })\n                last_refresh = time.time()\n                continue\n\n            if step == \"action\":\n                # Handle actions...\n                emit({\"type\": \"results\", \"results\": get_results(current_query)})\n                continue\n\n        # Periodic refresh\n        now = time.time()\n        if now - last_refresh &gt;= refresh_interval:\n            emit({\n                \"type\": \"results\",\n                \"results\": get_results(current_query)\n            })\n            last_refresh = now\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>"},{"location":"plugins/advanced-features/#key-differences-from-request-response","title":"Key Differences from Request-Response","text":"Aspect Request-Response Daemon Process lifecycle New per request Single persistent stdin <code>json.load(sys.stdin)</code> <code>readline()</code> in loop stdout Single print Multiple <code>emit()</code> calls State Stateless Persistent variables Updates On user action Can push anytime"},{"location":"plugins/advanced-features/#file-watching-with-inotify","title":"File Watching with inotify","text":"<p>For efficient file watching, use native inotify:</p> <pre><code>import ctypes\nimport ctypes.util\nimport struct\n\nIN_CLOSE_WRITE = 0x00000008\nIN_MOVED_TO = 0x00000080\nIN_CREATE = 0x00000100\n\ndef create_inotify_fd(watch_path):\n    \"\"\"Create inotify fd watching a directory.\"\"\"\n    try:\n        libc = ctypes.CDLL(ctypes.util.find_library(\"c\"), use_errno=True)\n        fd = libc.inotify_init()\n        if fd &lt; 0:\n            return None\n\n        watch_path.mkdir(parents=True, exist_ok=True)\n        mask = IN_CLOSE_WRITE | IN_MOVED_TO | IN_CREATE\n        wd = libc.inotify_add_watch(fd, str(watch_path).encode(), mask)\n        if wd &lt; 0:\n            os.close(fd)\n            return None\n        return fd\n    except Exception:\n        return None\n\n# Use in main loop\ninotify_fd = create_inotify_fd(DATA_DIR)\nif inotify_fd:\n    while True:\n        readable, _, _ = select.select([sys.stdin, inotify_fd], [], [], 1.0)\n        # Handle stdin and inotify events...\n</code></pre> <p>Example plugins: <code>timer/</code>, <code>topcpu/</code>, <code>todo/</code>, <code>clipboard/</code></p>"},{"location":"plugins/advanced-features/#plugin-indexing","title":"Plugin Indexing","text":"<p>Make your plugin's items searchable from the main launcher without opening the plugin.</p>"},{"location":"plugins/advanced-features/#enable-in-manifest_2","title":"Enable in Manifest","text":"<pre><code>{\n  \"name\": \"Apps\",\n  \"index\": {\n    \"enabled\": true\n  }\n}\n</code></pre> <p>Indexing requires daemon mode - the daemon emits <code>{\"type\": \"index\"}</code> responses whenever data changes.</p>"},{"location":"plugins/advanced-features/#handle-the-index-step","title":"Handle the <code>index</code> Step","text":"<pre><code>if step == \"index\":\n    print(json.dumps({\n        \"type\": \"index\",\n        \"items\": [\n            {\n                \"id\": \"app:firefox\",\n                \"name\": \"Firefox\",\n                \"description\": \"Web Browser\",\n                \"icon\": \"firefox\",\n                \"iconType\": \"system\",\n                \"keywords\": [\"browser\", \"web\"],\n                \"verb\": \"Open\",\n                \"execute\": {\n                    \"launch\": \"/usr/share/applications/firefox.desktop\"\n                }\n            }\n        ]\n    }))\n    return\n</code></pre>"},{"location":"plugins/advanced-features/#index-item-fields","title":"Index Item Fields","text":"Field Type Required Description <code>id</code> string Yes Unique identifier <code>name</code> string Yes Display name (searchable) <code>description</code> string No Subtitle <code>icon</code> string No Icon name <code>iconType</code> string No <code>\"material\"</code> or <code>\"system\"</code> <code>keywords</code> array No Additional search terms <code>verb</code> string No Action text (e.g., \"Open\") <code>entryPoint</code> object Yes How to invoke the handler (see below) <code>actions</code> array No Secondary action buttons"},{"location":"plugins/advanced-features/#understanding-entrypoint","title":"Understanding <code>entryPoint</code>","text":"<p><code>entryPoint</code> is only needed for indexed items - items that appear in main search outside your plugin.</p> <p>When a user selects an indexed item from main search, hamr has no context about your plugin. The <code>entryPoint</code> is a stored \"recipe\" that tells hamr what request to send to your handler.</p> <p>When <code>entryPoint</code> is needed:</p> Scenario <code>entryPoint</code> needed? Plugin without indexing (<code>index.enabled: false</code>) No Result items inside an active plugin No Index items (appear in main search) Yes <p>For most simple plugins without indexing, you never need <code>entryPoint</code>.</p>"},{"location":"plugins/advanced-features/#entrypoint-schema","title":"<code>entryPoint</code> Schema","text":"Field Type Default Description <code>step</code> string <code>\"action\"</code> Step type to send to handler <code>selected</code> object - Selected item info, usually <code>{\"id\": \"...\"}</code> <code>action</code> string - Which action to perform <code>query</code> string - Query string (for search-based entry points)"},{"location":"plugins/advanced-features/#entrypoint-vs-action","title":"<code>entryPoint</code> vs <code>action</code>","text":"Concept What it is Example <code>entryPoint</code> Blueprint/recipe for invoking the handler <code>{\"step\": \"action\", \"selected\": {\"id\": \"x\"}, \"action\": \"copy\"}</code> <code>action</code> String identifier for which operation <code>\"copy\"</code>, <code>\"delete\"</code>, <code>\"edit\"</code>"},{"location":"plugins/advanced-features/#full-indexing-flow","title":"Full Indexing Flow","text":"<p>The complete flow from indexing to execution:</p> <pre><code>sequenceDiagram\n    participant Handler\n    participant Hamr\n    participant Index as Search Index\n    participant User\n\n    Note over Handler,Index: 1. Indexing Phase\n    Hamr-&gt;&gt;Handler: {\"step\": \"index\"}\n    Handler-&gt;&gt;Hamr: {\"type\": \"index\", \"items\": [&lt;br/&gt;  {id, name, entryPoint: {...}, actions: [...]}&lt;br/&gt;]}\n    Hamr-&gt;&gt;Index: Store items with entryPoints\n\n    Note over User,Handler: 2. Execution Phase (later)\n    User-&gt;&gt;Hamr: Types \"github\" in main search\n    Index-&gt;&gt;Hamr: Returns matching indexed items\n    Hamr-&gt;&gt;User: Shows \"GitHub\" item\n    User-&gt;&gt;Hamr: Clicks \"Copy Password\" action\n    Note over Hamr: Reads action's entryPoint:&lt;br/&gt;{step: \"action\", selected: {id: \"...\"}, action: \"copy_password\"}\n    Hamr-&gt;&gt;Handler: {\"step\": \"action\", \"selected\": {\"id\": \"github-login\"}, \"action\": \"copy_password\"}\n    Handler-&gt;&gt;Hamr: {\"type\": \"execute\", \"notify\": \"Copied!\", \"close\": true}</code></pre> <p>Key points:</p> <ol> <li>Handler provides <code>entryPoint</code> - Hamr doesn't construct it automatically</li> <li>Hamr stores <code>entryPoint</code> - Saved with indexed items for later use</li> <li>Handler receives standard request - Same format as inside-plugin clicks</li> </ol>"},{"location":"plugins/advanced-features/#inside-plugin-vs-main-search","title":"Inside Plugin vs Main Search","text":"<p>The handler receives the same request format regardless of origin:</p> <pre><code>flowchart TB\n    subgraph \"Inside Plugin\"\n        A[User clicks item/action] --&gt; B[Hamr builds request&lt;br/&gt;from click context]\n    end\n\n    subgraph \"Main Search\"\n        C[User clicks indexed item] --&gt; D[Hamr reads stored entryPoint]\n        D --&gt; E[Hamr builds request&lt;br/&gt;from entryPoint]\n    end\n\n    B --&gt; F[\"Handler receives:&lt;br/&gt;{step, selected, action}\"]\n    E --&gt; F\n\n    style F fill:#c8e6c9</code></pre> <p>Inside plugin: Hamr builds the request directly - no <code>entryPoint</code> needed in result items.</p> <p>From main search: Hamr uses the stored <code>entryPoint</code> from the index response.</p> <p>Handler logic is identical for both:</p> <pre><code>if step == \"action\":\n    item_id = selected.get(\"id\")\n    action = input_data.get(\"action\", \"\")\n\n    if action == \"copy_password\":\n        # User clicked the \"Copy Password\" button\n        pass\n    else:\n        # User clicked the item itself (default action)\n        pass\n</code></pre>"},{"location":"plugins/advanced-features/#index-item-example","title":"Index Item Example","text":"<p>The handler must provide <code>entryPoint</code> on index items and their actions:</p> <pre><code>{\n    \"id\": \"github-login\",\n    \"name\": \"GitHub\",\n    \"icon\": \"key\",\n    \"entryPoint\": {                          # Required: default click\n        \"step\": \"action\",\n        \"selected\": {\"id\": \"github-login\"}\n    },\n    \"actions\": [\n        {\n            \"id\": \"copy_password\",\n            \"name\": \"Copy Password\",\n            \"icon\": \"key\",\n            \"entryPoint\": {                  # Required: action button click\n                \"step\": \"action\",\n                \"selected\": {\"id\": \"github-login\"},\n                \"action\": \"copy_password\"\n            }\n        }\n    ]\n}\n</code></pre> <p>Why the handler must provide <code>entryPoint</code>:</p> <ul> <li>Hamr doesn't know what <code>step</code> to use (could be <code>\"action\"</code>, <code>\"search\"</code>, etc.)</li> <li>Hamr doesn't know what fields <code>selected</code> should contain</li> <li>Hamr doesn't know what <code>action</code> string maps to each button</li> </ul>"},{"location":"plugins/advanced-features/#index-only-plugins","title":"Index-Only Plugins","text":"<p>For plugins that only provide indexed items (no interactive mode), set <code>indexOnly: true</code> and use a daemon handler to emit index responses:</p> <pre><code>{\n  \"name\": \"Zoxide\",\n  \"description\": \"Jump to directories\",\n  \"icon\": \"folder_special\",\n  \"supportedPlatforms\": [\"niri\", \"hyprland\"],\n  \"handler\": {\n    \"type\": \"stdio\",\n    \"path\": \"handler.py\"\n  },\n  \"indexOnly\": true,\n  \"daemon\": {\n    \"enabled\": true,\n    \"background\": true\n  }\n}\n</code></pre> <p>The daemon handler emits <code>index</code> responses but returns an error for interactive steps.</p>"},{"location":"plugins/advanced-features/#incremental-indexing","title":"Incremental Indexing","text":"<p>For efficient updates with large datasets:</p> <pre><code>if step == \"index\":\n    mode = input_data.get(\"mode\", \"full\")\n    indexed_ids = set(input_data.get(\"indexedIds\", []))\n\n    if mode == \"incremental\" and indexed_ids:\n        current_items = get_all_items()\n        current_ids = {item[\"id\"] for item in current_items}\n\n        new_items = [i for i in current_items if i[\"id\"] not in indexed_ids]\n        removed_ids = list(indexed_ids - current_ids)\n\n        print(json.dumps({\n            \"type\": \"index\",\n            \"mode\": \"incremental\",\n            \"items\": new_items,\n            \"remove\": removed_ids\n        }))\n    else:\n        print(json.dumps({\n            \"type\": \"index\",\n            \"items\": get_all_items()\n        }))\n</code></pre> <p>Example plugins: <code>apps/</code>, <code>bitwarden/</code></p>"},{"location":"plugins/advanced-features/#search-ranking","title":"Search Ranking","text":"<p>Understanding how Hamr ranks search results helps you optimize your plugin's index items for discoverability.</p>"},{"location":"plugins/advanced-features/#ranking-algorithm","title":"Ranking Algorithm","text":"<p>Hamr combines multiple signals to rank results:</p> <pre><code>composite_score = fuzzy_score + exact_match_bonus + frecency_boost + history_boost\n</code></pre> Signal Weight Description Fuzzy Score 0-1000 Base relevance from fuzzysort matching Exact Match +500 Query exactly matches item name Frecency 0-300 Usage frequency \u00d7 recency multiplier History Term +200 Query matches a learned search term"},{"location":"plugins/advanced-features/#frecency-calculation","title":"Frecency Calculation","text":"<p>Frecency combines usage count with recency decay:</p> <pre><code>frecency = count \u00d7 recency_multiplier\n</code></pre> Time Since Last Use Multiplier &lt; 1 hour 4\u00d7 &lt; 24 hours 2\u00d7 &lt; 7 days 1\u00d7 &gt; 7 days 0.5\u00d7"},{"location":"plugins/advanced-features/#diversity-decay","title":"Diversity (Decay)","text":"<p>To prevent a single plugin from dominating results, Hamr applies exponential decay to consecutive results from the same plugin:</p> <pre><code>effective_score = composite_score \u00d7 (decay_factor ^ position_in_plugin)\n</code></pre> <p>With default <code>decay_factor = 0.7</code>:</p> <ul> <li>1st item from plugin: 100% score</li> <li>2nd item from plugin: 70% score</li> <li>3rd item from plugin: 49% score</li> <li>4th item from plugin: 34% score</li> </ul> <p>This ensures diverse results even when one plugin has many high-scoring matches.</p>"},{"location":"plugins/advanced-features/#optimizing-your-index-items","title":"Optimizing Your Index Items","text":"<ul> <li>Use descriptive <code>name</code> fields (primary search target)</li> <li>Add <code>keywords</code> for alternative search terms users might type</li> </ul> <p>Example with keywords:</p> <pre><code>{\n    \"id\": \"app:firefox\",\n    \"name\": \"Firefox\",\n    \"keywords\": [\"browser\", \"web\", \"internet\", \"mozilla\"],\n    \"icon\": \"firefox\",\n    \"iconType\": \"system\"\n}\n</code></pre> <p>Keyword weighting: Name matches score 1.0\u00d7, keyword matches score 0.3\u00d7.</p>"},{"location":"plugins/advanced-features/#configuration","title":"Configuration","text":"<p>Users can tune search behavior in <code>~/.config/hamr/config.json</code>:</p> <pre><code>{\n  \"search\": {\n    \"diversityDecay\": 0.7,\n    \"maxResultsPerPlugin\": 0\n  }\n}\n</code></pre> Option Default Description <code>diversityDecay</code> 0.7 Decay factor (0-1). Lower = more diverse results <code>maxResultsPerPlugin</code> 0 Hard limit per plugin (0 = no limit, decay only)"},{"location":"plugins/advanced-features/#plugin-status","title":"Plugin Status","text":"<p>Display dynamic status (badges, description) on your plugin's entry in the main list.</p> <p></p>"},{"location":"plugins/advanced-features/#via-response","title":"Via Response","text":"<p>Include <code>status</code> in your response:</p> <pre><code>{\n    \"type\": \"results\",\n    \"results\": [...],\n    \"status\": {\n        \"badges\": [{\"text\": \"5\", \"color\": \"#f44336\"}],\n        \"chips\": [{\"text\": \"5 tasks\", \"icon\": \"task_alt\"}],\n        \"description\": \"5 pending tasks\"  # Overrides manifest\n    }\n}\n</code></pre>"},{"location":"plugins/advanced-features/#via-cli","title":"Via CLI","text":"<pre><code>hamr status todo '{\"badges\": [{\"text\": \"5\"}]}'\n</code></pre>"},{"location":"plugins/advanced-features/#badge-format","title":"Badge Format","text":"<pre><code>{\n    \"text\": \"5\",                    # 1-3 characters\n    \"icon\": \"star\",                 # Material icon (overrides text)\n    \"image\": \"/path/to/avatar.png\", # Image (overrides text/icon)\n    \"color\": \"#ffffff\"              # Text/icon color\n}\n</code></pre> <p>Badges use the theme's surface color as background (not customizable).</p>"},{"location":"plugins/advanced-features/#chip-format","title":"Chip Format","text":"<pre><code>{\n    \"text\": \"5 tasks\",\n    \"icon\": \"task_alt\",\n    \"color\": \"#ffffff\",\n    \"background\": \"#4caf50\"\n}\n</code></pre> <p>Example plugin: <code>todo/</code></p>"},{"location":"plugins/advanced-features/#fab-override","title":"FAB Override","text":"<p>Override the floating action button (FAB) when launcher is minimized.</p> Normal FAB With Override"},{"location":"plugins/advanced-features/#set-fab-override","title":"Set FAB Override","text":"<p>Include in status update:</p> <pre><code>emit({\n    \"type\": \"status\",\n    \"status\": {\n        \"fab\": {\n            \"chips\": [{\"text\": \"04:32\", \"icon\": \"timer\"}],\n            \"priority\": 10,\n            \"showFab\": true  # Force FAB visible\n        }\n    }\n})\n</code></pre> Field Type Description <code>chips</code> array Chip widgets to display <code>badges</code> array Badge widgets to display <code>priority</code> number Higher wins if multiple plugins set FAB <code>showFab</code> bool Force FAB visible when launcher closed"},{"location":"plugins/advanced-features/#clear-fab-override","title":"Clear FAB Override","text":"<pre><code>emit({\"type\": \"status\", \"status\": {\"fab\": null}})\n</code></pre> <p>Example plugin: <code>timer/</code></p>"},{"location":"plugins/advanced-features/#ambient-items","title":"Ambient Items","text":"<p>Persistent status items shown in the action bar below search.</p> <p></p>"},{"location":"plugins/advanced-features/#set-ambient-items","title":"Set Ambient Items","text":"<pre><code>emit({\n    \"type\": \"status\",\n    \"status\": {\n        \"ambient\": [\n            {\n                \"id\": \"timer-1\",\n                \"name\": \"Focus Timer\",\n                \"description\": \"24:32 remaining\",\n                \"icon\": \"timer\",\n                \"actions\": [\n                    {\"id\": \"pause\", \"icon\": \"pause\", \"name\": \"Pause\"},\n                    {\"id\": \"stop\", \"icon\": \"stop\", \"name\": \"Stop\"}\n                ],\n                \"duration\": 0  # 0 = permanent\n            }\n        ]\n    }\n})\n</code></pre>"},{"location":"plugins/advanced-features/#action-handling","title":"Action Handling","text":"<p>When user clicks an ambient item action:</p> <pre><code>{\n    \"step\": \"action\",\n    \"selected\": {\"id\": \"timer-1\"},\n    \"action\": \"pause\",\n    \"source\": \"ambient\"\n}\n</code></pre> <p>When user dismisses:</p> <pre><code>{\n    \"step\": \"action\",\n    \"selected\": {\"id\": \"timer-1\"},\n    \"action\": \"__dismiss__\",\n    \"source\": \"ambient\"\n}\n</code></pre>"},{"location":"plugins/advanced-features/#clear-ambient-items","title":"Clear Ambient Items","text":"<pre><code>emit({\"type\": \"status\", \"status\": {\"ambient\": null}})\n</code></pre> <p>Example plugin: <code>timer/</code></p>"},{"location":"plugins/advanced-features/#platform-support","title":"Platform Support","text":"<p>Specify which platforms your plugin supports:</p> <pre><code>{\n  \"name\": \"My Plugin\",\n  \"supportedPlatforms\": [\"niri\", \"hyprland\"]\n}\n</code></pre> Value Description <code>[\"hyprland\"]</code> Hyprland only <code>[\"niri\"]</code> Niri only <code>[\"niri\", \"hyprland\"]</code> Linux Wayland compositors <code>[\"macos\"]</code> macOS only <code>[\"windows\"]</code> Windows only <code>[\"niri\", \"hyprland\", \"macos\", \"windows\"]</code> All platforms (list explicitly) <p>Guidelines:</p> <ul> <li>Uses <code>hyprctl</code> \u2192 <code>[\"hyprland\"]</code></li> <li>Uses <code>niri msg</code> \u2192 <code>[\"niri\"]</code></li> <li>Uses generic tools (<code>wl-copy</code>, <code>notify-send</code>) \u2192 <code>[\"niri\", \"hyprland\"]</code></li> <li>Truly cross-platform (no compositor-specific calls) \u2192 <code>[\"niri\", \"hyprland\", \"macos\", \"windows\"]</code></li> </ul> <p>Note: There is no wildcard support. List all supported platforms explicitly.</p>"},{"location":"plugins/advanced-features/#frecency-tracking","title":"Frecency Tracking","text":"<p>Control how your plugin's usage is recorded:</p> <pre><code>{\n  \"name\": \"My Plugin\",\n  \"frecency\": \"item\"\n}\n</code></pre> Value Behavior Use Case <code>\"item\"</code> Track individual items (default) Apps, clipboard, emojis <code>\"plugin\"</code> Track plugin only Todo, notes, bitwarden <code>\"none\"</code> Don't track Monitoring plugins <p>Guidelines:</p> <ul> <li>Items are sensitive \u2192 <code>\"plugin\"</code></li> <li>Items are ephemeral \u2192 <code>\"plugin\"</code> or <code>\"none\"</code></li> <li>Plugin is for monitoring \u2192 <code>\"none\"</code></li> </ul>"},{"location":"plugins/advanced-features/#ipc-communication","title":"IPC Communication","text":""},{"location":"plugins/advanced-features/#hamr-ipc-targets","title":"Hamr IPC Targets","text":"<pre><code># Toggle launcher\nqs -c hamr ipc call hamr toggle\n\n# Open specific workflow\nqs -c hamr ipc call hamr workflow bitwarden\n\n# Refresh shell history\nqs -c hamr ipc call shellHistoryService update\n</code></pre>"},{"location":"plugins/advanced-features/#from-python","title":"From Python","text":"<pre><code>import subprocess\n\ndef call_ipc(config, target, method, *args):\n    subprocess.Popen(\n        [\"qs\", \"-c\", config, \"ipc\", \"call\", target, method] + list(args),\n        stdout=subprocess.DEVNULL,\n        stderr=subprocess.DEVNULL,\n    )\n\n# Examples\ncall_ipc(\"hamr\", \"hamr\", \"toggle\")\ncall_ipc(\"ii\", \"todo\", \"refresh\")  # Cross-config IPC\n</code></pre> <p>Example plugin: <code>todo/</code> - Syncs with external sidebar widget</p>"},{"location":"plugins/advanced-features/#launch-timestamp-api","title":"Launch Timestamp API","text":"<p>Get when hamr was opened (useful for trimming recordings, etc.):</p> <pre><code>from pathlib import Path\n\nTIMESTAMP_FILE = Path.home() / \".cache\" / \"hamr\" / \"launch_timestamp\"\n\ndef get_launch_time():\n    \"\"\"Get timestamp (ms) when hamr opened.\"\"\"\n    try:\n        return int(TIMESTAMP_FILE.read_text().strip())\n    except (FileNotFoundError, ValueError):\n        return int(time.time() * 1000)\n</code></pre> <p>Example plugin: <code>screenrecord/</code></p>"},{"location":"plugins/advanced-features/#cli-reference","title":"CLI Reference","text":"<p>Users can bind keys in their compositor config for quick access to Hamr and specific plugins.</p>"},{"location":"plugins/advanced-features/#commands","title":"Commands","text":"<pre><code>hamr                      # Start hamr daemon (autostart)\nhamr toggle               # Toggle launcher open/close\nhamr plugin &lt;name&gt;        # Open a specific plugin directly\nhamr status &lt;id&gt; &lt;json&gt;   # Update plugin status\nhamr audio &lt;subcommand&gt;   # Audio control\n</code></pre>"},{"location":"plugins/advanced-features/#keybinding-examples","title":"Keybinding Examples","text":"<p>Hyprland (<code>~/.config/hypr/hyprland.conf</code>):</p> <pre><code>bind = SUPER, Space, exec, hamr toggle\nbind = SUPER, V, exec, hamr plugin clipboard\nbind = SUPER, E, exec, hamr plugin emoji\nbind = SUPER, P, exec, hamr plugin bitwarden\n</code></pre> <p>Niri (<code>~/.config/niri/config.kdl</code>):</p> <pre><code>Mod+Space { spawn \"hamr\" \"toggle\"; }\nMod+V { spawn \"hamr\" \"plugin\" \"clipboard\"; }\nMod+E { spawn \"hamr\" \"plugin\" \"emoji\"; }\n</code></pre>"},{"location":"plugins/advanced-features/#update-plugin-status","title":"Update Plugin Status","text":"<p>Update badges, chips, or description from external scripts:</p> <pre><code>hamr status todo '{\"badges\": [{\"text\": \"5\"}]}'\nhamr status todo '{\"chips\": [{\"text\": \"3 tasks\", \"icon\": \"task_alt\"}]}'\nhamr status todo '{\"description\": \"5 pending tasks\"}'\nhamr status todo '{}'  # Clear status\n</code></pre>"},{"location":"plugins/advanced-features/#audio-commands","title":"Audio Commands","text":"<pre><code>hamr audio play &lt;sound&gt;   # Play a sound\nhamr audio status         # Show audio status\nhamr audio enable         # Enable sound effects\nhamr audio disable        # Disable sound effects\nhamr audio reload         # Reload sound files\n</code></pre> <p>Built-in sounds: <code>alarm</code>, <code>timer</code>, <code>complete</code>, <code>notification</code>, <code>error</code>, <code>warning</code></p>"},{"location":"plugins/advanced-features/#low-level-ipc","title":"Low-Level IPC","text":"<p>For advanced use, call IPC targets directly via <code>qs</code>:</p> <pre><code>qs -c hamr ipc call hamr toggle\nqs -c hamr ipc call pluginRunner reindex apps\nqs -c hamr ipc call shellHistoryService update\n</code></pre> Target Method Description <code>hamr</code> <code>toggle</code> Toggle launcher <code>hamr</code> <code>plugin &lt;name&gt;</code> Open plugin <code>pluginRunner</code> <code>updateStatus &lt;id&gt; &lt;json&gt;</code> Update plugin status <code>pluginRunner</code> <code>reindex &lt;id&gt;</code> Trigger plugin reindex <code>shellHistoryService</code> <code>update</code> Refresh shell history <code>audio</code> <code>play &lt;sound&gt;</code> Play sound"},{"location":"plugins/api-reference/","title":"API Reference","text":"<p>Complete schema reference for Hamr plugin development.</p>"},{"location":"plugins/api-reference/#manifest-schema","title":"Manifest Schema","text":"<p>The <code>manifest.json</code> file defines your plugin's metadata and capabilities.</p>"},{"location":"plugins/api-reference/#required-fields","title":"Required Fields","text":"Field Type Description <code>name</code> string Display name shown in launcher <code>description</code> string Short description <code>icon</code> string Material icon name <code>supportedPlatforms</code> array <code>[\"niri\", \"hyprland\"]</code>, <code>[\"macos\"]</code>, <code>[\"windows\"]</code>, etc. (list all explicitly)"},{"location":"plugins/api-reference/#optional-fields","title":"Optional Fields","text":"Field Type Default Description <code>handler</code> object see below Handler configuration (type, command) <code>frecency</code> string <code>\"item\"</code> Usage tracking: <code>\"item\"</code>, <code>\"plugin\"</code>, or <code>\"none\"</code> <code>inputMode</code> string <code>\"realtime\"</code> Default input mode: <code>\"realtime\"</code> or <code>\"submit\"</code> <code>hidden</code> bool <code>false</code> Hide plugin from plugin list (prefix-only access) <code>staticIndex</code> array - Static index items defined in manifest (see below) <code>match</code> object - Pattern matching configuration (see below) <code>matchPattern</code> string - Legacy single regex pattern (use <code>match</code> instead)"},{"location":"plugins/api-reference/#handler-configuration","title":"Handler Configuration","text":"<p>The <code>handler</code> field specifies how the plugin communicates with hamr:</p> <p>stdio handler (default):</p> <pre><code>{\n  \"handler\": {\n    \"type\": \"stdio\"\n  }\n}\n</code></pre> <p>For stdio plugins, Hamr runs <code>handler.py</code> in the plugin directory by default, so the <code>handler</code> field can be omitted entirely.</p> <p>socket handler:</p> <pre><code>{\n  \"handler\": {\n    \"type\": \"socket\",\n    \"command\": \"python3 handler.py\"\n  }\n}\n</code></pre> Field Type Default Description <code>type</code> string <code>\"stdio\"</code> <code>\"stdio\"</code> or <code>\"socket\"</code> <code>path</code> string - Reserved for stdio handlers; Hamr runs <code>handler.py</code> by default <code>command</code> string - Command to run the handler (for socket) <p>Handler Types:</p> Type Description Use Case <code>stdio</code> JSON over stdin/stdout, new process per request or daemon loop Simple plugins, stateless operations <code>socket</code> JSON-RPC 2.0 over Unix socket, persistent connection Complex daemons, real-time updates <p>Note: For <code>stdio</code> handlers, if <code>daemon.enabled: true</code>, the handler runs as a persistent process reading JSON lines from stdin. For <code>socket</code> handlers, the handler connects to hamr's socket and uses JSON-RPC 2.0.</p>"},{"location":"plugins/api-reference/#daemon-configuration","title":"Daemon Configuration","text":"<pre><code>{\n  \"daemon\": {\n    \"enabled\": true,\n    \"background\": true,\n    \"restartOnCrash\": true,\n    \"maxRestarts\": 5\n  }\n}\n</code></pre> Field Type Default Description <code>daemon.enabled</code> bool <code>false</code> Enable persistent daemon mode <code>daemon.background</code> bool <code>false</code> Run always (<code>true</code>) or only when plugin open (<code>false</code>) <code>daemon.restartOnCrash</code> bool <code>false</code> Automatically restart daemon if it crashes <code>daemon.maxRestarts</code> int <code>0</code> Maximum restart attempts (0 = unlimited)"},{"location":"plugins/api-reference/#index-configuration","title":"Index Configuration","text":"<pre><code>{\n  \"index\": {\n    \"enabled\": true\n  }\n}\n</code></pre> Field Type Default Description <code>index.enabled</code> bool <code>false</code> Enable main search integration (requires daemon)"},{"location":"plugins/api-reference/#pattern-matching-configuration","title":"Pattern Matching Configuration","text":"<pre><code>{\n  \"match\": {\n    \"patterns\": [\"^=\", \"^[\\\\d\\\\.]+\\\\s*[\\\\+\\\\-]\"],\n    \"priority\": 100\n  }\n}\n</code></pre> Field Type Default Description <code>match.patterns</code> array - Regex patterns to trigger instant match <code>match.priority</code> number <code>50</code> Higher priority wins when multiple plugins match"},{"location":"plugins/api-reference/#static-index-configuration","title":"Static Index Configuration","text":"<p>Define searchable items directly in the manifest without a handler:</p> <pre><code>{\n  \"staticIndex\": [\n    {\n      \"id\": \"shutdown\",\n      \"name\": \"Shutdown\",\n      \"description\": \"Power off the system\",\n      \"icon\": \"power_settings_new\",\n      \"keywords\": [\"power\", \"off\", \"halt\"],\n      \"verb\": \"Execute\",\n      \"entryPoint\": {\n        \"step\": \"action\",\n        \"selected\": { \"id\": \"shutdown\" }\n      }\n    }\n  ]\n}\n</code></pre> Field Type Required Description <code>id</code> string Yes Unique identifier <code>name</code> string Yes Display name (searchable) <code>description</code> string No Subtitle text <code>icon</code> string No Material icon name <code>iconType</code> string No <code>\"material\"</code> (default) or <code>\"system\"</code> <code>keywords</code> array No Additional search terms <code>verb</code> string No Action text (e.g., \"Execute\") <code>entryPoint</code> object No Handler invocation data"},{"location":"plugins/api-reference/#complete-manifest-example","title":"Complete Manifest Example","text":"<p>Simple stdio plugin:</p> <pre><code>{\n  \"name\": \"My Plugin\",\n  \"description\": \"What it does\",\n  \"icon\": \"star\",\n  \"supportedPlatforms\": [\"niri\", \"hyprland\"],\n  \"handler\": {\n    \"type\": \"stdio\",\n    \"path\": \"handler.py\"\n  },\n  \"frecency\": \"item\"\n}\n</code></pre> <p>Socket-based daemon plugin:</p> <pre><code>{\n  \"name\": \"Timer\",\n  \"description\": \"Countdown timers\",\n  \"icon\": \"timer\",\n  \"supportedPlatforms\": [\"niri\", \"hyprland\", \"macos\", \"windows\"],\n  \"handler\": {\n    \"type\": \"socket\",\n    \"command\": \"python3 handler.py\"\n  },\n  \"daemon\": {\n    \"enabled\": true,\n    \"background\": true,\n    \"restartOnCrash\": true,\n    \"maxRestarts\": 5\n  },\n  \"frecency\": \"plugin\"\n}\n</code></pre> <p>Pattern-matching plugin:</p> <pre><code>{\n  \"name\": \"Calculate\",\n  \"description\": \"Calculator\",\n  \"icon\": \"calculate\",\n  \"supportedPlatforms\": [\"niri\", \"hyprland\", \"macos\", \"windows\"],\n  \"handler\": {\n    \"type\": \"stdio\",\n    \"path\": \"handler.py\"\n  },\n  \"match\": {\n    \"patterns\": [\"^=\", \"^[\\\\d\\\\.]+\\\\s*[\\\\+\\\\-\\\\*\\\\/]\"],\n    \"priority\": 100\n  },\n  \"frecency\": \"plugin\"\n}\n</code></pre>"},{"location":"plugins/api-reference/#request-schema","title":"Request Schema","text":"<p>Every handler invocation receives a JSON object on stdin.</p>"},{"location":"plugins/api-reference/#common-fields","title":"Common Fields","text":"Field Type Always Present Description <code>step</code> string Yes Request type (see below) <code>query</code> string Yes Current search bar text <code>selected</code> object No Selected item info <code>action</code> string No Action button ID <code>context</code> string No Plugin state from previous response <code>session</code> string Yes Unique session identifier"},{"location":"plugins/api-reference/#step-types","title":"Step Types","text":"Step When Triggered Key Fields <code>initial</code> Plugin opens - <code>search</code> User types (realtime) or presses Enter (submit) <code>query</code> <code>action</code> User selects item or clicks action <code>selected</code>, <code>action</code> <code>match</code> Pattern matched in main search <code>query</code> <code>form</code> Form submitted <code>formData</code> <code>formSlider</code> Live form slider changed <code>fieldId</code>, <code>value</code> <code>poll</code> Polling tick <code>query</code> <code>index</code> Index request <code>mode</code>, <code>indexedIds</code>"},{"location":"plugins/api-reference/#request-examples","title":"Request Examples","text":"<p>Initial:</p> <pre><code>{ \"step\": \"initial\", \"query\": \"\", \"session\": \"abc123\" }\n</code></pre> <p>Search:</p> <pre><code>{ \"step\": \"search\", \"query\": \"firefox\", \"session\": \"abc123\" }\n</code></pre> <p>Action (item click):</p> <pre><code>{ \"step\": \"action\", \"selected\": { \"id\": \"item-1\" }, \"session\": \"abc123\" }\n</code></pre> <p>Action (action button click):</p> <pre><code>{\n  \"step\": \"action\",\n  \"selected\": { \"id\": \"item-1\" },\n  \"action\": \"copy\",\n  \"session\": \"abc123\"\n}\n</code></pre> <p>Match:</p> <pre><code>{ \"step\": \"match\", \"query\": \"2+2\", \"session\": \"abc123\" }\n</code></pre> <p>Form:</p> <pre><code>{\n  \"step\": \"form\",\n  \"formData\": { \"title\": \"Note\", \"content\": \"...\" },\n  \"context\": \"__add__\",\n  \"session\": \"abc123\"\n}\n</code></pre> <p>Index:</p> <pre><code>{ \"step\": \"index\", \"mode\": \"full\", \"session\": \"abc123\" }\n</code></pre>"},{"location":"plugins/api-reference/#response-schema","title":"Response Schema","text":"<p>Every response must be a single JSON object with a <code>type</code> field.</p>"},{"location":"plugins/api-reference/#response-types","title":"Response Types","text":"Type Purpose <code>results</code> Display list of items <code>execute</code> Run action and/or close <code>match</code> Return pattern match result <code>card</code> Display markdown content <code>form</code> Show input form <code>imageBrowser</code> Image grid browser <code>gridBrowser</code> Generic grid layout <code>prompt</code> Simple text prompt <code>update</code> Patch existing items <code>index</code> Provide searchable items <code>status</code> Update plugin status <code>error</code> Show error message <code>noop</code> No UI change"},{"location":"plugins/api-reference/#results-response","title":"Results Response","text":"<pre><code>{\n  \"type\": \"results\",\n  \"results\": [],\n  \"placeholder\": \"Search...\",\n  \"inputMode\": \"realtime\",\n  \"clearInput\": false,\n  \"context\": \"\",\n  \"notify\": \"\",\n  \"pluginActions\": [],\n  \"navigateForward\": null,\n  \"navigateBack\": null,\n  \"navigationDepth\": null,\n  \"status\": {}\n}\n</code></pre> Field Type Required Default Description <code>type</code> string Yes - Must be <code>\"results\"</code> <code>results</code> array Yes - Array of result items <code>placeholder</code> string No - Search bar hint text <code>inputMode</code> string No <code>\"realtime\"</code> <code>\"realtime\"</code> or <code>\"submit\"</code> <code>clearInput</code> bool No <code>false</code> Clear search bar text <code>context</code> string No - State persisted across calls <code>notify</code> string No - Show notification toast <code>pluginActions</code> array No <code>[]</code> Toolbar action buttons <code>navigateForward</code> bool No - Increment navigation depth <code>navigateBack</code> bool No - Decrement navigation depth <code>navigationDepth</code> int No - Set exact navigation depth <code>status</code> object No - Plugin status update <code>activate</code> bool No - Activate plugin for multi-step flows"},{"location":"plugins/api-reference/#result-item-schema","title":"Result Item Schema","text":"<pre><code>{\n  \"id\": \"unique-id\",\n  \"name\": \"Display Name\",\n  \"description\": \"Subtitle text\",\n  \"icon\": \"star\",\n  \"iconType\": \"material\",\n  \"thumbnail\": \"/path/to/image.png\",\n  \"verb\": \"Open\",\n  \"actions\": [],\n  \"badges\": [],\n  \"chips\": [],\n  \"graph\": {},\n  \"gauge\": {},\n  \"progress\": {},\n  \"preview\": {}\n}\n</code></pre> Field Type Required Default Description <code>id</code> string Yes - Unique identifier <code>name</code> string Yes - Primary display text <code>description</code> string No - Secondary text <code>icon</code> string No - Material icon name <code>iconType</code> string No <code>\"material\"</code> <code>\"material\"</code>, <code>\"system\"</code>, <code>\"text\"</code>, or <code>\"path\"</code> <code>thumbnail</code> string No - Image path (overrides icon) <code>verb</code> string No - Action text on hover <code>actions</code> array No <code>[]</code> Secondary action buttons (max 4) <code>badges</code> array No <code>[]</code> Circular indicators (max 5) <code>chips</code> array No <code>[]</code> Pill-shaped tags <code>graph</code> object No - Line graph (replaces icon) <code>gauge</code> object No - Circular progress (replaces icon) <code>progress</code> object No - Progress bar (replaces description) <code>preview</code> object No - Side panel content <code>keepOpen</code> bool No <code>false</code> Keep launcher open after selection <code>displayHint</code> string No <code>\"auto\"</code> View hint: <code>\"auto\"</code>, <code>\"list\"</code>, <code>\"grid\"</code>, <code>\"large_grid\"</code> <code>isSuggestion</code> bool No <code>false</code> Mark as smart suggestion (shows reason) <code>suggestionReason</code> string No - Why this was suggested (e.g., \"Often used at 9am\") <code>hasOcr</code> bool No <code>false</code> Item has OCR-searchable text (images) <code>keywords</code> array No - Additional search terms (index items only) <code>entryPoint</code> object No - Handler invocation data (index items only) <code>appId</code> string No - App ID for window matching (apps only) <code>appIdFallback</code> string No - Fallback app ID (apps only)"},{"location":"plugins/api-reference/#slider-item-schema","title":"Slider Item Schema","text":"<p>There are two ways to define sliders:</p> <p>Simple format (stdio plugins):</p> <pre><code>{\n  \"id\": \"volume\",\n  \"type\": \"slider\",\n  \"name\": \"Volume\",\n  \"description\": \"\",\n  \"icon\": \"volume_up\",\n  \"value\": 75,\n  \"min\": 0,\n  \"max\": 100,\n  \"step\": 5,\n  \"unit\": \"%\"\n}\n</code></pre> <p>Extended format (socket plugins with gauge):</p> <pre><code>{\n  \"id\": \"volume\",\n  \"name\": \"Volume\",\n  \"icon\": \"volume_up\",\n  \"resultType\": \"slider\",\n  \"value\": {\n    \"value\": 75,\n    \"min\": 0,\n    \"max\": 100,\n    \"step\": 5,\n    \"displayValue\": \"75%\"\n  },\n  \"gauge\": {\n    \"value\": 75,\n    \"max\": 100,\n    \"label\": \"75%\"\n  }\n}\n</code></pre> Field Type Required Default Description <code>id</code> string Yes - Unique identifier <code>type</code> string No - <code>\"slider\"</code> (simple format) <code>resultType</code> string No - <code>\"slider\"</code> (extended format) <code>name</code> string Yes - Label text <code>description</code> string No - Subtitle <code>icon</code> string No - Material icon <code>value</code> number/object Yes - Current value or value object <code>min</code> number No <code>0</code> Minimum value (simple format) <code>max</code> number No <code>100</code> Maximum value (simple format) <code>step</code> number No <code>1</code> Step increment (simple format) <code>unit</code> string No - Unit suffix (simple format) <code>gauge</code> object No - Gauge display (extended format)"},{"location":"plugins/api-reference/#switch-item-schema","title":"Switch Item Schema","text":"<p>There are two ways to define switches:</p> <p>Simple format (stdio plugins):</p> <pre><code>{\n  \"id\": \"mute\",\n  \"type\": \"switch\",\n  \"name\": \"Mute\",\n  \"description\": \"\",\n  \"icon\": \"volume_off\",\n  \"value\": false\n}\n</code></pre> <p>Extended format (socket plugins):</p> <pre><code>{\n  \"id\": \"volume-mute\",\n  \"name\": \"Mute Volume\",\n  \"description\": \"Mute system audio output\",\n  \"icon\": \"volume_up\",\n  \"resultType\": \"switch\",\n  \"value\": false\n}\n</code></pre> Field Type Required Default Description <code>id</code> string Yes - Unique identifier <code>type</code> string No - <code>\"switch\"</code> (simple format) <code>resultType</code> string No - <code>\"switch\"</code> (extended format) <code>name</code> string Yes - Label text <code>description</code> string No - Subtitle <code>icon</code> string No - Material icon <code>value</code> bool Yes - Current state"},{"location":"plugins/api-reference/#action-button-schema","title":"Action Button Schema","text":"<pre><code>{\n  \"id\": \"copy\",\n  \"name\": \"Copy\",\n  \"icon\": \"content_copy\",\n  \"entryPoint\": {}\n}\n</code></pre> Field Type Required Description <code>id</code> string Yes Action identifier <code>name</code> string Yes Button label/tooltip <code>icon</code> string No Material icon <code>entryPoint</code> object No For indexed items only"},{"location":"plugins/api-reference/#plugin-action-schema","title":"Plugin Action Schema","text":"<pre><code>{\n  \"id\": \"add\",\n  \"name\": \"Add\",\n  \"icon\": \"add_circle\",\n  \"shortcut\": \"Ctrl+1\",\n  \"confirm\": \"Are you sure?\",\n  \"active\": false\n}\n</code></pre> Field Type Required Default Description <code>id</code> string Yes - Action identifier <code>name</code> string Yes - Button label <code>icon</code> string No - Material icon <code>shortcut</code> string No <code>\"Ctrl+N\"</code> Keyboard shortcut hint <code>confirm</code> string No - Confirmation dialog message <code>active</code> bool No <code>false</code> Highlight as active"},{"location":"plugins/api-reference/#badge-schema","title":"Badge Schema","text":"<pre><code>{\n  \"text\": \"5\",\n  \"icon\": \"star\",\n  \"image\": \"/path/to/avatar.png\",\n  \"color\": \"#ffffff\"\n}\n</code></pre> Field Type Required Description <code>text</code> string No 1-3 character text <code>icon</code> string No Material icon (overrides text) <code>image</code> string No Image path (overrides text/icon) <code>color</code> string No Text/icon color"},{"location":"plugins/api-reference/#chip-schema","title":"Chip Schema","text":"<pre><code>{\n  \"text\": \"Label\",\n  \"icon\": \"tag\",\n  \"color\": \"#ffffff\",\n  \"background\": \"#4caf50\"\n}\n</code></pre> Field Type Required Description <code>text</code> string Yes Chip text <code>icon</code> string No Material icon <code>color</code> string No Text/icon color <code>background</code> string No Background color"},{"location":"plugins/api-reference/#graph-schema","title":"Graph Schema","text":"<pre><code>{\n  \"values\": [10, 25, 15, 30, 20],\n  \"color\": \"#4caf50\",\n  \"max\": 100\n}\n</code></pre> Field Type Required Default Description <code>values</code> array Yes - Array of numbers <code>color</code> string No theme Line color <code>max</code> number No auto Maximum Y value"},{"location":"plugins/api-reference/#gauge-schema","title":"Gauge Schema","text":"<pre><code>{\n  \"value\": 75,\n  \"max\": 100,\n  \"label\": \"75%\",\n  \"color\": \"#4caf50\"\n}\n</code></pre> Field Type Required Default Description <code>value</code> number Yes - Current value <code>max</code> number No <code>100</code> Maximum value <code>label</code> string No - Center label <code>color</code> string No theme Arc color"},{"location":"plugins/api-reference/#progress-schema","title":"Progress Schema","text":"<pre><code>{\n  \"value\": 50,\n  \"max\": 100,\n  \"label\": \"Downloading...\",\n  \"color\": \"#2196f3\"\n}\n</code></pre> Field Type Required Default Description <code>value</code> number Yes - Current value <code>max</code> number No <code>100</code> Maximum value <code>label</code> string No - Text label <code>color</code> string No theme Bar color"},{"location":"plugins/api-reference/#preview-schema","title":"Preview Schema","text":"<pre><code>{\n  \"type\": \"markdown\",\n  \"content\": \"# Preview\\n\\nContent here...\",\n  \"detached\": false\n}\n</code></pre> Field Type Required Description <code>type</code> string Yes <code>\"markdown\"</code>, <code>\"image\"</code>, or <code>\"code\"</code> <code>content</code> string Yes Preview content <code>detached</code> bool No Show as floating panel <code>language</code> string No Code language (for <code>\"code\"</code> type)"},{"location":"plugins/api-reference/#execute-response","title":"Execute Response","text":"<pre><code>{\n  \"type\": \"execute\",\n  \"launch\": \"/path/to/app.desktop\",\n  \"copy\": \"text to copy\",\n  \"typeText\": \"text to type\",\n  \"openUrl\": \"https://example.com\",\n  \"open\": \"/path/to/file\",\n  \"notify\": \"Done!\",\n  \"sound\": \"complete\",\n  \"close\": true\n}\n</code></pre> Field Type Required Description <code>type</code> string Yes Must be <code>\"execute\"</code> <code>launch</code> string No Desktop file path <code>copy</code> string No Text to copy to clipboard <code>typeText</code> string No Text to type via ydotool <code>openUrl</code> string No URL to open <code>open</code> string No File/folder path to open <code>notify</code> string No Notification message <code>sound</code> string No Sound effect name <code>close</code> bool No Close launcher"},{"location":"plugins/api-reference/#sound-names","title":"Sound Names","text":"Sound Description <code>alarm</code> Timer/alarm completion <code>timer</code> Pomodoro, countdown <code>complete</code> Task done <code>notification</code> Alerts <code>error</code> Failed operations <code>warning</code> Caution alerts"},{"location":"plugins/api-reference/#match-response","title":"Match Response","text":"<pre><code>{\n  \"type\": \"match\",\n  \"result\": {\n    \"id\": \"calc_result\",\n    \"name\": \"4\",\n    \"description\": \"2+2\",\n    \"icon\": \"calculate\",\n    \"verb\": \"Copy\",\n    \"copy\": \"4\",\n    \"openUrl\": \"\",\n    \"notify\": \"Copied: 4\",\n    \"close\": true,\n    \"priority\": 100,\n    \"actions\": []\n  }\n}\n</code></pre> Field Type Required Description <code>type</code> string Yes Must be <code>\"match\"</code> <code>result</code> object/null Yes Match result or <code>null</code> to hide"},{"location":"plugins/api-reference/#match-result-fields","title":"Match Result Fields","text":"Field Type Required Description <code>id</code> string Yes Unique identifier <code>name</code> string Yes Primary text (the result) <code>description</code> string No Secondary text (the input) <code>icon</code> string No Material icon <code>verb</code> string No Action text <code>copy</code> string No Copy on selection <code>openUrl</code> string No Open URL on selection <code>notify</code> string No Notification after action <code>close</code> bool No Close launcher <code>priority</code> number No Ranking priority <code>actions</code> array No Secondary action buttons"},{"location":"plugins/api-reference/#card-response","title":"Card Response","text":"<pre><code>{\n  \"type\": \"card\",\n  \"card\": {\n    \"title\": \"Definition\",\n    \"content\": \"**noun**\\n\\nMeaning...\",\n    \"markdown\": true,\n    \"actions\": []\n  },\n  \"context\": \"word-id\",\n  \"inputMode\": \"submit\",\n  \"placeholder\": \"Type reply...\"\n}\n</code></pre> Field Type Required Description <code>type</code> string Yes Must be <code>\"card\"</code> <code>card</code> object Yes Card content <code>context</code> string No State for action handling <code>inputMode</code> string No <code>\"realtime\"</code> or <code>\"submit\"</code> <code>placeholder</code> string No Input hint"},{"location":"plugins/api-reference/#card-object-fields","title":"Card Object Fields","text":"Field Type Required Description <code>title</code> string No Card title <code>content</code> string Yes Card content <code>markdown</code> bool No Render as markdown <code>actions</code> array No Action buttons"},{"location":"plugins/api-reference/#form-response","title":"Form Response","text":"<pre><code>{\n  \"type\": \"form\",\n  \"form\": {\n    \"title\": \"Add Item\",\n    \"submitLabel\": \"Save\",\n    \"cancelLabel\": \"Cancel\",\n    \"liveUpdate\": false,\n    \"fields\": []\n  },\n  \"context\": \"__add__\"\n}\n</code></pre> Field Type Required Description <code>type</code> string Yes Must be <code>\"form\"</code> <code>form</code> object Yes Form definition <code>context</code> string No State passed to submission"},{"location":"plugins/api-reference/#form-object-fields","title":"Form Object Fields","text":"Field Type Required Default Description <code>title</code> string No - Form title <code>submitLabel</code> string No <code>\"Submit\"</code> Submit button text <code>cancelLabel</code> string No <code>\"Cancel\"</code> Cancel button text <code>liveUpdate</code> bool No <code>false</code> Apply changes immediately <code>fields</code> array Yes - Form field definitions"},{"location":"plugins/api-reference/#form-field-types","title":"Form Field Types","text":""},{"location":"plugins/api-reference/#text-field","title":"Text Field","text":"<pre><code>{\n  \"id\": \"name\",\n  \"type\": \"text\",\n  \"label\": \"Name\",\n  \"placeholder\": \"Enter name...\",\n  \"required\": true,\n  \"default\": \"\",\n  \"hint\": \"Helper text\"\n}\n</code></pre>"},{"location":"plugins/api-reference/#textarea-field","title":"Textarea Field","text":"<pre><code>{\n  \"id\": \"content\",\n  \"type\": \"textarea\",\n  \"label\": \"Content\",\n  \"placeholder\": \"\",\n  \"required\": false,\n  \"default\": \"\",\n  \"rows\": 6,\n  \"hint\": \"\"\n}\n</code></pre>"},{"location":"plugins/api-reference/#email-field","title":"Email Field","text":"<pre><code>{\n  \"id\": \"email\",\n  \"type\": \"email\",\n  \"label\": \"Email\",\n  \"placeholder\": \"user@example.com\",\n  \"required\": true,\n  \"default\": \"\",\n  \"hint\": \"\"\n}\n</code></pre>"},{"location":"plugins/api-reference/#password-field","title":"Password Field","text":"<pre><code>{\n  \"id\": \"password\",\n  \"type\": \"password\",\n  \"label\": \"Password\",\n  \"placeholder\": \"\",\n  \"required\": true,\n  \"hint\": \"\"\n}\n</code></pre>"},{"location":"plugins/api-reference/#hidden-field","title":"Hidden Field","text":"<pre><code>{\n  \"id\": \"item_id\",\n  \"type\": \"hidden\",\n  \"value\": \"abc123\"\n}\n</code></pre>"},{"location":"plugins/api-reference/#select-field","title":"Select Field","text":"<pre><code>{\n  \"id\": \"theme\",\n  \"type\": \"select\",\n  \"label\": \"Theme\",\n  \"options\": [\n    { \"id\": \"light\", \"name\": \"Light\" },\n    { \"id\": \"dark\", \"name\": \"Dark\" }\n  ],\n  \"default\": \"dark\",\n  \"hint\": \"\"\n}\n</code></pre>"},{"location":"plugins/api-reference/#checkbox-field","title":"Checkbox Field","text":"<pre><code>{\n  \"id\": \"agree\",\n  \"type\": \"checkbox\",\n  \"label\": \"I agree to terms\",\n  \"default\": false,\n  \"hint\": \"\"\n}\n</code></pre>"},{"location":"plugins/api-reference/#switch-field","title":"Switch Field","text":"<pre><code>{\n  \"id\": \"enabled\",\n  \"type\": \"switch\",\n  \"label\": \"Enabled\",\n  \"default\": true,\n  \"hint\": \"\"\n}\n</code></pre>"},{"location":"plugins/api-reference/#slider-field","title":"Slider Field","text":"<pre><code>{\n  \"id\": \"volume\",\n  \"type\": \"slider\",\n  \"label\": \"Volume\",\n  \"min\": 0,\n  \"max\": 100,\n  \"step\": 5,\n  \"unit\": \"%\",\n  \"default\": 50,\n  \"hint\": \"\"\n}\n</code></pre>"},{"location":"plugins/api-reference/#form-field-common-properties","title":"Form Field Common Properties","text":"Field Type Required Description <code>id</code> string Yes Field identifier <code>type</code> string Yes Field type <code>label</code> string No Display label <code>required</code> bool No Validation <code>default</code> varies No Default value <code>hint</code> string No Helper text"},{"location":"plugins/api-reference/#image-browser-response","title":"Image Browser Response","text":"<pre><code>{\n  \"type\": \"imageBrowser\",\n  \"imageBrowser\": {\n    \"directory\": \"~/Pictures\",\n    \"title\": \"Select Image\",\n    \"enableOcr\": false,\n    \"actions\": []\n  }\n}\n</code></pre> Field Type Required Description <code>directory</code> string Yes Directory to browse <code>title</code> string No Browser title <code>enableOcr</code> bool No Enable OCR text search <code>actions</code> array No Action buttons"},{"location":"plugins/api-reference/#grid-browser-response","title":"Grid Browser Response","text":"<pre><code>{\n  \"type\": \"gridBrowser\",\n  \"gridBrowser\": {\n    \"title\": \"Select Item\",\n    \"columns\": 8,\n    \"cellAspectRatio\": 1.0,\n    \"items\": [],\n    \"actions\": []\n  }\n}\n</code></pre> Field Type Required Default Description <code>title</code> string No - Browser title <code>columns</code> int No <code>8</code> Number of columns <code>cellAspectRatio</code> float No <code>1.0</code> Width/height ratio <code>items</code> array Yes - Grid items <code>actions</code> array No <code>[]</code> Action buttons"},{"location":"plugins/api-reference/#grid-item-schema","title":"Grid Item Schema","text":"<pre><code>{\n  \"id\": \"item-1\",\n  \"name\": \"Item Name\",\n  \"icon\": \"star\",\n  \"iconType\": \"material\",\n  \"keywords\": [\"search\", \"terms\"]\n}\n</code></pre>"},{"location":"plugins/api-reference/#index-response","title":"Index Response","text":"<pre><code>{\n  \"type\": \"index\",\n  \"mode\": \"full\",\n  \"items\": [],\n  \"remove\": []\n}\n</code></pre> Field Type Required Description <code>type</code> string Yes Must be <code>\"index\"</code> <code>mode</code> string No <code>\"full\"</code> or <code>\"incremental\"</code> <code>items</code> array Yes Items to index <code>remove</code> array No Item IDs to remove (incremental)"},{"location":"plugins/api-reference/#index-item-schema","title":"Index Item Schema","text":"<pre><code>{\n  \"id\": \"app:firefox\",\n  \"name\": \"Firefox\",\n  \"description\": \"Web Browser\",\n  \"icon\": \"firefox\",\n  \"iconType\": \"system\",\n  \"keywords\": [\"browser\", \"web\"],\n  \"verb\": \"Open\",\n  \"entryPoint\": {\n    \"step\": \"action\",\n    \"selected\": { \"id\": \"app:firefox\" }\n  },\n  \"actions\": []\n}\n</code></pre> Field Type Required Description <code>id</code> string Yes Unique identifier <code>name</code> string Yes Display name (searchable) <code>description</code> string No Subtitle <code>icon</code> string No Icon name <code>iconType</code> string No <code>\"material\"</code> or <code>\"system\"</code> <code>keywords</code> array No Additional search terms <code>verb</code> string No Action text <code>entryPoint</code> object Yes How to invoke handler <code>actions</code> array No Secondary actions"},{"location":"plugins/api-reference/#entry-point-schema","title":"Entry Point Schema","text":"<pre><code>{\n  \"step\": \"action\",\n  \"selected\": { \"id\": \"item-id\" },\n  \"action\": \"copy\",\n  \"query\": \"\"\n}\n</code></pre> Field Type Required Default Description <code>step</code> string No <code>\"action\"</code> Step type <code>selected</code> object No - Selected item info <code>action</code> string No - Action to perform <code>query</code> string No - Query string"},{"location":"plugins/api-reference/#status-response","title":"Status Response","text":"<pre><code>{\n  \"type\": \"status\",\n  \"status\": {\n    \"badges\": [],\n    \"chips\": [],\n    \"description\": \"5 pending tasks\",\n    \"fab\": {},\n    \"ambient\": []\n  }\n}\n</code></pre> Field Type Description <code>badges</code> array Badge indicators <code>chips</code> array Chip tags <code>description</code> string Override manifest description <code>fab</code> object FAB override (see below) <code>ambient</code> array Ambient items (see below)"},{"location":"plugins/api-reference/#fab-override-schema","title":"FAB Override Schema","text":"<pre><code>{\n  \"chips\": [{ \"text\": \"04:32\", \"icon\": \"timer\" }],\n  \"badges\": [],\n  \"priority\": 10,\n  \"showFab\": true\n}\n</code></pre> Field Type Description <code>chips</code> array Chip widgets <code>badges</code> array Badge widgets <code>priority</code> number Higher wins if multiple <code>showFab</code> bool Force FAB visible"},{"location":"plugins/api-reference/#ambient-item-schema","title":"Ambient Item Schema","text":"<pre><code>{\n  \"id\": \"timer-1\",\n  \"name\": \"Focus Timer\",\n  \"description\": \"24:32 remaining\",\n  \"icon\": \"timer\",\n  \"actions\": [{ \"id\": \"pause\", \"icon\": \"pause\", \"name\": \"Pause\" }],\n  \"duration\": 0\n}\n</code></pre> Field Type Description <code>id</code> string Unique identifier <code>name</code> string Primary text <code>description</code> string Secondary text <code>icon</code> string Material icon <code>actions</code> array Action buttons <code>duration</code> number Auto-dismiss ms (0 = permanent)"},{"location":"plugins/api-reference/#update-response","title":"Update Response","text":"<pre><code>{\n  \"type\": \"update\",\n  \"items\": [\n    {\n      \"id\": \"volume\",\n      \"gauge\": { \"value\": 75, \"max\": 100 }\n    }\n  ]\n}\n</code></pre> Field Type Required Description <code>type</code> string Yes Must be <code>\"update\"</code> <code>items</code> array Yes Partial item updates"},{"location":"plugins/api-reference/#error-response","title":"Error Response","text":"<pre><code>{\n  \"type\": \"error\",\n  \"message\": \"Failed to connect\"\n}\n</code></pre> Field Type Required Description <code>type</code> string Yes Must be <code>\"error\"</code> <code>message</code> string Yes Error message"},{"location":"plugins/api-reference/#noop-response","title":"Noop Response","text":"<pre><code>{\n  \"type\": \"noop\"\n}\n</code></pre> <p>No UI change. Use for background operations or when UI already reflects the change (e.g., slider adjustments).</p>"},{"location":"plugins/api-reference/#prompt-response","title":"Prompt Response","text":"<pre><code>{\n  \"type\": \"prompt\",\n  \"prompt\": {\n    \"text\": \"Enter search term...\"\n  }\n}\n</code></pre> Field Type Required Description <code>type</code> string Yes Must be <code>\"prompt\"</code> <code>prompt.text</code> string Yes Prompt message"},{"location":"plugins/api-reference/#special-ids","title":"Special IDs","text":"ID Context Meaning <code>__back__</code> <code>selected.id</code> Back button/Escape pressed <code>__plugin__</code> <code>selected.id</code> Plugin action clicked <code>__form_cancel__</code> <code>selected.id</code> Form cancelled <code>__empty__</code> <code>selected.id</code> Non-actionable placeholder <code>__dismiss__</code> <code>action</code> Ambient item dismissed"},{"location":"plugins/cheatsheet/","title":"Plugin Cheat Sheet","text":"<p>Quick reference for Hamr plugin development.</p>"},{"location":"plugins/cheatsheet/#manifest-template","title":"Manifest Template","text":"<p>Simple stdio plugin:</p> <pre><code>{\n  \"name\": \"My Plugin\",\n  \"description\": \"What it does\",\n  \"icon\": \"star\",\n  \"supportedPlatforms\": [\"niri\", \"hyprland\"],\n  \"handler\": {\n    \"type\": \"stdio\",\n    \"path\": \"handler.py\"\n  },\n  \"frecency\": \"item\"\n}\n</code></pre> <p>Socket-based daemon plugin:</p> <pre><code>{\n  \"name\": \"My Daemon\",\n  \"description\": \"Real-time updates\",\n  \"icon\": \"sync\",\n  \"supportedPlatforms\": [\"niri\", \"hyprland\"],\n  \"handler\": {\n    \"type\": \"socket\",\n    \"command\": \"python3 handler.py\"\n  },\n  \"daemon\": {\n    \"enabled\": true,\n    \"background\": true,\n    \"restartOnCrash\": true,\n    \"maxRestarts\": 5\n  }\n}\n</code></pre>"},{"location":"plugins/cheatsheet/#pattern-matching-manifest","title":"Pattern Matching Manifest","text":"<p>For plugins that show results instantly in main search:</p> <pre><code>{\n  \"name\": \"Calculate\",\n  \"description\": \"Calculator\",\n  \"icon\": \"calculate\",\n  \"supportedPlatforms\": [\"niri\", \"hyprland\", \"macos\", \"windows\"],\n  \"handler\": {\n    \"type\": \"stdio\",\n    \"path\": \"handler.py\"\n  },\n  \"match\": {\n    \"patterns\": [\"^=\", \"^[\\\\d\\\\.]+\\\\s*[\\\\+\\\\-\\\\*\\\\/]\"],\n    \"priority\": 100\n  }\n}\n</code></pre>"},{"location":"plugins/cheatsheet/#handler-skeleton","title":"Handler Skeleton","text":"<pre><code>#!/usr/bin/env python3\nimport json\nimport sys\n\ndef main():\n    input_data = json.load(sys.stdin)\n    step = input_data.get(\"step\", \"initial\")\n    query = input_data.get(\"query\", \"\").strip()\n    selected = input_data.get(\"selected\", {})\n    action = input_data.get(\"action\", \"\")\n    context = input_data.get(\"context\", \"\")\n\n    if step == \"initial\":\n        print(json.dumps({\n            \"type\": \"results\",\n            \"results\": [{\"id\": \"1\", \"name\": \"Item\", \"icon\": \"star\"}],\n            \"placeholder\": \"Search...\"\n        }))\n        return\n\n    if step == \"search\":\n        # Filter items\n        print(json.dumps({\"type\": \"results\", \"results\": [...]}))\n        return\n\n    if step == \"action\":\n        item_id = selected.get(\"id\", \"\")\n        if item_id == \"__back__\":\n            # Handle back navigation\n            pass\n        if item_id == \"__plugin__\":\n            # Handle toolbar action\n            pass\n        # Handle item selection\n        print(json.dumps({\"type\": \"execute\", \"close\": True}))\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>"},{"location":"plugins/cheatsheet/#response-types","title":"Response Types","text":"<pre><code># Results list\n{\"type\": \"results\", \"results\": [{...}], \"placeholder\": \"...\"}\n\n# Execute action\n{\"type\": \"execute\", \"notify\": \"Done\", \"close\": True}\n{\"type\": \"execute\", \"copy\": \"text\", \"close\": True}\n{\"type\": \"execute\", \"openUrl\": \"https://...\", \"close\": True}\n{\"type\": \"execute\", \"open\": \"/path/to/file\", \"close\": True}\n{\"type\": \"execute\", \"launch\": \"/usr/share/applications/app.desktop\", \"close\": True}\n\n# Card view\n{\"type\": \"card\", \"card\": {\"title\": \"...\", \"content\": \"...\", \"markdown\": True}}\n\n# Form\n{\"type\": \"form\", \"form\": {\"title\": \"...\", \"fields\": [{...}]}, \"context\": \"...\"}\n\n# Error\n{\"type\": \"error\", \"message\": \"Something went wrong\"}\n\n# Match result (for pattern matching plugins)\n{\"type\": \"match\", \"result\": {\"id\": \"...\", \"name\": \"result\", \"icon\": \"...\", \"copy\": \"...\"}}\n{\"type\": \"match\", \"result\": None}  # No valid result, hide\n\n# No operation\n{\"type\": \"noop\"}\n</code></pre>"},{"location":"plugins/cheatsheet/#result-item","title":"Result Item","text":"<pre><code>{\n    \"id\": \"unique-id\",           # Required\n    \"name\": \"Display Name\",      # Required\n    \"description\": \"Subtitle\",\n    \"icon\": \"star\",\n    \"iconType\": \"material\",      # or \"system\"\n    \"thumbnail\": \"/path/to/img\",\n    \"verb\": \"Open\",\n    \"actions\": [{\"id\": \"copy\", \"name\": \"Copy\", \"icon\": \"content_copy\"}],\n    \"badges\": [{\"text\": \"3\", \"color\": \"#f44336\"}],\n    \"chips\": [{\"text\": \"Label\", \"icon\": \"tag\"}]\n}\n</code></pre>"},{"location":"plugins/cheatsheet/#index-item-for-plugins-with-indexenabled-true","title":"Index Item (for plugins with <code>index.enabled: true</code>)","text":"<p>Note: Only needed if your manifest has <code>index.enabled: true</code>. Most simple plugins don't need this.</p> <pre><code>{\n    \"id\": \"app:firefox\",         # Required\n    \"name\": \"Firefox\",           # Required\n    \"description\": \"Web Browser\",\n    \"icon\": \"firefox\",\n    \"iconType\": \"system\",\n    \"keywords\": [\"browser\", \"web\"],\n    \"verb\": \"Open\",\n    \"entryPoint\": {              # Required - how to invoke handler from main search\n        \"step\": \"action\",\n        \"selected\": {\"id\": \"app:firefox\"}\n    },\n    \"actions\": [\n        {\n            \"id\": \"private\",\n            \"name\": \"Private Window\",\n            \"icon\": \"security\",\n            \"entryPoint\": {      # Required for indexed item actions\n                \"step\": \"action\",\n                \"selected\": {\"id\": \"app:firefox\"},\n                \"action\": \"private\"\n            }\n        }\n    ]\n}\n</code></pre>"},{"location":"plugins/cheatsheet/#slider-item","title":"Slider Item","text":"<pre><code>{\n    \"id\": \"volume\",\n    \"type\": \"slider\",\n    \"name\": \"Volume\",\n    \"icon\": \"volume_up\",\n    \"value\": 75,\n    \"min\": 0,\n    \"max\": 100,\n    \"step\": 5,\n    \"unit\": \"%\"\n}\n</code></pre>"},{"location":"plugins/cheatsheet/#switch-item","title":"Switch Item","text":"<pre><code>{\n    \"id\": \"mute\",\n    \"type\": \"switch\",\n    \"name\": \"Mute Volume\",\n    \"icon\": \"volume_up\",\n    \"value\": False\n}\n</code></pre>"},{"location":"plugins/cheatsheet/#plugin-actions-toolbar","title":"Plugin Actions (Toolbar)","text":"<pre><code>\"pluginActions\": [\n    {\"id\": \"add\", \"name\": \"Add\", \"icon\": \"add_circle\"},\n    {\"id\": \"wipe\", \"name\": \"Wipe\", \"icon\": \"delete_sweep\", \"confirm\": \"Are you sure?\"}\n]\n</code></pre>"},{"location":"plugins/cheatsheet/#form-fields","title":"Form Fields","text":"<pre><code>{\"id\": \"name\", \"type\": \"text\", \"label\": \"Name\", \"required\": True}\n{\"id\": \"content\", \"type\": \"textarea\", \"label\": \"Content\", \"rows\": 6}\n{\"id\": \"email\", \"type\": \"email\", \"label\": \"Email\"}\n{\"id\": \"pass\", \"type\": \"password\", \"label\": \"Password\"}\n{\"id\": \"theme\", \"type\": \"select\", \"label\": \"Theme\", \"options\": [{\"id\": \"dark\", \"name\": \"Dark\"}]}\n{\"id\": \"enabled\", \"type\": \"switch\", \"label\": \"Enabled\", \"default\": True}\n{\"id\": \"level\", \"type\": \"slider\", \"label\": \"Level\", \"min\": 0, \"max\": 100, \"step\": 10}\n{\"id\": \"data\", \"type\": \"hidden\", \"value\": \"...\"}\n</code></pre>"},{"location":"plugins/cheatsheet/#input-steps","title":"Input Steps","text":"Step When Key Fields <code>initial</code> Plugin opens - <code>search</code> User types <code>query</code> <code>action</code> User selects <code>selected.id</code>, <code>action</code> <code>match</code> Pattern matched in main search <code>query</code> <code>form</code> Form submitted <code>formData</code> <code>poll</code> Polling tick <code>query</code> <code>index</code> Indexing request <code>mode</code>"},{"location":"plugins/cheatsheet/#entrypoint-for-indexed-items-only","title":"<code>entryPoint</code> (for indexed items only)","text":"<p>Only needed for plugins with <code>index.enabled: true</code>.</p> Field Type Default Description <code>step</code> string <code>\"action\"</code> Step type <code>selected</code> object - Item info, e.g. <code>{\"id\": \"...\"}</code> <code>action</code> string - Action to perform <code>query</code> string - Query string <pre><code>\"entryPoint\": {\"step\": \"action\", \"selected\": {\"id\": \"item-1\"}, \"action\": \"copy\"}\n</code></pre> <ul> <li>Inside active plugin: Hamr builds request directly - no <code>entryPoint</code> needed</li> <li>From main search: Hamr uses stored <code>entryPoint</code> to build request</li> </ul>"},{"location":"plugins/cheatsheet/#special-ids","title":"Special IDs","text":"ID Meaning <code>__back__</code> Back button/Escape <code>__plugin__</code> Plugin action clicked <code>__form_cancel__</code> Form cancelled <code>__empty__</code> Non-actionable placeholder"},{"location":"plugins/cheatsheet/#navigation","title":"Navigation","text":"<p>Hamr auto-increments depth when user clicks an item (not action button). Override with:</p> <pre><code># Drill down (depth +1)\n{\"type\": \"results\", \"navigateForward\": True, ...}\n\n# Go back (depth -1)\n{\"type\": \"results\", \"navigateBack\": True, ...}\n\n# Jump to specific depth\n{\"type\": \"results\", \"navigationDepth\": 0, ...}\n\n# Stay at current depth (for in-place updates like toggle, delete, sync)\n{\"type\": \"results\", \"navigateForward\": False, ...}\n</code></pre> <p>Important: Actions that modify data but stay on the same view MUST use <code>navigateForward: False</code>.</p>"},{"location":"plugins/cheatsheet/#testing","title":"Testing","text":"<pre><code># Visual testing (recommended): Open Hamr and type /your-plugin\n\n# Manual handler testing\necho '{\"step\": \"initial\"}' | ./handler.py | jq .\necho '{\"step\": \"search\", \"query\": \"test\"}' | ./handler.py | jq .\necho '{\"step\": \"action\", \"selected\": {\"id\": \"item-1\"}}' | ./handler.py | jq .\n\n# Check logs\njournalctl --user -u hamr -f\n</code></pre>"},{"location":"plugins/cheatsheet/#common-icons","title":"Common Icons","text":"Category Icons Actions <code>add</code>, <code>delete</code>, <code>edit</code>, <code>save</code>, <code>content_copy</code>, <code>open_in_new</code> Files <code>folder</code>, <code>description</code>, <code>image</code>, <code>code</code>, <code>video_file</code> UI <code>search</code>, <code>settings</code>, <code>star</code>, <code>favorite</code>, <code>info</code>, <code>error</code> Navigation <code>arrow_back</code>, <code>home</code>, <code>menu</code>, <code>close</code> Status <code>check</code>, <code>warning</code>, <code>sync</code>, <code>downloading</code>"},{"location":"plugins/cheatsheet/#manifest-options","title":"Manifest Options","text":"Field Required Values Description <code>name</code> Yes string Plugin display name <code>description</code> Yes string Short description <code>icon</code> Yes string Material icon name <code>supportedPlatforms</code> Yes <code>[\"niri\", \"hyprland\"]</code>, etc Platform/compositor support (list all explicitly) <code>handler.type</code> No <code>\"stdio\"</code>, <code>\"socket\"</code> Handler communication type (default: <code>stdio</code>) <code>handler.path</code> No string Script filename for <code>stdio</code> handlers (e.g., <code>handler.py</code>) <code>handler.command</code> No string Command to run for <code>socket</code> handlers (e.g., <code>python3 handler.py</code>) <code>frecency</code> No <code>\"item\"</code>, <code>\"plugin\"</code>, <code>\"none\"</code> Usage tracking (see Search Ranking) <code>inputMode</code> No <code>\"realtime\"</code>, <code>\"submit\"</code> Default input mode (default: <code>realtime</code>) <code>hidden</code> No bool Hide from plugin list (prefix-only access) <code>daemon.enabled</code> No bool Enable daemon mode <code>daemon.background</code> No bool Run always vs when open <code>daemon.restartOnCrash</code> No bool Auto-restart on crash <code>daemon.maxRestarts</code> No number Max restart attempts (0 = unlimited) <code>index.enabled</code> No bool Enable indexing (requires daemon) <code>indexOnly</code> No bool No interactive mode <code>match.patterns</code> No array Regex patterns for instant match <code>match.priority</code> No number Match priority (default: 50) <code>staticIndex</code> No array Static index items defined in manifest"},{"location":"plugins/cheatsheet/#cli-commands","title":"CLI Commands","text":"<pre><code>hamr toggle                    # Toggle launcher\nhamr plugin &lt;name&gt;             # Open plugin directly\nhamr status &lt;id&gt; '&lt;json&gt;'      # Update plugin status\nhamr audio play &lt;sound&gt;        # Play sound\n</code></pre> <p>See CLI Reference for full details.</p>"},{"location":"plugins/python-sdk/","title":"Python SDK Reference","text":"<p>The Python SDK (<code>hamr_sdk.py</code>) provides helpers for building socket-based daemon plugins that communicate with the Hamr daemon via JSON-RPC 2.0.</p>"},{"location":"plugins/python-sdk/#installation","title":"Installation","text":"<p>The SDK is included in the <code>plugins/sdk/</code> directory. Import it in your plugin:</p> <pre><code>import sys\nfrom pathlib import Path\n\n# Add parent directory to path to import SDK\nsys.path.insert(0, str(Path(__file__).parent.parent))\nfrom sdk.hamr_sdk import HamrPlugin\n</code></pre>"},{"location":"plugins/python-sdk/#quick-start","title":"Quick Start","text":"<pre><code>from sdk.hamr_sdk import HamrPlugin\n\nplugin = HamrPlugin(\n    id=\"my-plugin\",\n    name=\"My Plugin\",\n    description=\"A socket-based plugin\",\n    icon=\"extension\"\n)\n\n@plugin.on_search\ndef handle_search(query: str, context: str | None) -&gt; dict:\n    return HamrPlugin.results([\n        {\"id\": \"1\", \"name\": \"Result\", \"icon\": \"star\"}\n    ])\n\n@plugin.on_action\ndef handle_action(item_id: str, action: str | None, context: str | None, source: str | None) -&gt; dict:\n    return HamrPlugin.copy_and_close(\"Hello\")\n\nplugin.run()\n</code></pre>"},{"location":"plugins/python-sdk/#hamrplugin-class","title":"HamrPlugin Class","text":""},{"location":"plugins/python-sdk/#constructor","title":"Constructor","text":"<pre><code>HamrPlugin(\n    id: str,                          # Plugin identifier (matches manifest)\n    name: str,                         # Display name\n    description: str | None = None,    # Plugin description\n    icon: str | None = None,           # Material icon name\n    prefix: str | None = None,         # Search prefix (e.g., \"!\")\n    priority: int = 0,                 # Search result priority\n    socket_path: str | None = None,    # Custom socket path (defaults to $XDG_RUNTIME_DIR/hamr.sock)\n    debug: bool | None = None,         # Enable debug logging (defaults to HAMR_PLUGIN_DEBUG env var)\n)\n</code></pre>"},{"location":"plugins/python-sdk/#handler-decorators","title":"Handler Decorators","text":"<p>Register handlers using decorators:</p> Decorator Handler Signature Description <code>@plugin.on_initial</code> <code>(params: dict) -&gt; dict</code> Called when plugin is opened <code>@plugin.on_search</code> <code>(query: str, context: str \\| None) -&gt; dict</code> Called on search input <code>@plugin.on_action</code> <code>(item_id: str, action: str \\| None, context: str \\| None, source: str \\| None) -&gt; dict</code> Called on item selection or action <code>@plugin.on_form_submitted</code> <code>(form_data: dict, context: str \\| None) -&gt; dict</code> Called on form submission <code>@plugin.on_slider_changed</code> <code>(slider_id: str, value: float) -&gt; dict</code> Called on slider value change <code>@plugin.on_switch_toggled</code> <code>(switch_id: str, value: float) -&gt; dict</code> Called on switch toggle (value is <code>1.0</code> or <code>0.0</code>) <p>Handlers can be sync or async:</p> <pre><code>@plugin.on_search\ndef sync_handler(query: str, context: str | None) -&gt; dict:\n    return HamrPlugin.results([...])\n\n@plugin.on_search\nasync def async_handler(query: str, context: str | None) -&gt; dict:\n    result = await fetch_data(query)\n    return HamrPlugin.results([...])\n</code></pre>"},{"location":"plugins/python-sdk/#background-tasks","title":"Background Tasks","text":"<p>Add background coroutines that run alongside message handling:</p> <pre><code>@plugin.add_background_task\nasync def monitor_changes(p: HamrPlugin):\n    \"\"\"Background task receives plugin instance for sending updates.\"\"\"\n    while True:\n        await asyncio.sleep(1)\n        # Send status update\n        await p.send_status({\"chips\": [{\"text\": \"Updated\"}]})\n</code></pre> <p>Background tasks are started after registration and run until the plugin exits.</p>"},{"location":"plugins/python-sdk/#notification-methods","title":"Notification Methods","text":"<p>Send notifications to the daemon (no response expected):</p> <pre><code># Send search results\nawait plugin.send_results(results=[...], **kwargs)\n\n# Send status update (badges, chips, ambient items)\nawait plugin.send_status({\"chips\": [...], \"badges\": [...], \"ambient\": [...]})\n\n# Send index items for search indexing\nawait plugin.send_index(items=[...])\n\n# Request action execution\nawait plugin.send_execute({\"type\": \"copy\", \"text\": \"Hello\"})\n\n# Send partial result updates (patches)\nawait plugin.send_update(patches=[{\"id\": \"item1\", \"description\": \"Updated\"}])\n</code></pre>"},{"location":"plugins/python-sdk/#response-builders","title":"Response Builders","text":"<p>Static methods for building properly-typed response dictionaries:</p>"},{"location":"plugins/python-sdk/#hamrpluginresults","title":"<code>HamrPlugin.results()</code>","text":"<p>Build a results response:</p> <pre><code>HamrPlugin.results(\n    items: list[dict],                          # Required: result items\n    input_mode: str | None = None,              # \"realtime\" for keystroke updates\n    status: dict | None = None,                 # Status with chips/badges/ambient\n    context: str | None = None,                 # Context passed to subsequent handlers\n    placeholder: str | None = None,             # Search input placeholder\n    clear_input: bool = False,                  # Clear search input\n    navigate_forward: bool | None = None,       # Push navigation state\n    plugin_actions: list[dict] | None = None,   # Action bar actions\n    navigation_depth: int | None = None,        # Navigation depth hint\n    display_hint: str | None = None,            # \"auto\", \"list\", \"grid\", \"large_grid\"\n)\n</code></pre>"},{"location":"plugins/python-sdk/#hamrpluginform","title":"<code>HamrPlugin.form()</code>","text":"<p>Build a form response:</p> <pre><code>HamrPlugin.form(\n    form: dict,                    # Form definition with title, fields\n    context: str | None = None,    # Context for form submission\n)\n</code></pre> <p>Example form:</p> <pre><code>HamrPlugin.form({\n    \"title\": \"Settings\",\n    \"fields\": [\n        {\"type\": \"text\", \"id\": \"name\", \"label\": \"Name\", \"value\": \"Default\"},\n        {\"type\": \"switch\", \"id\": \"enabled\", \"label\": \"Enable feature\", \"value\": True},\n        {\"type\": \"slider\", \"id\": \"volume\", \"label\": \"Volume\", \"value\": 50, \"min\": 0, \"max\": 100},\n    ],\n    \"submitLabel\": \"Save\"\n})\n</code></pre>"},{"location":"plugins/python-sdk/#hamrplugincard","title":"<code>HamrPlugin.card()</code>","text":"<p>Build a card response (detail view):</p> <pre><code>HamrPlugin.card(\n    title: str,                                  # Required: card title\n    content: str | None = None,                  # Plain text content\n    markdown: str | None = None,                 # Markdown content\n    actions: list[dict] | None = None,           # Action buttons\n    status: dict | None = None,                  # Status indicators\n    kind: str | None = None,                     # Card kind\n    blocks: list[dict] | None = None,            # Card blocks (pill, separator, etc.)\n    max_height: int | None = None,               # Max height in pixels\n    show_details: bool | None = None,            # Show details section\n    allow_toggle_details: bool | None = None,    # Allow toggling details\n)\n</code></pre>"},{"location":"plugins/python-sdk/#hamrpluginexecute","title":"<code>HamrPlugin.execute()</code>","text":"<p>Build an execute response:</p> <pre><code>HamrPlugin.execute(\n    launch: str | None = None,       # Desktop file to launch\n    copy: str | None = None,         # Text to copy to clipboard\n    url: str | None = None,          # URL to open\n    close: bool = False,             # Close the launcher\n    hide: bool = False,              # Hide the launcher\n    type_text: str | None = None,    # Text to type (ydotool)\n    play_sound: str | None = None,   # Sound to play\n)\n</code></pre>"},{"location":"plugins/python-sdk/#convenience-methods","title":"Convenience Methods","text":"<pre><code># Close the launcher\nHamrPlugin.close()\n\n# Copy text and close\nHamrPlugin.copy_and_close(text: str)\n\n# Launch desktop file and close\nHamrPlugin.launch_and_close(desktop_file: str)\n\n# Open URL (optionally close)\nHamrPlugin.open_url(url: str, close: bool = True)\n\n# Return error\nHamrPlugin.error(message: str, details: str | None = None)\n</code></pre>"},{"location":"plugins/python-sdk/#action-handler-patterns","title":"Action Handler Patterns","text":""},{"location":"plugins/python-sdk/#primary-action","title":"Primary Action","text":"<p>When <code>action</code> is <code>None</code>, the user pressed Enter on the item:</p> <pre><code>@plugin.on_action\ndef handle_action(item_id: str, action: str | None, context: str | None, source: str | None):\n    if action is None:\n        # Primary action (Enter pressed)\n        return HamrPlugin.copy_and_close(get_value(item_id))\n    elif action == \"delete\":\n        delete_item(item_id)\n        return build_results()\n    elif action == \"edit\":\n        return show_edit_form(item_id)\n</code></pre>"},{"location":"plugins/python-sdk/#ambient-actions","title":"Ambient Actions","text":"<p>When <code>source == \"ambient\"</code>, the action came from the ambient bar. Return status updates only (not results):</p> <pre><code>@plugin.on_action\nasync def handle_action(item_id: str, action: str | None, context: str | None, source: str | None):\n    if source == \"ambient\":\n        # Handle ambient bar action\n        perform_action(item_id, action)\n        # Update status but don't return results (would open plugin view)\n        await plugin.send_status(build_status())\n        return {}\n\n    # Regular action\n    return HamrPlugin.results([...])\n</code></pre>"},{"location":"plugins/python-sdk/#status-updates","title":"Status Updates","text":""},{"location":"plugins/python-sdk/#badges-and-chips","title":"Badges and Chips","text":"<pre><code>await plugin.send_status({\n    \"badges\": [\n        {\"text\": \"3\", \"color\": \"#4caf50\"},     # Count badge\n        {\"icon\": \"warning\", \"color\": \"orange\"} # Icon badge\n    ],\n    \"chips\": [\n        {\"text\": \"Running\", \"icon\": \"timer\"},\n        {\"text\": \"2 active\"}\n    ]\n})\n</code></pre>"},{"location":"plugins/python-sdk/#ambient-items","title":"Ambient Items","text":"<p>Persistent items shown in the ambient bar:</p> <pre><code>await plugin.send_status({\n    \"ambient\": [\n        {\n            \"id\": \"timer:123\",\n            \"name\": \"Meeting\",\n            \"description\": \"05:30\",\n            \"icon\": \"timer\",\n            \"actions\": [\n                {\"id\": \"pause\", \"icon\": \"pause\", \"name\": \"Pause\"},\n                {\"id\": \"delete\", \"icon\": \"delete\", \"name\": \"Delete\"}\n            ]\n        }\n    ]\n})\n</code></pre>"},{"location":"plugins/python-sdk/#fab-override","title":"FAB Override","text":"<p>Override the floating action button when launcher is closed:</p> <pre><code>await plugin.send_status({\n    \"fab\": {\n        \"chips\": [{\"text\": \"05:30\", \"icon\": \"timer\"}],\n        \"showFab\": True,  # Force FAB visible\n        \"priority\": 10    # Higher priority wins\n    }\n})\n</code></pre>"},{"location":"plugins/python-sdk/#indexing","title":"Indexing","text":"<p>Daemon plugins can emit index items for main search:</p> <pre><code># On startup, emit full index\nawait plugin.send_index(items=[\n    {\n        \"id\": \"item:1\",\n        \"name\": \"My Item\",\n        \"description\": \"Description\",\n        \"icon\": \"star\",\n        \"keywords\": [\"keyword1\", \"keyword2\"],\n        \"entryPoint\": {\n            \"step\": \"action\",\n            \"selected\": {\"id\": \"item:1\"}\n        }\n    }\n])\n</code></pre> <p>The <code>entryPoint</code> field allows items to skip directly to action step when selected from main search.</p>"},{"location":"plugins/python-sdk/#debugging","title":"Debugging","text":"<p>Enable debug logging:</p> <pre><code># Via environment variable\nHAMR_PLUGIN_DEBUG=1 python3 handler.py\n\n# Or in code\nplugin = HamrPlugin(id=\"...\", debug=True)\n</code></pre> <p>Debug messages go to stderr:</p> <pre><code>[my-plugin] Connecting to /run/user/1000/hamr.sock\n[my-plugin] Connected\n[my-plugin] Registered: {'ok': True}\n[my-plugin] Received message: {'method': 'search', 'params': {...}}\n</code></pre>"},{"location":"plugins/python-sdk/#complete-example-timer-plugin","title":"Complete Example: Timer Plugin","text":"<pre><code>#!/usr/bin/env python3\nimport asyncio\nimport sys\nfrom pathlib import Path\n\nsys.path.insert(0, str(Path(__file__).parent.parent))\nfrom sdk.hamr_sdk import HamrPlugin\n\nplugin = HamrPlugin(\n    id=\"timer\",\n    name=\"Timer\",\n    description=\"Countdown timers\",\n    icon=\"timer\"\n)\n\ntimers = []\n\n@plugin.on_initial\nasync def handle_initial(params=None):\n    return HamrPlugin.results(\n        get_timer_results(),\n        placeholder=\"Enter duration (e.g., 5m, 1h30m)...\"\n    )\n\n@plugin.on_search\nasync def handle_search(query: str, context: str | None):\n    return HamrPlugin.results(\n        get_timer_results(query),\n        input_mode=\"realtime\"\n    )\n\n@plugin.on_action\nasync def handle_action(item_id: str, action: str | None, context: str | None, source: str | None):\n    if source == \"ambient\":\n        # Ambient bar action - only send status update\n        handle_timer_action(item_id, action)\n        await plugin.send_status(get_status())\n        return {}\n\n    # Regular action\n    handle_timer_action(item_id, action)\n    return HamrPlugin.results(get_timer_results())\n\n@plugin.add_background_task\nasync def tick_timers(p: HamrPlugin):\n    while True:\n        await asyncio.sleep(1)\n        update_timers()\n        await p.send_status(get_status())\n\nplugin.run()\n</code></pre>"},{"location":"plugins/python-sdk/#manifest-configuration","title":"Manifest Configuration","text":"<p>For socket-based daemon plugins using the SDK, use this manifest structure:</p> <pre><code>{\n  \"name\": \"My Plugin\",\n  \"description\": \"Plugin description\",\n  \"icon\": \"extension\",\n  \"handler\": {\n    \"type\": \"socket\",\n    \"command\": \"python3 handler.py\"\n  },\n  \"daemon\": {\n    \"enabled\": true,\n    \"background\": true,\n    \"restartOnCrash\": true,\n    \"maxRestarts\": 5\n  },\n  \"frecency\": \"plugin\",\n  \"supportedPlatforms\": [\"niri\", \"hyprland\"]\n}\n</code></pre> <p>Important: The SDK is for <code>socket</code> type handlers only. For simple <code>stdio</code> plugins, you don't need the SDK - just read JSON from stdin and print JSON to stdout.</p> <p>See API Reference for full manifest documentation.</p>"},{"location":"plugins/python-sdk/#when-to-use-the-sdk","title":"When to Use the SDK","text":"Use Case SDK? Handler Type Simple stateless operations No <code>stdio</code> Pattern matching (calculator) No <code>stdio</code> Real-time updates (timers) Yes <code>socket</code> Background monitoring (sound) Yes <code>socket</code> Ambient items &amp; FAB override Yes <code>socket</code> Live sliders/switches Yes <code>socket</code>"},{"location":"plugins/raycast-conversion/","title":"Converting Raycast Extensions","text":"<p>This guide helps you port Raycast extensions to Hamr plugins.</p>"},{"location":"plugins/raycast-conversion/#architecture-comparison","title":"Architecture Comparison","text":"Aspect Raycast Hamr Language TypeScript/React Any (Python recommended) UI Model React components JSON responses Data Flow React hooks + state stdin/stdout per step Platform macOS Linux (Wayland)"},{"location":"plugins/raycast-conversion/#raycast-extension-structure","title":"Raycast Extension Structure","text":"<pre><code>raycast-extension/\n\u251c\u2500\u2500 package.json          # Manifest + commands\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 index.tsx         # Main command (React)\n\u2502   \u251c\u2500\u2500 hooks/            # Data fetching\n\u2502   \u251c\u2500\u2500 components/       # Reusable UI\n\u2502   \u2514\u2500\u2500 utils/            # Helpers\n\u2514\u2500\u2500 assets/               # Icons\n</code></pre>"},{"location":"plugins/raycast-conversion/#component-mapping","title":"Component Mapping","text":"Raycast Component Hamr Equivalent <code>&lt;List&gt;</code> <code>{\"type\": \"results\", \"results\": [...]}</code> <code>&lt;List.Item&gt;</code> <code>{\"id\": \"...\", \"name\": \"...\", \"icon\": \"...\"}</code> <code>&lt;List.Item.Detail&gt;</code> <code>{\"type\": \"card\", \"card\": {...}}</code> <code>&lt;Detail&gt;</code> <code>{\"type\": \"card\", \"card\": {...}}</code> <code>&lt;Grid&gt;</code> <code>{\"type\": \"imageBrowser\"}</code> or results with thumbnails <code>&lt;Form&gt;</code> <code>{\"type\": \"form\"}</code> or multi-step with submit mode <code>&lt;ActionPanel&gt;</code> <code>\"actions\": [...]</code> on result items <code>Action.CopyToClipboard</code> <code>{\"copy\": \"text\"}</code> <code>Action.OpenInBrowser</code> <code>{\"openUrl\": \"url\"}</code> <code>Action.Push</code> Return new results (navigation) <code>showToast()</code> <code>{\"notify\": \"message\"}</code> <code>getPreferenceValues()</code> Config file or environment"},{"location":"plugins/raycast-conversion/#hook-translation","title":"Hook Translation","text":"Raycast Hook Hamr Equivalent <code>usePromise</code> Fetch in handler, return results <code>useCachedPromise</code> Cache to JSON file <code>useCachedState</code> Use <code>context</code> field <code>useState</code> Use <code>context</code> for state <code>useEffect</code> Not needed (stateless calls)"},{"location":"plugins/raycast-conversion/#path-mapping-macos-to-linux","title":"Path Mapping (macOS to Linux)","text":"macOS Linux <code>~/Library/Application Support/Google/Chrome</code> <code>~/.config/google-chrome</code> <code>~/Library/Application Support/BraveSoftware/Brave-Browser</code> <code>~/.config/BraveSoftware/Brave-Browser</code> <code>~/Library/Application Support/Microsoft Edge</code> <code>~/.config/microsoft-edge</code> <code>~/Library/Application Support/Firefox</code> <code>~/.mozilla/firefox</code> <code>~/Library/Preferences</code> <code>~/.config</code> <code>~/Library/Caches</code> <code>~/.cache</code>"},{"location":"plugins/raycast-conversion/#api-mapping-macos-to-linux","title":"API Mapping (macOS to Linux)","text":"Raycast/macOS Linux Equivalent <code>Clipboard.copy()</code> <code>wl-copy</code> <code>Clipboard.paste()</code> <code>wl-paste</code> <code>showHUD()</code> <code>notify-send</code> <code>open</code> command <code>xdg-open</code> <code>getFrontmostApplication()</code> <code>hyprctl activewindow -j</code> AppleScript D-Bus or CLI tools Keychain <code>secret-tool</code> (libsecret)"},{"location":"plugins/raycast-conversion/#example-conversion","title":"Example Conversion","text":""},{"location":"plugins/raycast-conversion/#raycast-typescriptreact","title":"Raycast (TypeScript/React)","text":"<pre><code>import { List, ActionPanel, Action } from \"@raycast/api\";\n\nexport default function Command() {\n  const items = [\n    { id: \"1\", title: \"First\", url: \"https://example.com\" },\n    { id: \"2\", title: \"Second\", url: \"https://example.org\" },\n  ];\n\n  return (\n    &lt;List searchBarPlaceholder=\"Search bookmarks...\"&gt;\n      {items.map((item) =&gt; (\n        &lt;List.Item\n          key={item.id}\n          title={item.title}\n          subtitle={item.url}\n          actions={\n            &lt;ActionPanel&gt;\n              &lt;Action.OpenInBrowser url={item.url} /&gt;\n              &lt;Action.CopyToClipboard content={item.url} /&gt;\n            &lt;/ActionPanel&gt;\n          }\n        /&gt;\n      ))}\n    &lt;/List&gt;\n  );\n}\n</code></pre>"},{"location":"plugins/raycast-conversion/#hamr-python","title":"Hamr (Python)","text":"<pre><code>#!/usr/bin/env python3\nimport json\nimport sys\n\ndef main():\n    input_data = json.load(sys.stdin)\n    step = input_data.get(\"step\", \"initial\")\n    selected = input_data.get(\"selected\", {})\n    action = input_data.get(\"action\", \"\")\n\n    items = [\n        {\"id\": \"1\", \"title\": \"First\", \"url\": \"https://example.com\"},\n        {\"id\": \"2\", \"title\": \"Second\", \"url\": \"https://example.org\"},\n    ]\n\n    if step in (\"initial\", \"search\"):\n        query = input_data.get(\"query\", \"\").lower()\n        filtered = [i for i in items if query in i[\"title\"].lower()] if query else items\n\n        print(json.dumps({\n            \"type\": \"results\",\n            \"results\": [\n                {\n                    \"id\": item[\"id\"],\n                    \"name\": item[\"title\"],\n                    \"description\": item[\"url\"],\n                    \"icon\": \"bookmark\",\n                    \"actions\": [\n                        {\"id\": \"open\", \"name\": \"Open\", \"icon\": \"open_in_new\"},\n                        {\"id\": \"copy\", \"name\": \"Copy URL\", \"icon\": \"content_copy\"},\n                    ]\n                }\n                for item in filtered\n            ],\n            \"placeholder\": \"Search bookmarks...\"\n        }))\n        return\n\n    if step == \"action\":\n        item_id = selected.get(\"id\")\n        item = next((i for i in items if i[\"id\"] == item_id), None)\n        if not item:\n            return\n\n        if action == \"copy\":\n            print(json.dumps({\n                \"type\": \"execute\",\n                \"copy\": item[\"url\"],\n                \"notify\": \"URL copied\",\n                \"close\": True\n            }))\n        else:\n            print(json.dumps({\n                \"type\": \"execute\",\n                \"openUrl\": item[\"url\"],\n                \"name\": f\"Open {item['title']}\",\n                \"icon\": \"bookmark\",\n                \"close\": True\n            }))\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>"},{"location":"plugins/raycast-conversion/#conversion-checklist","title":"Conversion Checklist","text":""},{"location":"plugins/raycast-conversion/#1-identify-data-source","title":"1. Identify Data Source","text":"<ul> <li>[ ] API calls: Use <code>requests</code> or <code>subprocess</code></li> <li>[ ] Local files: Update paths for Linux</li> <li>[ ] System APIs: Find Linux equivalents</li> </ul>"},{"location":"plugins/raycast-conversion/#2-map-ui-components","title":"2. Map UI Components","text":"<ul> <li>[ ] <code>List</code> to results response</li> <li>[ ] <code>Detail</code>/<code>List.Item.Detail</code> to card response</li> <li>[ ] <code>Grid</code> to imageBrowser or thumbnails</li> <li>[ ] <code>Form</code> to form response or submit mode</li> </ul>"},{"location":"plugins/raycast-conversion/#3-handle-actions","title":"3. Handle Actions","text":"<ul> <li>[ ] <code>Action.OpenInBrowser</code> to <code>openUrl</code></li> <li>[ ] <code>Action.CopyToClipboard</code> to <code>copy</code></li> <li>[ ] <code>Action.Push</code> to return new results</li> <li>[ ] Custom actions to execute responses</li> </ul>"},{"location":"plugins/raycast-conversion/#4-replace-platform-apis","title":"4. Replace Platform APIs","text":"<ul> <li>[ ] Clipboard: <code>wl-copy</code>/<code>wl-paste</code></li> <li>[ ] Notifications: <code>notify-send</code></li> <li>[ ] File paths: Linux equivalents</li> <li>[ ] Keychain: <code>secret-tool</code> or config file</li> </ul>"},{"location":"plugins/raycast-conversion/#5-test-edge-cases","title":"5. Test Edge Cases","text":"<ul> <li>[ ] Empty results</li> <li>[ ] Missing files/directories</li> <li>[ ] Network errors</li> <li>[ ] Permission errors</li> </ul>"},{"location":"plugins/raycast-conversion/#using-ai-to-convert","title":"Using AI to Convert","text":"<p>The <code>create-plugin</code> workflow can help convert Raycast extensions:</p> <ol> <li>Run <code>/create-plugin</code> in Hamr</li> <li>Provide the Raycast extension URL</li> <li>AI analyzes and creates Hamr equivalent</li> </ol> <p>Example prompt:</p> <pre><code>Create a Hamr plugin that replicates the functionality of this Raycast extension:\nhttps://github.com/raycast/extensions/tree/main/extensions/browser-bookmarks\n\nFocus on Chrome and Firefox support for Linux.\n</code></pre>"},{"location":"plugins/raycast-conversion/#common-patterns","title":"Common Patterns","text":""},{"location":"plugins/raycast-conversion/#preferences","title":"Preferences","text":"<p>Raycast:</p> <pre><code>const { apiKey } = getPreferenceValues&lt;Preferences&gt;();\n</code></pre> <p>Hamr:</p> <pre><code>import os\nfrom pathlib import Path\n\nCONFIG_FILE = Path.home() / \".config\" / \"hamr\" / \"my-plugin.json\"\n\ndef get_config():\n    if CONFIG_FILE.exists():\n        return json.loads(CONFIG_FILE.read_text())\n    return {}\n\napi_key = os.environ.get(\"MY_API_KEY\") or get_config().get(\"apiKey\")\n</code></pre>"},{"location":"plugins/raycast-conversion/#caching","title":"Caching","text":"<p>Raycast:</p> <pre><code>const { data, isLoading } = useCachedPromise(fetchData);\n</code></pre> <p>Hamr:</p> <pre><code>import time\n\nCACHE_FILE = Path.home() / \".cache\" / \"hamr\" / \"my-plugin.json\"\nCACHE_TTL = 300  # 5 minutes\n\ndef get_cached_data():\n    if CACHE_FILE.exists():\n        cache = json.loads(CACHE_FILE.read_text())\n        if time.time() - cache.get(\"timestamp\", 0) &lt; CACHE_TTL:\n            return cache.get(\"data\")\n\n    data = fetch_data()\n    CACHE_FILE.parent.mkdir(parents=True, exist_ok=True)\n    CACHE_FILE.write_text(json.dumps({\"data\": data, \"timestamp\": time.time()}))\n    return data\n</code></pre>"},{"location":"plugins/raycast-conversion/#detail-view","title":"Detail View","text":"<p>Raycast:</p> <pre><code>&lt;List.Item.Detail markdown={`# ${item.title}\\n\\n${item.content}`} /&gt;\n</code></pre> <p>Hamr:</p> <pre><code>{\n    \"type\": \"card\",\n    \"card\": {\n        \"title\": item[\"title\"],\n        \"content\": item[\"content\"],\n        \"markdown\": True\n    }\n}\n</code></pre>"},{"location":"plugins/raycast-conversion/#navigation-push","title":"Navigation (Push)","text":"<p>Raycast:</p> <pre><code>&lt;Action.Push title=\"View Details\" target={&lt;DetailView item={item} /&gt;} /&gt;\n</code></pre> <p>Hamr:</p> <pre><code># On action, return new results with navigateForward\nif action == \"view\":\n    print(json.dumps({\n        \"type\": \"results\",\n        \"results\": get_detail_items(item_id),\n        \"navigateForward\": True,\n        \"context\": f\"detail:{item_id}\"\n    }))\n</code></pre>"},{"location":"plugins/response-types/","title":"Response Types","text":"<p>Every handler response must include a <code>type</code> field. This page documents all available response types.</p>"},{"location":"plugins/response-types/#quick-reference","title":"Quick Reference","text":"Type Purpose When to Use <code>results</code> Show a list of items Search results, menus, lists <code>execute</code> Run an action Open files, copy text, close launcher <code>card</code> Show rich content Markdown text, definitions, details <code>form</code> Show input form Multi-field input, settings <code>imageBrowser</code> Image grid browser Wallpapers, screenshots <code>gridBrowser</code> Generic grid Emojis, icons <code>prompt</code> Simple text prompt Initial input request <code>error</code> Show error message Something went wrong <code>update</code> Patch existing items Slider adjustments, live updates <code>index</code> Provide searchable items Main search integration <code>noop</code> No UI change Background operations"},{"location":"plugins/response-types/#results","title":"<code>results</code>","text":"<p>Display a list of selectable items. This is the most common response type.</p> <p></p> <pre><code>{\n    \"type\": \"results\",\n    \"results\": [\n        {\n            \"id\": \"unique-id\",           # Required: identifies the item\n            \"name\": \"Display Name\",      # Required: main text\n            \"description\": \"Subtitle\",   # Optional: shown below name\n            \"icon\": \"star\",              # Optional: Material icon name\n            \"iconType\": \"material\",      # Optional: \"material\" (default) or \"system\"\n            \"thumbnail\": \"/path/to/img\", # Optional: image preview (overrides icon)\n            \"verb\": \"Open\",              # Optional: action text on hover\n            \"actions\": [                 # Optional: secondary action buttons\n                {\"id\": \"copy\", \"name\": \"Copy\", \"icon\": \"content_copy\"}\n            ]\n        }\n    ],\n    \"placeholder\": \"Search...\",          # Optional: search bar hint\n    \"inputMode\": \"realtime\",             # Optional: \"realtime\" or \"submit\"\n    \"clearInput\": true,                  # Optional: clear search text\n    \"context\": \"my-state\",               # Optional: persist state\n    \"notify\": \"Action done\",             # Optional: show notification\n    \"pluginActions\": [...]               # Optional: toolbar buttons\n}\n</code></pre>"},{"location":"plugins/response-types/#result-item-fields","title":"Result Item Fields","text":"Field Type Description <code>id</code> string Required. Unique identifier sent back on selection <code>name</code> string Required. Primary display text <code>description</code> string Secondary text below name <code>icon</code> string Material icon name (e.g., <code>\"star\"</code>, <code>\"folder\"</code>) <code>iconType</code> string <code>\"material\"</code> (default), <code>\"system\"</code>, <code>\"text\"</code>, or <code>\"path\"</code> <code>thumbnail</code> string Image file path (overrides icon) <code>verb</code> string Action text shown on hover (e.g., \"Open\", \"Copy\") <code>actions</code> array Secondary action buttons (up to 4) <code>badges</code> array Compact circular indicators (up to 5) <code>chips</code> array Pill-shaped tags <code>graph</code> object Line graph data (replaces icon) <code>gauge</code> object Circular progress (replaces icon) <code>progress</code> object Horizontal progress bar (replaces description) <code>preview</code> object Side panel preview content <code>keepOpen</code> bool Keep launcher open after selection (default: <code>false</code>) <code>displayHint</code> string View hint: <code>\"auto\"</code>, <code>\"list\"</code>, <code>\"grid\"</code>, <code>\"large_grid\"</code> <code>isSuggestion</code> bool Mark as smart suggestion (shows reason badge) <code>suggestionReason</code> string Why this was suggested (e.g., \"Often used around 9am\") <code>hasOcr</code> bool Item has OCR-searchable text (for images/screenshots)"},{"location":"plugins/response-types/#response-level-fields","title":"Response-Level Fields","text":"Field Type Description <code>placeholder</code> string Search bar placeholder text <code>inputMode</code> string <code>\"realtime\"</code> (every keystroke) or <code>\"submit\"</code> (on Enter) <code>clearInput</code> bool Clear the search bar <code>context</code> string Custom state persisted across search calls <code>notify</code> string Show notification toast <code>pluginActions</code> array Toolbar buttons below search bar <code>navigateForward</code> bool Increase navigation depth <code>navigateBack</code> bool Decrease navigation depth <code>navigationDepth</code> int Set exact navigation depth <code>displayHint</code> string View hint: <code>\"auto\"</code>, <code>\"list\"</code>, <code>\"grid\"</code>, <code>\"large_grid\"</code>"},{"location":"plugins/response-types/#action-buttons","title":"Action Buttons","text":"<pre><code>\"actions\": [\n    {\"id\": \"edit\", \"name\": \"Edit\", \"icon\": \"edit\"},\n    {\"id\": \"delete\", \"name\": \"Delete\", \"icon\": \"delete\"}\n]\n</code></pre> Field Type Required Description <code>id</code> string Yes Action identifier sent to handler <code>name</code> string Yes Button label/tooltip <code>icon</code> string No Material icon <code>entryPoint</code> object No For indexed items only (see below) <p>When user clicks an action button, you receive:</p> <pre><code>{\n    \"step\": \"action\",\n    \"selected\": {\"id\": \"item-id\"},\n    \"action\": \"edit\"  # The action button ID\n}\n</code></pre>"},{"location":"plugins/response-types/#actions-on-indexed-items","title":"Actions on Indexed Items","text":"<p>Note: <code>entryPoint</code> is only needed for plugins with indexing enabled (<code>index.enabled: true</code> in manifest). For regular plugins without indexing, you don't need <code>entryPoint</code> - hamr builds the request directly from click context.</p> <p>For indexed items that appear in main search, actions need an <code>entryPoint</code> so hamr knows how to invoke your handler:</p> <pre><code>\"actions\": [\n    {\n        \"id\": \"copy\",\n        \"name\": \"Copy\",\n        \"icon\": \"content_copy\",\n        \"entryPoint\": {\n            \"step\": \"action\",\n            \"selected\": {\"id\": \"item-id\"},\n            \"action\": \"copy\"\n        }\n    }\n]\n</code></pre> <p>See Plugin Indexing for details.</p>"},{"location":"plugins/response-types/#plugin-actions-toolbar","title":"Plugin Actions (Toolbar)","text":"<pre><code>\"pluginActions\": [\n    {\"id\": \"add\", \"name\": \"Add\", \"icon\": \"add_circle\"},\n    {\"id\": \"wipe\", \"name\": \"Wipe All\", \"icon\": \"delete_sweep\", \"confirm\": \"Are you sure?\"}\n]\n</code></pre> Field Type Required Description <code>id</code> string Yes Action ID sent to handler <code>name</code> string Yes Button label <code>icon</code> string No Material icon <code>shortcut</code> string No Keyboard shortcut hint (default: Ctrl+1-6) <code>confirm</code> string No Confirmation dialog message <code>active</code> bool No Highlight as active (for toggles) <p>When clicked, you receive:</p> <pre><code>{\n    \"step\": \"action\",\n    \"selected\": {\"id\": \"__plugin__\"},  # Special ID for plugin actions\n    \"action\": \"add\"\n}\n</code></pre> <p>Example plugins: <code>quicklinks/</code>, <code>todo/</code>, <code>clipboard/</code></p>"},{"location":"plugins/response-types/#execute","title":"<code>execute</code>","text":"<p>Execute an action and optionally close the launcher.</p> <pre><code># Simple execution\n{\n    \"type\": \"execute\",\n    \"notify\": \"Done!\",\n    \"close\": true\n}\n\n# Launch application\n{\n    \"type\": \"execute\",\n    \"launch\": \"/usr/share/applications/firefox.desktop\",\n    \"close\": true\n}\n\n# Copy to clipboard\n{\n    \"type\": \"execute\",\n    \"copy\": \"text to copy\",\n    \"notify\": \"Copied!\",\n    \"close\": true\n}\n\n# Open URL\n{\n    \"type\": \"execute\",\n    \"openUrl\": \"https://example.com\",\n    \"close\": true\n}\n\n# Open file/folder\n{\n    \"type\": \"execute\",\n    \"open\": \"/path/to/file\",\n    \"close\": true\n}\n\n# Type text (snippet expansion)\n{\n    \"type\": \"execute\",\n    \"typeText\": \"expanded text\",\n    \"close\": true\n}\n</code></pre>"},{"location":"plugins/response-types/#execute-fields","title":"Execute Fields","text":"Field Type Description <code>launch</code> string Desktop file path (runs <code>gio launch</code>) <code>copy</code> string Text to copy (runs <code>wl-copy</code>) <code>typeText</code> string Text to type (uses <code>ydotool</code>) <code>openUrl</code> string URL to open (Qt.openUrlExternally) <code>open</code> string File/folder path (runs <code>xdg-open</code>) <code>notify</code> string Notification message <code>sound</code> string Sound effect name (see Sound Effects) <code>close</code> bool Close launcher after execution"},{"location":"plugins/response-types/#running-custom-commands","title":"Running Custom Commands","text":"<p>For commands not covered by execute fields, run them in your handler:</p> <pre><code>import subprocess\n\n# Execute in handler\nsubprocess.Popen([\"my-command\", \"arg1\"], start_new_session=True)\n\n# Return close response\nprint(json.dumps({\"type\": \"execute\", \"close\": True}))\n</code></pre> <p>Example plugins: <code>files/</code>, <code>bitwarden/</code></p>"},{"location":"plugins/response-types/#card","title":"<code>card</code>","text":"<p>Display markdown-formatted content with optional actions.</p> <p></p> <pre><code>{\n    \"type\": \"card\",\n    \"card\": {\n        \"title\": \"Word Definition\",\n        \"content\": \"**noun**\\n\\nA thing used for...\",\n        \"markdown\": true,\n        \"actions\": [\n            {\"id\": \"copy\", \"name\": \"Copy\", \"icon\": \"content_copy\"},\n            {\"id\": \"back\", \"name\": \"Back\", \"icon\": \"arrow_back\"}\n        ]\n    },\n    \"context\": \"word-id\",              # Preserve state for action handling\n    \"inputMode\": \"submit\",             # Optional: wait for Enter\n    \"placeholder\": \"Type reply...\"     # Optional: input hint\n}\n</code></pre> <p>When user clicks a card action:</p> <pre><code>{\n    \"step\": \"action\",\n    \"selected\": {\"id\": \"word-id\"},     # From context\n    \"action\": \"copy\"\n}\n</code></pre> <p>Example plugins: <code>dict/</code>, <code>notes/</code></p>"},{"location":"plugins/response-types/#form","title":"<code>form</code>","text":"<p>Display a multi-field input dialog.</p> <p></p> <pre><code>{\n    \"type\": \"form\",\n    \"form\": {\n        \"title\": \"Add Note\",\n        \"submitLabel\": \"Save\",         # Default: \"Submit\"\n        \"cancelLabel\": \"Cancel\",       # Default: \"Cancel\"\n        \"fields\": [\n            {\n                \"id\": \"title\",\n                \"type\": \"text\",\n                \"label\": \"Title\",\n                \"placeholder\": \"Enter title...\",\n                \"required\": true\n            },\n            {\n                \"id\": \"content\",\n                \"type\": \"textarea\",\n                \"label\": \"Content\",\n                \"rows\": 6\n            }\n        ]\n    },\n    \"context\": \"__add__\"               # Passed to form submission\n}\n</code></pre>"},{"location":"plugins/response-types/#field-types","title":"Field Types","text":"Type Description Extra Fields <code>text</code> Single-line input <code>placeholder</code>, <code>required</code>, <code>default</code>, <code>hint</code> <code>textarea</code> Multi-line input <code>placeholder</code>, <code>required</code>, <code>default</code>, <code>rows</code>, <code>hint</code> <code>email</code> Email with validation <code>placeholder</code>, <code>required</code>, <code>default</code>, <code>hint</code> <code>password</code> Masked input <code>placeholder</code>, <code>required</code>, <code>hint</code> <code>hidden</code> Hidden field <code>value</code> (required) <code>select</code> Dropdown <code>options</code> (required), <code>default</code>, <code>hint</code> <code>checkbox</code> Checkbox <code>default</code> (bool), <code>hint</code> <code>switch</code> Toggle switch <code>default</code> (bool), <code>hint</code> <code>slider</code> Range slider <code>min</code>, <code>max</code>, <code>step</code>, <code>unit</code>, <code>default</code>, <code>hint</code>"},{"location":"plugins/response-types/#select-options","title":"Select Options","text":"<pre><code>{\n    \"id\": \"theme\",\n    \"type\": \"select\",\n    \"label\": \"Theme\",\n    \"options\": [\n        {\"id\": \"light\", \"name\": \"Light\"},\n        {\"id\": \"dark\", \"name\": \"Dark\"},\n        {\"id\": \"system\", \"name\": \"System Default\"}\n    ],\n    \"default\": \"system\"\n}\n</code></pre>"},{"location":"plugins/response-types/#form-submission","title":"Form Submission","text":"<p>When user submits:</p> <pre><code>{\n    \"step\": \"form\",\n    \"formData\": {\n        \"title\": \"My Note\",\n        \"content\": \"Note content...\"\n    },\n    \"context\": \"__add__\"\n}\n</code></pre> <p>When user cancels:</p> <pre><code>{\n    \"step\": \"action\",\n    \"selected\": {\"id\": \"__form_cancel__\"},\n    \"context\": \"__add__\"\n}\n</code></pre>"},{"location":"plugins/response-types/#live-update-forms","title":"Live Update Forms","text":"<p>For forms where changes apply immediately (no submit button):</p> <pre><code>{\n    \"type\": \"form\",\n    \"form\": {\n        \"title\": \"Settings\",\n        \"liveUpdate\": true,\n        \"fields\": [\n            {\"id\": \"opacity\", \"type\": \"slider\", \"label\": \"Opacity\", \"min\": 0, \"max\": 1, \"step\": 0.05}\n        ]\n    }\n}\n</code></pre> <p>On slider change, you receive <code>step: \"formSlider\"</code> with <code>fieldId</code> and <code>value</code>.</p> <p>Example plugins: <code>notes/</code>, <code>bitwarden/</code>, <code>settings/</code></p>"},{"location":"plugins/response-types/#imagebrowser","title":"<code>imageBrowser</code>","text":"<p>Open a rich image browser with thumbnails and directory navigation.</p> <p></p> <pre><code>{\n    \"type\": \"imageBrowser\",\n    \"imageBrowser\": {\n        \"directory\": \"~/Pictures/Wallpapers\",\n        \"title\": \"Select Wallpaper\",\n        \"enableOcr\": false,            # Enable text search via OCR\n        \"actions\": [\n            {\"id\": \"set_dark\", \"name\": \"Set (Dark)\", \"icon\": \"dark_mode\"},\n            {\"id\": \"set_light\", \"name\": \"Set (Light)\", \"icon\": \"light_mode\"}\n        ]\n    }\n}\n</code></pre> <p>When user selects an image:</p> <pre><code>{\n    \"step\": \"action\",\n    \"selected\": {\n        \"id\": \"imageBrowser\",\n        \"path\": \"/full/path/to/image.jpg\",\n        \"action\": \"set_dark\"\n    }\n}\n</code></pre> <p>Example plugins: <code>wallpaper/</code>, <code>screenshot/</code></p>"},{"location":"plugins/response-types/#gridbrowser","title":"<code>gridBrowser</code>","text":"<p>Display items in a grid layout. Ideal for emojis, icons, or large item sets.</p> <p></p> <pre><code>{\n    \"type\": \"gridBrowser\",\n    \"gridBrowser\": {\n        \"title\": \"Select Emoji\",\n        \"columns\": 10,\n        \"cellAspectRatio\": 1.0,\n        \"items\": [\n            {\n                \"id\": \"smile\",\n                \"name\": \"grinning face\",\n                \"icon\": \"smile\",\n                \"iconType\": \"text\",\n                \"keywords\": [\"happy\", \"smile\"]\n            }\n        ],\n        \"actions\": [\n            {\"id\": \"copy\", \"name\": \"Copy\", \"icon\": \"content_copy\"}\n        ]\n    }\n}\n</code></pre> Field Type Default Description <code>columns</code> int 8 Number of columns <code>cellAspectRatio</code> float 1.0 Width/height ratio <code>items</code> array required Grid items <code>actions</code> array [] Action buttons <p>When user selects:</p> <pre><code>{\n    \"step\": \"action\",\n    \"selected\": {\n        \"id\": \"gridBrowser\",\n        \"itemId\": \"smile\",\n        \"action\": \"copy\"\n    }\n}\n</code></pre> <p>Example plugin: <code>emoji/</code></p>"},{"location":"plugins/response-types/#prompt","title":"<code>prompt</code>","text":"<p>Display a simple text prompt. Typically used on initial load.</p> <pre><code>{\n    \"type\": \"prompt\",\n    \"prompt\": {\"text\": \"Enter word to define...\"}\n}\n</code></pre> <p>Example plugin: <code>dict/</code></p>"},{"location":"plugins/response-types/#error","title":"<code>error</code>","text":"<p>Display an error message.</p> <pre><code>{\n    \"type\": \"error\",\n    \"message\": \"Failed to connect to API\"\n}\n</code></pre>"},{"location":"plugins/response-types/#update","title":"<code>update</code>","text":"<p>Patch individual items without replacing the entire results array. Preserves selection and focus.</p> <pre><code>{\n    \"type\": \"update\",\n    \"items\": [\n        {\n            \"id\": \"volume\",            # Item to update (matched by id)\n            \"gauge\": {\"value\": 75, \"max\": 100, \"label\": \"75%\"},\n            \"icon\": \"volume_up\"\n        }\n    ]\n}\n</code></pre> <p>Use cases:</p> <ul> <li>Slider value changes</li> <li>Live status updates</li> <li>Badge/gauge updates</li> </ul> <p>Example plugin: <code>sound/</code></p>"},{"location":"plugins/response-types/#index","title":"<code>index</code>","text":"<p>Provide items for main search integration. See Plugin Indexing.</p> <pre><code>{\n    \"type\": \"index\",\n    \"items\": [\n        {\n            \"id\": \"app:firefox\",\n            \"name\": \"Firefox\",\n            \"icon\": \"firefox\",\n            \"iconType\": \"system\",\n            \"keywords\": [\"browser\", \"web\"],\n            \"execute\": {\n                \"launch\": \"/usr/share/applications/firefox.desktop\"\n            }\n        }\n    ]\n}\n</code></pre>"},{"location":"plugins/response-types/#noop","title":"<code>noop</code>","text":"<p>Signal that the action was handled but no UI update is needed.</p> <pre><code>{\n    \"type\": \"noop\"\n}\n</code></pre> <p>Use cases:</p> <ul> <li>Slider adjustments (UI already shows new value)</li> <li>Background operations</li> <li>Toggle states with immediate visual feedback</li> </ul>"},{"location":"plugins/response-types/#input-modes","title":"Input Modes","text":"<p>The <code>inputMode</code> field controls when search queries are sent:</p> Mode Behavior Use Case <code>realtime</code> Every keystroke triggers search Filtering, fuzzy search <code>submit</code> Only Enter triggers search Text input, forms <pre><code># Realtime: filter as user types\n{\n    \"type\": \"results\",\n    \"results\": filtered_items,\n    \"inputMode\": \"realtime\"\n}\n\n# Submit: wait for Enter\n{\n    \"type\": \"results\",\n    \"results\": [],\n    \"inputMode\": \"submit\",\n    \"placeholder\": \"Type new item name, press Enter...\"\n}\n</code></pre>"},{"location":"plugins/response-types/#context-persistence","title":"Context Persistence","text":"<p>Use <code>context</code> to maintain state across search calls:</p> <pre><code># Enter edit mode\nif action == \"edit\":\n    print(json.dumps({\n        \"type\": \"results\",\n        \"context\": f\"__edit__:{item_id}\",\n        \"inputMode\": \"submit\",\n        \"placeholder\": \"Type new value...\"\n    }))\n\n# Handle edit in search step\nif step == \"search\" and context.startswith(\"__edit__:\"):\n    item_id = context.split(\":\")[1]\n    save_item(item_id, query)\n</code></pre>"},{"location":"plugins/response-types/#navigation","title":"Navigation","text":"<p>Hamr tracks navigation depth to show breadcrumbs and enable back navigation. The depth determines how many \"levels deep\" the user is in your plugin.</p>"},{"location":"plugins/response-types/#automatic-navigation","title":"Automatic Navigation","text":"<p>Hamr sets <code>pendingNavigation</code> automatically based on user interaction:</p> User Action Hamr Behavior Click item (no action button) Sets <code>pendingNavigation=true</code> \u2192 depth +1 Click action button No pending navigation \u2192 depth unchanged Click <code>__back__</code> Sets <code>pendingBack=true</code> \u2192 depth -1 <p>If your response doesn't include navigation fields, Hamr applies the pending state automatically.</p>"},{"location":"plugins/response-types/#overriding-navigation","title":"Overriding Navigation","text":"<p>Use these response fields to explicitly control depth:</p> <pre><code># Drill into sub-view (depth +1)\n{\"type\": \"results\", \"navigateForward\": True, ...}\n\n# Return to parent (depth -1)\n{\"type\": \"results\", \"navigateBack\": True, ...}\n\n# Jump to specific depth\n{\"type\": \"results\", \"navigationDepth\": 0, ...}  # Root\n\n# Prevent navigation (stay at current depth)\n{\"type\": \"results\", \"navigateForward\": False, ...}\n</code></pre>"},{"location":"plugins/response-types/#when-to-use-navigateforward-false","title":"When to Use <code>navigateForward: False</code>","text":"<p>Important: When an action modifies data but should stay on the same view, you must explicitly set <code>navigateForward: False</code>. Otherwise, Hamr's automatic navigation will increase the depth.</p> <p>Common scenarios requiring <code>navigateForward: False</code>:</p> <pre><code># Toggle a todo item's done state\nif action == \"toggle\":\n    todos[idx][\"done\"] = not todos[idx][\"done\"]\n    save_todos(todos)\n    print(json.dumps({\n        \"type\": \"results\",\n        \"results\": get_todo_results(todos),\n        \"navigateForward\": False  # Stay on same view\n    }))\n\n# Delete an item from the list\nif action == \"delete\":\n    del items[idx]\n    save_items(items)\n    print(json.dumps({\n        \"type\": \"results\",\n        \"results\": get_items(),\n        \"navigateForward\": False  # Stay on same view\n    }))\n\n# Sync/refresh data\nif action == \"sync\":\n    refresh_data()\n    print(json.dumps({\n        \"type\": \"results\",\n        \"results\": get_results(),\n        \"navigateForward\": False  # Stay on same view\n    }))\n</code></pre> <p>Without <code>navigateForward: False</code>, these actions would incorrectly push a new navigation level, causing confusing breadcrumb behavior.</p>"},{"location":"plugins/response-types/#back-button","title":"Back Button","text":"<p>When user presses Escape or clicks Back:</p> <pre><code>{\n    \"step\": \"action\",\n    \"selected\": {\"id\": \"__back__\"}\n}\n</code></pre> <p>Handle it to return to the previous view:</p> <pre><code>if selected.get(\"id\") == \"__back__\":\n    print(json.dumps({\n        \"type\": \"results\",\n        \"results\": get_parent_view()\n        # navigateBack is automatic for __back__\n    }))\n</code></pre> <p>Example plugins: <code>todo/</code>, <code>bitwarden/</code>, <code>clipboard/</code></p>"},{"location":"plugins/response-types/#sound-effects","title":"Sound Effects","text":"<p>Include sounds in execute responses:</p> <pre><code>{\n    \"type\": \"execute\",\n    \"sound\": \"complete\",\n    \"notify\": \"Done!\",\n    \"close\": true\n}\n</code></pre> Sound Use Case <code>alarm</code> Timer/alarm completion <code>timer</code> Pomodoro, countdown <code>complete</code> Task done <code>notification</code> Alerts <code>error</code> Failed operations <code>warning</code> Caution alerts <p>Custom sounds: Place in <code>~/.config/hamr/sounds/</code> (supports <code>.wav</code>, <code>.ogg</code>, <code>.mp3</code>, <code>.flac</code>)</p>"},{"location":"plugins/testing/","title":"Testing Plugins","text":"<p>The best way to test your plugin is to use it directly in Hamr. Hamr captures and displays JSON errors in the UI, making visual testing the most effective approach.</p>"},{"location":"plugins/testing/#running-hamr-in-dev-mode","title":"Running Hamr in Dev Mode","text":"<p>For plugin development, run Hamr in dev mode from the repository:</p> <pre><code>cd ~/path/to/hamr\n./dev\n</code></pre> <p>Dev mode:</p> <ul> <li>Stops any running production Hamr</li> <li>Runs Hamr from the current directory</li> <li>Auto-reloads when plugin files change</li> <li>Shows logs directly in the terminal</li> <li>Restores production Hamr on exit (Ctrl+C)</li> </ul> <p>Use <code>./dev --no-restore</code> to not restart production Hamr after exiting.</p>"},{"location":"plugins/testing/#visual-testing","title":"Visual Testing","text":""},{"location":"plugins/testing/#basic-testing-workflow","title":"Basic Testing Workflow","text":"<ol> <li>Run Hamr in dev mode - <code>./dev</code> from the hamr directory</li> <li>Open Hamr and type <code>/your-plugin-name</code></li> <li>Interact with your plugin - type searches, select items, click actions</li> <li>Errors are shown in the UI - invalid JSON, missing fields, Python exceptions</li> <li>Edit your plugin - Hamr auto-reloads on file changes</li> <li>Check terminal for logs - errors and debug output appear in the dev terminal</li> </ol>"},{"location":"plugins/testing/#alternative-check-logs-separately","title":"Alternative: Check Logs Separately","text":"<p>If running Hamr as a systemd service instead of dev mode:</p> <pre><code># Watch logs while testing\njournalctl --user -u hamr -f\n</code></pre>"},{"location":"plugins/testing/#manual-handler-testing","title":"Manual Handler Testing","text":"<p>Test your handler directly from the command line:</p> <pre><code># Test initial step\necho '{\"step\": \"initial\"}' | ./handler.py\n\n# Test search\necho '{\"step\": \"search\", \"query\": \"test\"}' | ./handler.py\n\n# Test action\necho '{\"step\": \"action\", \"selected\": {\"id\": \"item-1\"}}' | ./handler.py\n\n# Validate JSON output\necho '{\"step\": \"initial\"}' | ./handler.py | jq .\n</code></pre>"},{"location":"plugins/testing/#schema-requirements","title":"Schema Requirements","text":"<p>Hamr validates all responses. Invalid responses show errors in the UI.</p> Response Type Required Fields <code>results</code> <code>type</code>, <code>results[]</code> with <code>id</code> and <code>name</code> <code>card</code> <code>type</code>, <code>card.content</code> <code>execute</code> <code>type</code> <code>imageBrowser</code> <code>type</code>, <code>imageBrowser.directory</code> <code>gridBrowser</code> <code>type</code>, <code>gridBrowser.items[]</code> with <code>id</code> and <code>name</code> <code>form</code> <code>type</code>, <code>form.fields[]</code> with <code>id</code>, <code>type</code> <code>prompt</code> <code>type</code>, <code>prompt</code> object <code>error</code> <code>type</code>, <code>message</code> <code>noop</code> <code>type</code> only"},{"location":"plugins/testing/#debugging-tips","title":"Debugging Tips","text":""},{"location":"plugins/testing/#check-handler-output","title":"Check Handler Output","text":"<pre><code># Run handler and validate JSON\necho '{\"step\": \"initial\"}' | ./handler.py | jq .\n\n# Check specific field\necho '{\"step\": \"initial\"}' | ./handler.py | jq '.results[0].id'\n</code></pre>"},{"location":"plugins/testing/#check-hamr-logs","title":"Check Hamr Logs","text":"<pre><code># Follow logs in real-time\njournalctl --user -u hamr -f\n\n# Show recent errors\njournalctl --user -u hamr --since \"5 min ago\" | grep -i error\n</code></pre>"},{"location":"plugins/testing/#common-issues","title":"Common Issues","text":"Issue Solution Plugin doesn't appear Check <code>supportedPlatforms</code> in manifest Handler errors Check <code>journalctl --user -u hamr -f</code> Invalid JSON Test with <code>echo '{\"step\": \"initial\"}' \\| ./handler.py \\| jq .</code> Missing fields Check schema requirements above"},{"location":"plugins/visual-elements/","title":"Visual Elements","text":"<p>Hamr provides rich visual elements for result items. This page covers sliders, switches, badges, gauges, and more.</p>"},{"location":"plugins/visual-elements/#slider-items","title":"Slider Items","text":"<p>Sliders let users adjust numeric values (volume, brightness, etc.).</p> <p></p> <p>Simple format (stdio plugins):</p> <pre><code>{\n    \"type\": \"results\",\n    \"results\": [\n        {\n            \"id\": \"volume\",\n            \"type\": \"slider\",           # Makes this a slider\n            \"name\": \"Volume\",\n            \"icon\": \"volume_up\",\n            \"value\": 75,                # Current value\n            \"min\": 0,                   # Minimum\n            \"max\": 100,                 # Maximum\n            \"step\": 5,                  # Increment\n            \"unit\": \"%\"                 # Optional: suffix\n        }\n    ]\n}\n</code></pre> <p>Extended format (socket plugins with gauge):</p> <pre><code>{\n    \"type\": \"results\",\n    \"results\": [\n        {\n            \"id\": \"volume\",\n            \"name\": \"Volume\",\n            \"icon\": \"volume_up\",\n            \"resultType\": \"slider\",     # Alternative to \"type\"\n            \"value\": {                  # Object for extended control\n                \"value\": 75,\n                \"min\": 0,\n                \"max\": 100,\n                \"step\": 5,\n                \"displayValue\": \"75%\"\n            },\n            \"gauge\": {                  # Optional: show gauge alongside\n                \"value\": 75,\n                \"max\": 100,\n                \"label\": \"75%\"\n            }\n        }\n    ]\n}\n</code></pre> Field Type Description <code>type</code> string <code>\"slider\"</code> (simple format) <code>resultType</code> string <code>\"slider\"</code> (extended format) <code>value</code> number/object Current value (number or object with min/max/step) <code>min</code> number Minimum value (simple format) <code>max</code> number Maximum value (simple format) <code>step</code> number Step increment (also determines decimal precision) <code>unit</code> string Unit suffix (e.g., <code>\"%\"</code>, <code>\"px\"</code>, <code>\"ms\"</code>) <code>displayValue</code> string Override display text entirely <code>gauge</code> object Optional gauge to display alongside slider"},{"location":"plugins/visual-elements/#handling-slider-changes","title":"Handling Slider Changes","text":"<p>When user drags the slider:</p> <pre><code>{\n    \"step\": \"action\",\n    \"selected\": {\"id\": \"volume\"},\n    \"action\": \"slider\",\n    \"value\": 80                         # New value\n}\n</code></pre> <p>Handle it and return updated results:</p> <pre><code>if action == \"slider\":\n    item_id = selected.get(\"id\")\n    new_value = input_data.get(\"value\", 0)\n\n    # Apply the change\n    set_volume(item_id, new_value)\n\n    # Return updated results\n    print(json.dumps({\n        \"type\": \"results\",\n        \"results\": get_all_sliders(),\n        \"navigateForward\": False  # Don't change navigation\n    }))\n</code></pre> <p>Example plugin: <code>sound/</code></p>"},{"location":"plugins/visual-elements/#switch-items","title":"Switch Items","text":"<p>Switches are boolean toggles (mute, enable/disable).</p> <p></p> <p>Simple format (stdio plugins):</p> <pre><code>{\n    \"type\": \"results\",\n    \"results\": [\n        {\n            \"id\": \"mute\",\n            \"type\": \"switch\",           # Makes this a switch\n            \"name\": \"Mute Volume\",      # Action description\n            \"description\": \"Mute audio output\",\n            \"icon\": \"volume_up\",        # Shows current state\n            \"value\": False              # Current state\n        }\n    ]\n}\n</code></pre> <p>Extended format (socket plugins):</p> <pre><code>{\n    \"type\": \"results\",\n    \"results\": [\n        {\n            \"id\": \"volume-mute\",\n            \"name\": \"Mute Volume\",\n            \"description\": \"Mute system audio output\",\n            \"icon\": \"volume_up\",\n            \"resultType\": \"switch\",     # Alternative to \"type\"\n            \"value\": False\n        }\n    ]\n}\n</code></pre>"},{"location":"plugins/visual-elements/#naming-convention","title":"Naming Convention","text":"<p>The name describes the action, the icon shows the current state:</p> State Name Icon Not muted \"Mute Volume\" <code>volume_up</code> Muted \"Unmute Volume\" <code>volume_off</code>"},{"location":"plugins/visual-elements/#handling-switch-changes","title":"Handling Switch Changes","text":"<p>When user toggles:</p> <pre><code>{\n    \"step\": \"action\",\n    \"selected\": {\"id\": \"mute\"},\n    \"action\": \"switch\",\n    \"value\": True                       # New value after toggle\n}\n</code></pre> <p>Return an <code>update</code> response:</p> <pre><code>if action == \"switch\":\n    new_value = input_data.get(\"value\", False)\n    set_mute(new_value)\n\n    print(json.dumps({\n        \"type\": \"update\",\n        \"items\": [\n            {\n                \"id\": \"mute\",\n                \"value\": new_value,\n                \"name\": \"Unmute Volume\" if new_value else \"Mute Volume\",\n                \"icon\": \"volume_off\" if new_value else \"volume_up\"\n            }\n        ]\n    }))\n</code></pre> <p>Example plugin: <code>sound/</code></p>"},{"location":"plugins/visual-elements/#badges","title":"Badges","text":"<p>Small circular indicators beside the item name. Max 5 per item.</p> <p></p> <pre><code>{\n    \"id\": \"task-1\",\n    \"name\": \"Review PR\",\n    \"icon\": \"task\",\n    \"badges\": [\n        {\"text\": \"JD\"},                        # Initials\n        {\"text\": \"!\", \"color\": \"#f44336\"},     # Alert (red text)\n        {\"icon\": \"verified\", \"color\": \"#4caf50\"},  # Icon badge\n        {\"image\": \"/path/to/avatar.png\"}       # Avatar image\n    ]\n}\n</code></pre> Field Type Description <code>text</code> string 1-3 characters (initials) <code>icon</code> string Material icon (overrides text) <code>image</code> string Image path (overrides text) <code>color</code> string Text/icon color (hex) <p>Note: Background is always theme default. Use <code>color</code> to tint text/icons.</p>"},{"location":"plugins/visual-elements/#chips","title":"Chips","text":"<p>Pill-shaped tags for longer text. Show beside the item name.</p> <p></p> <pre><code>{\n    \"id\": \"task-1\",\n    \"name\": \"Review PR\",\n    \"icon\": \"task\",\n    \"chips\": [\n        {\"text\": \"In Progress\"},                  # Simple label\n        {\"text\": \"Frontend\", \"icon\": \"code\"},     # With icon\n        {\"text\": \"Urgent\", \"color\": \"#f44336\"}    # Colored\n    ]\n}\n</code></pre> Field Type Description <code>text</code> string Label text <code>icon</code> string Optional icon before text <code>color</code> string Text/icon color (hex)"},{"location":"plugins/visual-elements/#gauge","title":"Gauge","text":"<p>Circular progress indicator shown in place of the icon.</p> <p></p> <pre><code>{\n    \"id\": \"disk\",\n    \"name\": \"Disk Space\",\n    \"gauge\": {\n        \"value\": 75,           # Current value\n        \"max\": 100,            # Maximum value\n        \"label\": \"75%\"         # Center label\n    }\n}\n</code></pre> Field Type Description <code>value</code> number Current value <code>max</code> number Maximum value <code>label</code> string Center text (optional)"},{"location":"plugins/visual-elements/#graph","title":"Graph","text":"<p>Line graph shown in place of the icon. Good for trends/history.</p> <p></p> <pre><code>{\n    \"id\": \"cpu\",\n    \"name\": \"CPU Usage\",\n    \"graph\": {\n        \"data\": [45, 52, 48, 61, 55, 50, 47],  # Y values\n        \"min\": 0,                               # Optional: min Y\n        \"max\": 100                              # Optional: max Y\n    }\n}\n</code></pre> <p>If <code>min</code>/<code>max</code> not provided, auto-scales from data.</p>"},{"location":"plugins/visual-elements/#progress-bar","title":"Progress Bar","text":"<p>Horizontal progress bar shown below the name. Replaces description.</p> <p></p> <pre><code>{\n    \"id\": \"download\",\n    \"name\": \"Downloading file.zip\",\n    \"icon\": \"downloading\",\n    \"progress\": {\n        \"value\": 65,           # Current value\n        \"max\": 100,            # Maximum value\n        \"label\": \"65%\",        # Text beside bar\n        \"color\": \"#4caf50\"     # Custom bar color\n    }\n}\n</code></pre> Field Type Description <code>value</code> number Current progress <code>max</code> number Maximum value (default: 100) <code>label</code> string Text shown beside bar <code>color</code> string Custom bar color (hex)"},{"location":"plugins/visual-elements/#preview-panel","title":"Preview Panel","text":"<p>Add a <code>preview</code> field to show rich content in a side panel on hover/selection.</p> <p></p> <pre><code>{\n    \"id\": \"image-1\",\n    \"name\": \"sunset.jpg\",\n    \"icon\": \"image\",\n    \"preview\": {\n        \"type\": \"image\",                    # \"image\", \"markdown\", \"text\", \"metadata\"\n        \"content\": \"/path/to/sunset.jpg\",\n        \"title\": \"Sunset Photo\",\n        \"metadata\": [\n            {\"label\": \"Size\", \"value\": \"3840x2160\"},\n            {\"label\": \"Date\", \"value\": \"2024-01-15\"}\n        ],\n        \"actions\": [\n            {\"id\": \"open\", \"name\": \"Open\", \"icon\": \"open_in_new\"}\n        ],\n        \"detachable\": true                  # Allow pinning\n    }\n}\n</code></pre>"},{"location":"plugins/visual-elements/#preview-types","title":"Preview Types","text":"Type Content Field Description <code>image</code> File path Shows image with optional metadata <code>markdown</code> Markdown text Renders markdown <code>text</code> Plain text Monospace display <code>metadata</code> (uses metadata array) Key-value pairs only"},{"location":"plugins/visual-elements/#detachable-previews","title":"Detachable Previews","text":"<p>Users can pin previews to a floating panel that persists after launcher closes.</p> <p></p> <p>Example plugins: <code>pictures/</code>, <code>notes/</code></p>"},{"location":"plugins/visual-elements/#visual-priority","title":"Visual Priority","text":"<p>If multiple visual elements are set on an item:</p> <p>Icon area priority: <code>graph</code> &gt; <code>gauge</code> &gt; <code>thumbnail</code> &gt; <code>icon</code></p> <p>Progress bar: Independent, replaces description.</p>"},{"location":"plugins/visual-elements/#icon-types","title":"Icon Types","text":""},{"location":"plugins/visual-elements/#material-icons-default","title":"Material Icons (Default)","text":"<p>Use any icon from Material Symbols.</p> <pre><code>{\"id\": \"1\", \"name\": \"Item\", \"icon\": \"star\"}\n</code></pre> <p>Common icons:</p> Category Icons Navigation <code>arrow_back</code>, <code>home</code>, <code>menu</code>, <code>close</code> Actions <code>open_in_new</code>, <code>content_copy</code>, <code>delete</code>, <code>edit</code>, <code>add</code> Files <code>folder</code>, <code>description</code>, <code>image</code>, <code>video_file</code> UI <code>search</code>, <code>settings</code>, <code>star</code>, <code>favorite</code>, <code>info</code>"},{"location":"plugins/visual-elements/#system-icons","title":"System Icons","text":"<p>For desktop application icons, set <code>iconType: \"system\"</code>:</p> <pre><code>{\n    \"id\": \"chrome\",\n    \"name\": \"Google Chrome\",\n    \"icon\": \"google-chrome\",      # From .desktop file\n    \"iconType\": \"system\"\n}\n</code></pre> <p>Auto-detection: Icons with <code>.</code> or <code>-</code> are assumed system icons. Simple names like <code>btop</code> need explicit <code>iconType: \"system\"</code>.</p>"},{"location":"plugins/visual-elements/#thumbnails","title":"Thumbnails","text":"<p>Show image previews instead of icons:</p> <pre><code>{\n    \"id\": \"file-1\",\n    \"name\": \"photo.jpg\",\n    \"thumbnail\": \"/path/to/photo.jpg\"\n}\n</code></pre> <p>Use sparingly - thumbnails load images and impact performance.</p>"},{"location":"plugins/visual-elements/#updating-visual-elements","title":"Updating Visual Elements","text":"<p>Use <code>type: \"update\"</code> to patch items without replacing the entire list:</p> <pre><code>{\n    \"type\": \"update\",\n    \"items\": [\n        {\n            \"id\": \"volume\",\n            \"gauge\": {\"value\": 80, \"max\": 100, \"label\": \"80%\"},\n            \"badges\": [{\"text\": \"M\", \"color\": \"#f44336\"}]\n        }\n    ]\n}\n</code></pre> <p>This preserves selection and focus - ideal for:</p> <ul> <li>Slider adjustments</li> <li>Live status updates</li> <li>Real-time data changes</li> </ul> <p>Example plugin: <code>sound/</code></p>"},{"location":"releases/checklist/","title":"Release Checklist","text":"<p>Manual checklist for smoke testing before publishing a release.</p>"},{"location":"releases/checklist/#pre-flight-checks","title":"Pre-flight Checks","text":"<p>Run the automated checks first:</p> <pre><code>./scripts/release-check.sh\n</code></pre> <p>This script validates:</p> <ul> <li><code>cargo fmt --all -- --check</code> (code formatting)</li> <li><code>cargo clippy --all-targets -- -D warnings</code> (lint checks)</li> <li><code>cargo test --all</code> (unit/integration tests)</li> <li><code>cargo build --release</code> (release build)</li> <li><code>mkdocs build --strict</code> (documentation)</li> <li><code>python3 -m compileall -q plugins</code> (plugin syntax)</li> <li>Plugin checksum verification</li> </ul> <p>All checks must pass before proceeding.</p>"},{"location":"releases/checklist/#manual-smoke-tests","title":"Manual Smoke Tests","text":""},{"location":"releases/checklist/#1-daemon-startup","title":"1. Daemon Startup","text":"<pre><code># Start daemon in foreground\ncargo run -p hamr-daemon\n\n# In another terminal, check socket exists\nls -la /run/user/$(id -u)/hamr.sock\n</code></pre> <p>Expected: Daemon starts without errors, socket file is created.</p>"},{"location":"releases/checklist/#2-basic-search-tui","title":"2. Basic Search (TUI)","text":"<pre><code># With daemon running, start TUI\ncargo run -p hamr-tui\n</code></pre> <ol> <li>Type a query (e.g., \"firefox\")</li> <li>Verify results appear</li> <li>Press <code>Enter</code> on a result</li> <li>Verify action executes</li> </ol> <p>Expected: Search works, results display correctly, actions trigger.</p>"},{"location":"releases/checklist/#3-plugin-communication","title":"3. Plugin Communication","text":"<pre><code># Test a daemon plugin (shell)\ncargo run -p hamr-cli -- test shell \"ls\"\n\n# Test a non-daemon plugin (calculate)\ncargo run -p hamr-cli -- test calculate \"2+2\"\n</code></pre> <p>Expected: Both commands return results without errors.</p>"},{"location":"releases/checklist/#4-index-functionality","title":"4. Index Functionality","text":"<pre><code># View index statistics\ncargo run -p hamr-cli -- index\n\n# Test index search\ncargo run -p hamr-cli -- query \"shutdown\"\n</code></pre> <p>Expected: Index stats show item counts, query returns relevant results.</p>"},{"location":"releases/checklist/#5-plugin-audit","title":"5. Plugin Audit","text":"<pre><code>cargo run -p hamr-cli -- plugins audit\n</code></pre> <p>Expected: All bundled plugins show <code>VERIFIED</code> status.</p>"},{"location":"releases/checklist/#6-gtk-ui-if-applicable","title":"6. GTK UI (if applicable)","text":"<pre><code># Requires Wayland compositor with layer-shell support\ncargo run -p hamr-gtk\n</code></pre> <ol> <li>Launcher window appears</li> <li>Search works</li> <li>Results are selectable</li> <li>Window closes on action or Escape</li> </ol> <p>Expected: UI renders correctly, interactions work smoothly.</p>"},{"location":"releases/checklist/#7-configuration-loading","title":"7. Configuration Loading","text":"<pre><code># Check config is loaded\ncat ~/.config/hamr/config.json\n\n# Modify a setting and restart daemon\n# Verify change takes effect\n</code></pre> <p>Expected: Configuration changes are reflected after daemon restart.</p>"},{"location":"releases/checklist/#version-bump-checklist","title":"Version Bump Checklist","text":"<p>Before tagging a release:</p> <ul> <li>[ ] Update version in <code>Cargo.toml</code> (workspace level)</li> <li>[ ] Update version in child crate <code>Cargo.toml</code> files if needed</li> <li>[ ] Update <code>CHANGELOG.md</code> with release notes</li> <li>[ ] Commit version bump: <code>git commit -m \"chore: bump version to vX.Y.Z\"</code></li> <li>[ ] Create and push tag: <code>git tag vX.Y.Z &amp;&amp; git push origin vX.Y.Z</code></li> </ul>"},{"location":"releases/checklist/#post-release-verification","title":"Post-Release Verification","text":"<p>After the release workflow completes:</p> <ol> <li>Check GitHub Releases for new draft</li> <li>Verify artifacts are attached:</li> <li><code>hamr-linux-x86_64.tar.gz</code></li> <li><code>hamr-linux-aarch64.tar.gz</code></li> <li><code>checksums.txt</code></li> <li>Download and extract a tarball, verify binaries run</li> <li>If using AUR: verify PKGBUILD was updated</li> <li>Publish the draft release</li> </ol>"},{"location":"releases/checklist/#rollback-procedure","title":"Rollback Procedure","text":"<p>If critical issues are found after release:</p> <ol> <li>Immediate: Edit GitHub release to mark as pre-release or delete</li> <li>Revert tag: <code>git tag -d vX.Y.Z &amp;&amp; git push origin :refs/tags/vX.Y.Z</code></li> <li>Fix issues on main branch</li> <li>Re-tag with same or incremented version</li> </ol>"},{"location":"releases/checklist/#troubleshooting-release-issues","title":"Troubleshooting Release Issues","text":"Issue Cause Solution Workflow fails at build Missing dependency Check system deps in workflow Checksums mismatch Plugin files modified Re-run <code>./scripts/generate-plugin-checksums.sh</code> AUR update fails Version format issue Ensure tag format is <code>vX.Y.Z</code> Artifacts missing Build step failed Check workflow logs for errors"}]}